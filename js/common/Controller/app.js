var app=angular.module("App",[]);app.constant("globals",{encryptionKey:"9080706050403020",encryptionIv:"1020304080706050",staticKey:"IG006072021",fershDeskURL:'https://insurejoy.freshdesk.com/helpdesk/tickets.json',RedirectURL:"https://qa.indiacover360.com/Application/",ServiceURL:"https://apiqa.indiacover360.com",IGwServiceURL:"https://apiqa.indiacover360.com",UIURL:"https://qa.indiacover360.com/HomePage",landingPage:"https://qa.indiacover360.com",mainPage:"https://qa.indiacover360.com/Application/?CPID=",});app.run(function($window,$rootScope,$location,$http){$rootScope.online=navigator.onLine;$window.addEventListener("offline",function(){$rootScope.$apply(function(){$rootScope.online=false;});},false);$rootScope.$on("$locationChangeStart",function(event,absNewUrl,absOldUrl,globals){if(absOldUrl.indexOf("Products")!=-1&&(absNewUrl.indexOf("Product")==-1||$rootScope.closedirect==1)){$rootScope.popredirect(1);}else if(absOldUrl.indexOf("Claim")!=-1&&absNewUrl.indexOf("Claim")==-1){$rootScope.popredirect(2);}else if(absOldUrl.indexOf("PreviousSearch")!=-1&&absNewUrl.indexOf("PreviousSearch")==-1){$rootScope.popredirect(0);}else if(absOldUrl.indexOf("FormCar")!=-1&&absNewUrl.indexOf("ProductCar")!=-1){$rootScope.popredirect(3,2);}else if(absOldUrl.indexOf("ProductCar")!=-1&&absNewUrl.indexOf("FormCar")==-1&&absNewUrl.indexOf("ProductCar")==-1&&absNewUrl.indexOf("ProductBike")==-1&&absNewUrl.indexOf("Health")==-1&&absNewUrl.indexOf("Term")==-1&&absNewUrl.indexOf("Critical")==-1&&absNewUrl.indexOf("Child")==-1&&absNewUrl.indexOf("Investment")==-1&&absNewUrl.indexOf("Pension")==-1&&absNewUrl.indexOf("Travel")==-1){$rootScope.popredirect(3,1);}else if(absOldUrl.indexOf("FormBike")!=-1&&absNewUrl.indexOf("ProductBike")!=-1){$rootScope.popredirect(4,2);}else if(absOldUrl.indexOf("ProductBike")!=-1&&absNewUrl.indexOf("FormBike")==-1&&absNewUrl.indexOf("ProductCar")==-1&&absNewUrl.indexOf("ProductBike")==-1&&absNewUrl.indexOf("Health")==-1&&absNewUrl.indexOf("Term")==-1&&absNewUrl.indexOf("Critical")==-1&&absNewUrl.indexOf("Child")==-1&&absNewUrl.indexOf("Investment")==-1&&absNewUrl.indexOf("Pension")==-1&&absNewUrl.indexOf("Travel")==-1){$rootScope.popredirect(4,1);}else if(absOldUrl.indexOf("Health")!=-1&&absNewUrl.indexOf("ProductCar")==-1&&absNewUrl.indexOf("ProductBike")==-1&&absNewUrl.indexOf("Health")==-1&&absNewUrl.indexOf("Term")==-1&&absNewUrl.indexOf("Critical")==-1&&absNewUrl.indexOf("Child")==-1&&absNewUrl.indexOf("Investment")==-1&&absNewUrl.indexOf("Pension")==-1&&absNewUrl.indexOf("Travel")==-1&&absNewUrl.indexOf("Details")==-1){$rootScope.popredirect(5);}else if(absOldUrl.indexOf("Term")!=-1&&absNewUrl.indexOf("ProductCar")==-1&&absNewUrl.indexOf("ProductBike")==-1&&absNewUrl.indexOf("Health")==-1&&absNewUrl.indexOf("Term")==-1&&absNewUrl.indexOf("Critical")==-1&&absNewUrl.indexOf("Child")==-1&&absNewUrl.indexOf("Investment")==-1&&absNewUrl.indexOf("Pension")==-1&&absNewUrl.indexOf("Travel")==-1&&absNewUrl.indexOf("Details")==-1){$rootScope.popredirect(6);}else if(absOldUrl.indexOf("Critical")!=-1&&absNewUrl.indexOf("ProductCar")==-1&&absNewUrl.indexOf("ProductBike")==-1&&absNewUrl.indexOf("Health")==-1&&absNewUrl.indexOf("Term")==-1&&absNewUrl.indexOf("Critical")==-1&&absNewUrl.indexOf("Child")==-1&&absNewUrl.indexOf("Investment")==-1&&absNewUrl.indexOf("Pension")==-1&&absNewUrl.indexOf("Travel")==-1&&absNewUrl.indexOf("Details")==-1){$rootScope.popredirect(7);}else if(absOldUrl.indexOf("Child")!=-1&&absNewUrl.indexOf("ProductCar")==-1&&absNewUrl.indexOf("ProductBike")==-1&&absNewUrl.indexOf("Health")==-1&&absNewUrl.indexOf("Term")==-1&&absNewUrl.indexOf("Critical")==-1&&absNewUrl.indexOf("Child")==-1&&absNewUrl.indexOf("Investment")==-1&&absNewUrl.indexOf("Pension")==-1&&absNewUrl.indexOf("Travel")==-1&&absNewUrl.indexOf("Details")==-1){$rootScope.popredirect(8);}else if(absOldUrl.indexOf("Investment")!=-1&&absNewUrl.indexOf("ProductCar")==-1&&absNewUrl.indexOf("ProductBike")==-1&&absNewUrl.indexOf("Health")==-1&&absNewUrl.indexOf("Term")==-1&&absNewUrl.indexOf("Critical")==-1&&absNewUrl.indexOf("Child")==-1&&absNewUrl.indexOf("Investment")==-1&&absNewUrl.indexOf("Pension")==-1&&absNewUrl.indexOf("Travel")==-1&&absNewUrl.indexOf("Details")==-1){$rootScope.popredirect(9);}else if(absOldUrl.indexOf("Pension")!=-1&&absNewUrl.indexOf("ProductCar")==-1&&absNewUrl.indexOf("ProductBike")==-1&&absNewUrl.indexOf("Health")==-1&&absNewUrl.indexOf("Term")==-1&&absNewUrl.indexOf("Critical")==-1&&absNewUrl.indexOf("Child")==-1&&absNewUrl.indexOf("Investment")==-1&&absNewUrl.indexOf("Pension")==-1&&absNewUrl.indexOf("Travel")==-1&&absNewUrl.indexOf("Details")==-1){$rootScope.popredirect(10);}else if(absOldUrl.indexOf("Travel")!=-1&&absNewUrl.indexOf("ProductCar")==-1&&absNewUrl.indexOf("ProductBike")==-1&&absNewUrl.indexOf("Health")==-1&&absNewUrl.indexOf("Term")==-1&&absNewUrl.indexOf("Critical")==-1&&absNewUrl.indexOf("Child")==-1&&absNewUrl.indexOf("Investment")==-1&&absNewUrl.indexOf("Pension")==-1&&absNewUrl.indexOf("Travel")==-1&&absNewUrl.indexOf("Details")==-1){$rootScope.popredirect(11);}else if(absOldUrl.indexOf("Searches")!=-1&&absNewUrl.indexOf("Searches")==-1){$rootScope.popredirect(12);}else if(absOldUrl.indexOf("OTP")!=-1&&absNewUrl.indexOf("OTP")==-1){$rootScope.popredirect(14);}else if(absOldUrl.indexOf("Details")!=-1&&absNewUrl.indexOf("Details")==-1){$rootScope.popredirect(13);}});});app.controller("IGController",["$scope","$rootScope","$http","CommonService","DataFactory","$location","$timeout","$window","$filter","ValidationFactory","globals","$interval","$q",function($scope,$rootScope,$http,CommonService,DataFactory,$location,$timeout,$window,$filter,ValidationFactory,globals,$interval,$q){var preprodnewepwservices="https://preprodnewepwservices.insurejoy.com/";$scope.UtmSource="";$scope.swapword=true;$scope.swapword1=false;$scope.swapword2=false;var QuotePageURL;$scope.$root.scrollhide="home-bg bodymain";$scope.a1class="lmbutton activebt";$scope.a2class="lmbutton";$scope.chclass=["childbt activebt","childbt ","childbt ","childbt ","childbt "];$scope.flagforbike=false;$scope.leadidbike=0;$scope.HomeloaderShow=true;$scope.flagforcar=false;$scope.leadidcar=0;$scope.VechileLookUpLeadIdBike=0;$scope.VechileLookUpLeadIdCar=0;$scope.utmCompaign="";$scope.utmsourcedata="direct";$scope.utmcampaigndata="direct";$scope.showfastlaneclaimlast=true;$scope.carbreaking=1;$scope.$root.showonproposal=false;$scope.products=[{product:"Car",id:"4"},{product:"Twowheeler",id:"8"},{product:"Health",id:"2"},{product:"Term",id:"3"},{product:"Critical Illness",id:"9"},{product:"Child",id:"7"},{product:"Investment",id:"5"},{product:"Pension",id:"6"}];$scope.appinitializedata=0;$scope.$root.mastercontent=false;$scope.$root.productBox="display-visible";$scope.$root.popupbikepage=false;$scope.$root.sideNavShow=false;$scope.utmTerm="";$scope.utmMedium="";$scope.$root.showloader=true;$scope.date=new Date();$scope.pinCodeVal={};$scope.texttitleindex=0;$scope.showrefferedpop=false;$scope.year=2022;$scope.showadultmess=false;$scope.carregno=true;$scope.showmobileheader=true;$scope.bikeNo={};$scope.showmainform=false;$scope.$root.closepop=false;$scope.$root.backpop=false;$scope.$root.travelsecondpop=false;$scope.$root.showTopHeading=true;$scope.$root.showLogos=true;$scope.$root.CheckForNewQuotes=true;$scope.$root.travelfirstpop=true;$scope.DestinationError=false;$scope.commoncitystate=[];$scope.userActualIncome=[];$scope.carlistdata=[];$scope.citystate=[];$scope.bikecitystate=[];$scope.bikecitystates=[];$scope.HealthSavetime=0;$scope.BikeSavetime=0;$scope.ChildSavetime=0;$scope.InvestmentSavetime=0;$scope.PensionSavetime=0;$scope.CarMakeModeltime=0;$scope.BikeMakeModeltime=0;$scope.BikeRTOtime=0;$scope.CityListtime=0;$scope.CarSavetime=0;$scope.TravelSavetime=0;$scope.TermSavetime=0;$scope.TravelCountryListtime=0;$scope.childincometype="M";$scope.childpayItem="Monthly";$scope.pensionpayItem="Monthly";$scope.isWhatsApp=true;var errorflag=0;var errorflag1=0;if(window.innerWidth>=767){$scope.device="Desktop";}else{$scope.device="Mobile";}
var month=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var d=new Date();d.setDate(d.getDate()-91);var afterDATE=d.getDate();var afterMONTH=month[d.getMonth()];var afterYEAR=d.getFullYear();var beforeexpirydate=new Date();beforeexpirydate.setDate(beforeexpirydate.getDate()-90);var beforeDATE=beforeexpirydate.getDate();var beforeMONTH=month[beforeexpirydate.getMonth()];var beforeYEAR=beforeexpirydate.getFullYear();$scope.bikeexpired=[{value:0,text:"Not Yet Expired"},{value:90,text:"Expired after "+afterDATE+"-"+afterMONTH+"-"+afterYEAR},{value:91,text:"Expired before "+beforeDATE+"-"+beforeMONTH+"-"+beforeYEAR},];$scope.carformfastlane="wow slideInRight";$scope.carformfastlane="wow slideInRight";$scope.investincome=[{value:"M",text:"Monthly"},{value:"Y",text:"Yearly"},];$scope.payItem="Monthly";$scope.carpoppetrol=[{value:"Kit1",text:"Don't have CNG/LPG Kit"},{value:"Kit2",text:"Have Company Fitted"},{value:"Kit3",text:"Have Externally Fitted"},];$scope.carpopcng=[{value:"Kit2",text:"Have Company Fitted"},{value:"Kit3",text:"Have Externally Fitted"},];$scope.carpoplpg=[{value:"Kit2",text:"Have Company Fitted"},{value:"Kit3",text:"Have Externally Fitted"},];$scope.MaritalStatusArray=[{Id:1,Name:"Single"},{Id:2,Name:"Married"},];$scope.UserActivityArray=[{Id:1,Name:"Activity"},{Id:2,Name:"Booking"},];$scope.maleclass="lmbutton activebt";$scope.femaleclass="lmbutton";$scope.nosmokeclass="lmbutton activebt";$scope.smokeclass="lmbutton";$scope.formbikeproduct="Bike";$scope.bikeexpiredpol=0;$scope.carbreakingpol=0;$scope.ppeItem="Not Yet Expired";$scope.ppebikeItem="Not Yet Expired";$scope.chatagentname=["Tabish","Pankaj"];$scope.message="false";$scope.gender="M";$scope.showbikelastclaim=false;$scope.message="false";$scope.showrtofield=true;$scope.maincarpage=true;$scope.nClaim="";$scope.$root.popupcarpage=false;$scope.Year_Of_manufacturer="";$scope.result=[];$scope.result[2015]=0;$scope.result[2014]=20;$scope.result[2013]=25;$scope.result[2012]=35;$scope.result[2011]=45;$scope.result[2010]=50;$scope.message="false";$scope.bodyscroll="";$scope.showrtocity=false;$scope.carlabel=false;$scope.lodgeClaimBtn=true;$scope.citylabel=false;$scope.carNo={};$scope.carNo.carRegNo="";$scope.selectedchild="0";$scope.selectedadult="1";$scope.tab=1;$scope.mainform_animation="to-animate intro-animate-66";$scope.$root.popuptravelpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popupchildpage=false;$scope.$root.popuptermpage=false;$scope.$root.popuphealthpage=false;$scope.$root.popupcarpage=false;$scope.healthfirstpop=true;$scope.bikefirstpop=true;$scope.termfirstpop=true;$scope.childfirstpop=true;$scope.investfirstpop=true;$scope.pensionfirstpop=true;$scope.healthformproname="Health";$scope.formgender="M";$scope.pensionformproname="Pension";$scope.investmentformproname="Investment";$scope.childformproname="Investment";$scope.formtobacco="False";$scope.formmarital="Married";$scope.termproductname="Term";$scope.formpolicyterm=50;$scope.showheader=true;$scope.formproposer="abc@ig.com";$scope.forcarproduct="Car";$scope.carfuelcontainer=false;$scope.formddlkit="Kit0";$scope.formcarbtn="Get Live Quotes";$scope.ncbdisabled=true;$scope.bikemodellist=[];$scope.chatflag="car";$scope.messages=[];$scope.messages[0]={Id:1,msg:"Hi, there! What type of plan you are looking for?"};$scope.DobMessage="Parent's age should be (Min. 18 yrs & Max. 65 yrs)";$scope.showplan=true;$scope.showchat1=false;$scope.clientmsgid=1001;$scope.automsgid=2;$scope.carflag=false;$scope.chatageflag=false;$scope.chatchildageflag=false;$scope.prefilledcarflag=false;$scope.carpopup=false;$scope.carmaindetails=true;$scope.carregnumber="";$scope.bikepopup=false;$scope.bikemaindetails=true;$scope.showQuotesButton=true;$scope.destinationList=[];$scope.bool=false;$scope.comparebuypop=false;$scope.ShowAgeSection=false;$scope.TotalMembers=[];$scope.dataValue=[];$scope.ageError=[];$scope.previousSearchShow=false;$scope.IsBeenHereBefore=false;$scope.DownloadApp=false;$scope.thanksMobilelink=false;$scope.ChildDetails=[];$rootScope.IsNewRequest=[];$scope.IsNewRequestFlag=0;$scope.txtCityStateForTerm=true;$scope.txtCityStateForHealth=true;$scope.ngCarcity=true;$scope.ngBikeRto=true;$scope.ngbiketype=true;$scope.lastclaimlist=[{text:"0 %",value:"Yes~0"},{text:"20 %",value:"No~20"},{text:"25 %",value:"No~25"},{text:"35 %",value:"No~35"},{text:"45 %",value:"No~45"},{text:"50 %",value:"No~50"},];$scope.Quotes_Data=[];$scope.closeSwipe=function(){var myEl=angular.element(document.querySelector("#swipeAnimate"));myEl.removeClass("goswipe");myEl.addClass(" goVanish");$scope.showPrevBar=true;$scope.swipeClassshow=false;};$scope.increaseCounter=function(){if($scope.swapword==true){$scope.swapclass="out fadeOutDownBig";$scope.swapword=false;$scope.swapword2=false;$timeout(function(){$scope.swapword1=true;$scope.swapclass1="in fadeInDownBig";},1000);}else if($scope.swapword1==true){$scope.swapclass1="out fadeOutDownBig";$scope.swapword1=false;$scope.swapword=false;$timeout(function(){$scope.swapword2=true;$scope.swapclass2="in fadeInDownBig";},1000);}else if($scope.swapword2==true){$scope.swapclass2="out fadeOutDownBig";$scope.swapword2=false;$scope.swapword=false;$timeout(function(){$scope.swapword=true;$scope.swapclass="in fadeInDownBig";},1000);}};$interval(function(){$scope.increaseCounter();},5000);$scope.getAllLead=function(text,flag){$scope.beenHereBtnLoader=false;$scope.DownloadAppBtnLoader=false;$scope.getmobileno=true;$scope.thanksMobilelink=false;$scope.$root.getmobilenumber=null;$scope.$root.scrollhide="scrollhides";$scope.$root.scollClassjs="scollClass";if(text=="downloadapp"){$scope.$root.DownloadApp=true;$scope.thanksMobilelink=false;$scope.$root.mobileBlankError=false;$scope.$root.IsBeenHereBefore=false;}else if(text=="getalllead"){$scope.$root.DownloadApp=false;$scope.thanksMobilelink=false;$scope.$root.mobileBlankError=false;$scope.$root.IsBeenHereBefore=true;}};$scope.closeGetmobileno=function(){$scope.getmobileno=false;$scope.$root.scrollhide="home-bg";$scope.$root.scollClassjs="";};$scope.getleadbasedonmobile=function(mobilenumber,MethodName,id){var msgMobile=ValidationFactory.mobilevalidate($scope.$root.getmobilenumber);$scope.beenHereBtnLoader=true;var flag=1;if(msgMobile=="False"){flag=0;$scope.$root.mobileBlankError=true;$scope.beenHereBtnLoader=false;}else{$scope.$root.mobileBlankError=false;$scope.usermobile=parseInt($scope.$root.getmobilenumber);}
$scope.beenhereOTPcheck=true;$scope.bybrowserid=false;if(flag==1){if(id!=1){$scope.showbtnleadloader=true;$scope.$root.scollClassjs="";beenbefore(flag,MethodName);}else{var getOTP=CommonService.NewSendOTPReboot($scope,$scope.$root.getmobilenumber);getOTP.then(function(result){$scope.TokenId=result.data.TokenId;$scope.userOTP0=undefined;$scope.userOTP1=undefined;$scope.userOTP2=undefined;$scope.userOTP3=undefined;$scope.showotpboxbybeenhere=true;$scope.getmobileno=false;$scope.showResend=false;$scope.resendtime=parseInt(result.data.OTPResendTimer);resendTimer();$timeout(function(){$scope.showResend=true;},10000);},function(response){ServiceRespnse(response);});}}};function beenbefore(flag,MethodName){if(flag==1&&MethodName=="getalllead"){$scope.beenHereBtnLoader=true;var otp=$scope.userOTP0+$scope.userOTP1+$scope.userOTP2+$scope.userOTP3;var getalllead=CommonService.getDataByUserVisits(otp,$scope.$root.getmobilenumber,$scope.TokenId);getalllead.then(function(dt){$scope.showsendlink=false;$scope.$root.comparebuypop=false;$scope.alllead=angular.fromJson(dt.data.Visits);$scope.showbtnleadloader=false;if(dt.data.OTPResponse.ErrorCode==0){$scope.wrongotpmsgshow=false;if($scope.alllead.length>0){$scope.showotpboxbybeenhere=false;$scope.mobileBlankError=false;$scope.getmobileno=false;$scope.htmlScroll="scrollhides";$scope.$root.notFoundData=false;$scope.$root.scrollhide="home-bg";if(($scope.getmobileno==false||$scope.$root.beenHerePopUpAnimation=="out fadeOutDownBig")&&$scope.$root.DownloadApp!=true){$scope.$root.beenHerePopUpAnimation="fadeInUp";$scope.$root.scrollhide="scrollhides";$scope.$root.beenHerePopUp=true;$scope.$root.beenHerePop=true;$location.search("Searches");$scope.beenHereBtnLoader=false;}}else if($scope.alllead.length==0){$scope.$root.beenHerePopUpAnimation="fadeInUp";$scope.$root.scrollhide="scrollhides";$scope.showotpboxbybeenhere=false;$scope.$root.beenHerePopUp=true;$scope.$root.beenHerePop=true;$scope.$root.notFoundData=true;$scope.getmobileno=false;$scope.DownloadAppBtnLoader=false;}
for(var i=0;i<$scope.alllead.length;i++){if($scope.alllead[i].createddatetime!=undefined){var datetime=$scope.alllead[i].createddatetime;if($scope.alllead[i].LastVisit!=undefined&&$scope.alllead[i].LastVisit!=null&&$scope.alllead[i].LastVisit!=""){datetime=$scope.alllead[i].LastVisit;}
var date=new Date(parseInt(datetime.substring(6,19))).getMonth()+1+"/"+new Date(parseInt(datetime.substring(6,19))).getDate()+"/"+new Date(parseInt(datetime.substring(6,19))).getFullYear();$scope.alllead[i].day=new Date(date);var time1=new Date(parseInt(datetime.substring(6,19))).getHours();var time2=new Date(parseInt(datetime.substring(6,19))).getMinutes();if(parseInt(time2)<10){time2="0"+parseInt(time2);}
if(parseInt(time1)>12){$scope.alllead[i].time=parseInt(time1)-12+":"+time2+" PM";}else if(parseInt(time1)==12&&parseInt(time2)>0){$scope.alllead[i].time=time1+":"+time2+" PM";}else{$scope.alllead[i].time=time1+":"+time2+" AM";}
if($scope.alllead[i].DOB!=undefined){var date=new Date(parseInt($scope.alllead[i].DOB.substring(6,19))).getMonth()+
1+
"-"+
new Date(parseInt($scope.alllead[i].DOB.substring(6,19))).getDate()+
"-"+
new Date(parseInt($scope.alllead[i].DOB.substring(6,19))).getFullYear();$scope.alllead[i].Age=$scope.getAge(date);}
if($scope.alllead[i].ProductName.toLowerCase()=="car"){$scope.alllead[i].classSource="carico";$scope.UniqueId=$scope.alllead[i].IGQuoteId;}else if($scope.alllead[i].ProductName.toLowerCase()=="two wheeler"){$scope.alllead[i].classSource="twowheelerico";$scope.alllead[i].ProductName="Bike";$scope.UniqueId=$scope.alllead[i].IGQuoteId;}else if($scope.alllead[i].ProductName.toLowerCase()=="health"){$scope.alllead[i].classSource="healthico";}else if($scope.alllead[i].ProductName.toLowerCase()=="term"){$scope.alllead[i].classSource="termico";}else if($scope.alllead[i].ProductName.toLowerCase()=="travel"){$scope.alllead[i].classSource="travelico";}else if($scope.alllead[i].ProductName.toLowerCase()=="child"){$scope.alllead[i].classSource="childico";}else if($scope.alllead[i].ProductName.toLowerCase()=="investment"){$scope.alllead[i].classSource="investmentico";}else if($scope.alllead[i].ProductName.toLowerCase()=="pension"){$scope.alllead[i].classSource="pensionico";}else if($scope.alllead[i].ProductName.toLowerCase()=="critical illness"){$scope.alllead[i].classSource="criticalico";}}}}else{$scope.wrongotpmsgshow=true;}},function(response){ServiceRespnse(response);});}else if(flag==1&&MethodName=="downloadapp"){$scope.DownloadAppBtnLoader=true;var Message="Please download the app from below link ";var getalllead=CommonService.senddownloadapplink($scope.$root.getmobilenumber,Message);getalllead.then(function(dt){$scope.getmobileno=false;$scope.$root.thanksMobilelink=true;$scope.$root.scrollhide="home-bg";},function(response){ServiceRespnse(response);});}}
$scope.sideNavClose=function(){$rootScope.openNav();};$rootScope.openNav=function(){if($scope.$root.sideNavShow==false){$(".sidenav").animate({left:"0px"},200);$(".sideNavFull").fadeIn(100);$scope.$root.sideNavShow=true;$scope.$root.scrollhide="scrollhides";}else if($scope.$root.sideNavShow==true){$(".sidenav").animate({left:"-300px"},200);$(".sideNavFull").fadeOut(100);$scope.$root.sideNavShow=false;$scope.$root.scrollhide="home-bg";}};$rootScope.sessionValue=[];if($scope.$root.comparebuypop==true){$scope.$root.scrollhide="scrollhides";}
$scope.openmaintabform="in fadeInUp";$rootScope.comparebuypopAnimation="";$rootScope.appinitdata=function(){if($scope.appinitializedata==0){$scope.appinitializedata=1;carlist();citylist();bikecitylist();bikealldatalist();AllDestinationlist();$scope.bikepolicyexp();GetLocalStorageData();}};$rootScope.PrevoiusPopUpAnimation="";$scope.previousSearchHit=function(){if($scope.previoussearch!=undefined){$scope.showPrevoiusPop();}else{$scope.showprevloader=true;let resid="d75a805c10f5c9df597eaabcb9ee09fb";var getalllead=CommonService.getDataByMobileNEW(resid);getalllead.then(function(dt){dt.data=[angular.fromJson(dt.data)];$scope.previoussearch=dt.data[0].Visits;$scope.alllead=$scope.previoussearch;for(var i=0;i<$scope.previoussearch.length;i++){$scope.swipeClassshow=true;if($scope.previoussearch[i].createddatetime!=undefined){if($scope.previoussearch[i].LastVisit!=undefined){var date=new Date(parseInt($scope.previoussearch[i].LastVisit.substring(6,19))).getMonth()+
1+
"-"+
new Date(parseInt($scope.previoussearch[i].LastVisit.substring(6,19))).getDate()+
"-"+
new Date(parseInt($scope.previoussearch[i].LastVisit.substring(6,19))).getFullYear();$scope.previoussearch[i].day=new Date(date.split("-")[0]+"/"+date.split("-")[1]+"/"+date.split("-")[2]);}else{var date=new Date(parseInt($scope.previoussearch[i].createddatetime.substring(6,19))).getMonth()+
1+
"-"+
new Date(parseInt($scope.previoussearch[i].createddatetime.substring(6,19))).getDate()+
"-"+
new Date(parseInt($scope.previoussearch[i].createddatetime.substring(6,19))).getFullYear();$scope.previoussearch[i].day=new Date(date.split("-")[0]+"/"+date.split("-")[1]+"/"+date.split("-")[2]);}
if($scope.previoussearch[i].ProductName.toLowerCase()=="car"){$scope.previoussearch[i].classSource="carico";$scope.UniqueId=$scope.previoussearch[i].IGQuoteId;}else if($scope.previoussearch[i].ProductName.toLowerCase()=="two wheeler"){$scope.previoussearch[i].classSource="twowheelerico";$scope.previoussearch[i].ProductName="Bike";$scope.UniqueId=$scope.previoussearch[i].IGQuoteId;}else if($scope.previoussearch[i].ProductName.toLowerCase()=="health"){$scope.previoussearch[i].classSource="healthico";}else if($scope.previoussearch[i].ProductName.toLowerCase()=="term"){$scope.previoussearch[i].classSource="termico";}else if($scope.previoussearch[i].ProductName.toLowerCase()=="travel"){$scope.previoussearch[i].classSource="travelico";}else if($scope.previoussearch[i].ProductName.toLowerCase()=="child"){$scope.previoussearch[i].classSource="childico";}else if($scope.previoussearch[i].ProductName.toLowerCase()=="investment"){$scope.previoussearch[i].classSource="investmentico";}else if($scope.previoussearch[i].ProductName.toLowerCase()=="pension"){$scope.previoussearch[i].classSource="pensionico";}else if($scope.previoussearch[i].ProductName.toLowerCase()=="critical illness"){$scope.previoussearch[i].classSource="criticalico";}}}
$scope.previoussearchshow=true;$scope.showPrevoiusPop();},function(response){ServiceRespnse(response);});}};$scope.showPrevoiusPop=function(){$scope.showprevloader=false;$scope.bybrowserid=true;if($scope.alllead.length>0){$scope.$root.scollClassjs="scollClass";$scope.showotpboxbybeenhere=false;$scope.mobileBlankError=false;$scope.getmobileno=false;$scope.htmlScroll="scrollhides";$scope.$root.notFoundData=false;$scope.$root.scrollhide="home-bg";if(($scope.getmobileno==false||$scope.$root.beenHerePopUpAnimation=="out fadeOutDownBig")&&$scope.$root.DownloadApp!=true){$scope.$root.beenHerePopUpAnimation="fadeInUp";$scope.$root.scrollhide="scrollhides";$scope.$root.beenHerePopUp=true;$scope.$root.beenHerePop=true;$location.search("Searches");$scope.beenHereBtnLoader=false;}}else if($scope.alllead.length==0){$scope.$root.beenHerePopUpAnimation="fadeInUp";$scope.$root.scrollhide="scrollhides";$scope.showotpboxbybeenhere=false;$scope.$root.beenHerePopUp=true;$scope.$root.beenHerePop=true;$scope.$root.notFoundData=true;$scope.getmobileno=false;$scope.DownloadAppBtnLoader=false;}
for(var i=0;i<$scope.alllead.length;i++){if($scope.alllead[i].createddatetime!=undefined){var datetime=$scope.alllead[i].createddatetime;if($scope.alllead[i].LastVisit!=undefined&&$scope.alllead[i].LastVisit!=null&&$scope.alllead[i].LastVisit!=""){datetime=$scope.alllead[i].LastVisit;}
var date=new Date(parseInt(datetime.substring(6,19))).getMonth()+1+"/"+new Date(parseInt(datetime.substring(6,19))).getDate()+"/"+new Date(parseInt(datetime.substring(6,19))).getFullYear();$scope.alllead[i].day=new Date(date);var time1=new Date(parseInt(datetime.substring(6,19))).getHours();var time2=new Date(parseInt(datetime.substring(6,19))).getMinutes();if(parseInt(time2)<10){time2="0"+parseInt(time2);}
if(parseInt(time1)>12){$scope.alllead[i].time=parseInt(time1)-12+":"+time2+" PM";}else if(parseInt(time1)==12&&parseInt(time2)>0){$scope.alllead[i].time=time1+":"+time2+" PM";}else{$scope.alllead[i].time=time1+":"+time2+" AM";}
if($scope.alllead[i].DOB!=undefined){var date=new Date(parseInt($scope.alllead[i].DOB.substring(6,19))).getMonth()+
1+
"-"+
new Date(parseInt($scope.alllead[i].DOB.substring(6,19))).getDate()+
"-"+
new Date(parseInt($scope.alllead[i].DOB.substring(6,19))).getFullYear();$scope.alllead[i].Age=$scope.getAge(date);}
if($scope.alllead[i].ProductName.toLowerCase()=="car"){$scope.alllead[i].classSource="carico";$scope.UniqueId=$scope.alllead[i].IGQuoteId;}else if($scope.alllead[i].ProductName.toLowerCase()=="two wheeler"){$scope.alllead[i].classSource="twowheelerico";$scope.alllead[i].ProductName="Bike";$scope.UniqueId=$scope.alllead[i].IGQuoteId;}else if($scope.alllead[i].ProductName.toLowerCase()=="health"){$scope.alllead[i].classSource="healthico";}else if($scope.alllead[i].ProductName.toLowerCase()=="term"){$scope.alllead[i].classSource="termico";}else if($scope.alllead[i].ProductName.toLowerCase()=="travel"){$scope.alllead[i].classSource="travelico";}else if($scope.alllead[i].ProductName.toLowerCase()=="child"){$scope.alllead[i].classSource="childico";}else if($scope.alllead[i].ProductName.toLowerCase()=="investment"){$scope.alllead[i].classSource="investmentico";}else if($scope.alllead[i].ProductName.toLowerCase()=="pension"){$scope.alllead[i].classSource="pensionico";}else if($scope.alllead[i].ProductName.toLowerCase()=="critical illness"){$scope.alllead[i].classSource="criticalico";}}}};$scope.ncblogic=function(){if($scope.carclaim=="No~50"){if($scope.carbreakingpol!=91){$scope.showcarncb=true;}
var ncbyear=$scope.year-$scope.carreg;if(ncbyear>=6){ncbyear=6;$scope.carrequiredncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];}else{$scope.carrequiredncb=$scope.lastclaimlist[ncbyear].value.split("~")[1];}
$scope.carclaimtext=$scope.lastclaimlist[ncbyear-1].text;$scope.carclaimedncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];}else if($scope.carclaim=="Yes~0"){$scope.carclaimtext=$scope.lastclaimlist[0].text;$scope.carclaimedncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.showcarncb=false;}else if($scope.carclaim=="No~20"){$scope.showcarncb=true;$scope.carclaimtext=$scope.lastclaimlist[0].text;$scope.carclaimedncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[1].value.split("~")[1];}else if($scope.carclaim=="No~25"){$scope.showcarncb=true;$scope.carclaimtext=$scope.lastclaimlist[1].text;$scope.carclaimedncb=$scope.lastclaimlist[1].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[2].value.split("~")[1];}else if($scope.carclaim=="No~35"){$scope.showcarncb=true;$scope.carclaimtext=$scope.lastclaimlist[2].text;$scope.carclaimedncb=$scope.lastclaimlist[2].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[3].value.split("~")[1];}else if($scope.carclaim=="No~45"){$scope.showcarncb=true;$scope.carclaimtext=$scope.lastclaimlist[3].text;$scope.carclaimedncb=$scope.lastclaimlist[3].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[4].value.split("~")[1];}
$scope.forcarwidgetpercent=$scope.carclaim;if($scope.forcarwidgetpercent=="Yes~0"&&$scope.carclaim=="No~50"){$scope.forcarwidgetpercent="No~0";}
if($scope.bikeexpiredpol==91||($scope.carbreakingexp==1&&$scope.carbreaking==0)){$scope.RequiredNCB=0;$scope.ClaimedNCB=0;$scope.ClaimTaken=true;$scope.carclaimedncb=0;}else{$scope.RequiredNCB=$scope.carrequiredncb;$scope.ClaimedNCB=$scope.carclaimedncb;$scope.ClaimTaken=angular.lowercase($scope.carclaim.split("~")[0].trim())=="no"?"false":"true";}};$scope.closePrevoiusPopUp=function(flag){$scope.PrevoiusPopUpAnimation="out fadeOutDownBig";$scope.$root.scrollhide="";if(flag!=1){$location.search("PreviousSearch",null);window.history.back();}};$scope.opencomparebuypop=function(){$scope.IsNewRequestFlag=1;$scope.htmlScroll="scrollhides";$location.search("Products");$scope.$root.showNavbar=false;$rootScope.appinitdata();$scope.$root.scrollhide="scrollhides";$scope.$root.planpop=true;if($rootScope.comparebuypopAnimation=="out fadeOutDownBig"||$rootScope.comparebuypopAnimation==""||$scope.planpopshow=="bounceOut bounceOutLeft"){$scope.$root.comparebuypop=true;$rootScope.comparebuypopAnimation="in fadeInUp";$scope.openmaintabform="in fadeInUp";$scope.$root.productBox="display-visible";$scope.planpopshow="in fadeInUp";}else{$rootScope.comparebuypopAnimation="out fadeOutDownBig";$scope.openmaintabform="out fadeOutDownBig";}};$rootScope.popredirect=function(flag,flag1){if(flag==0){$scope.closePrevoiusPopUp(1);}
if(flag==1){$scope.closecomparebuypop(1);}else if(flag==2){$scope.closelodgeclaimpop(1);}else if(flag==3){$scope.backpop1(flag1);}else if(flag==4){$scope.backpop2(flag1);}else if(flag==5){$scope.backpop3("Health",1);}else if(flag==6){$scope.backpop3("Term",1);}else if(flag==7){$scope.backpop3("Critical",1);}else if(flag==8){$scope.backpop3("Child",1);}else if(flag==9){$scope.backpop3("Investment",1);}else if(flag==10){$scope.backpop3("Pension",1);}else if(flag==11){$scope.backpop4(1);}else if(flag==12){$scope.closebeenHerePop(1);}else if(flag==13){$scope.closemblpop(1,-1);}else if(flag==14){if($scope.showotpboxflag!=1){$scope.otpBack(1);$scope.showotpboxflag=0;}else{$scope.showotpboxflag=0;}}};$scope.closecomparebuypop=function(flag){$rootScope.comparebuypopAnimation="out fadeOutDownBig";$scope.openmaintabform="out fadeOutDownBig";$rootScope.productpop="display-none";$scope.travelpopSecond="display-none";$scope.$root.productBox="display-none";$scope.$root.scrollhide="";$scope.$root.scollClassjs="";$scope.$root.showNavbar=true;$scope.$root.popupbikepage=false;$scope.$root.popuphealthpage=false;$scope.$root.popuprenewalpage=false;$scope.$root.popupcovidpage=false;$scope.$root.popuptermpage=false;$scope.$root.popupcarpage=false;$scope.$root.popupchildpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.travelfirstpop=false;$scope.$root.travelsecondpop=false;if(flag!=1){$rootScope.closedirect=1;$location.search("Products",null);window.history.back();}
$scope.$root.comparebuypop=false;$scope.htmlScroll="";$scope.flagforbike=false;$scope.leadidbike=0;$scope.flagforcar=false;$scope.leadidcar=0;};$scope.clearlodgeaclaim=function(){$scope.productType=null;$scope.insuranceCompany=null;$scope.searchText101=null;$scope.claimPolicyNo=null;$scope.userName=null;$scope.userEmail=null;$scope.userNumber=null;$scope.description=null;$scope.disabled=false;$scope.successmsg=false;$scope.lodgeclaimpopaftersubmit=false;$scope.successmsg1=false;$scope.emergencycontact=false;$scope.error=false;$scope.producterror=false;$scope.insuranceCompanyerror=false;$scope.policyerror=false;$scope.nameerror=false;$scope.emailerror=false;$scope.numbererror=false;$scope.descriptionerror=false;};$scope.lodgeclaimAnimation="";$scope.lodgeclaimAnimation1="";$scope.openlodgeclaimpop=function(){$scope.$root.scrollhide="scrollhides";$location.search("Claim");$scope.htmlScroll="scrollhides";$scope.lodgeclaimpop=true;$scope.lodgeclaimpopaftersubmit=false;$scope.products=[{product:"Car",id:"4"},{product:"Twowheeler",id:"8"},{product:"Health",id:"2"},{product:"Term",id:"3"},{product:"Critical Illness",id:"9"},{product:"Child",id:"7"},{product:"Investment",id:"5"},{product:"Pension",id:"6"}];$scope.clearlodgeaclaim();if($scope.lodgeclaimAnimation=="out fadeOutDownBig"||$scope.lodgeclaimAnimation==""){$scope.lodgeclaimpop=true;$scope.lodgeclaimAnimation="fadeInUp";$scope.lodgeClaimInnerAnimation="fadeInUp";$scope.LodgeClaimText="fadeInUp";}};$scope.getinsurer=function(product){var data={"ProductId":product};$scope.insuranceCompanies=[];$scope.insuranceCompany="";$scope.claimInsurer="";$scope.insuranceCompaniesData=CommonService.insurancecompaniesbyproduct(data);$scope.insuranceCompaniesData.then(function(result){result.data=angular.fromJson(result.data);let insurer=result.data;for(let i=0;i<insurer.length;i++){insurer[i].Insurer_Name=insurer[i].InsurerName;insurer[i].Insurer_ID=insurer[i].InsurerId;$scope.insuranceCompanies.push(insurer[i]);}},function(response){ServiceRespnse(response);});};$scope.closelodgeclaimpop=function(flag){if($scope.lodgeaclaimHistoryback!=true){$scope.lodgeclaimpopaftersubmit=false;$scope.lodgeclaimpopaftersubmituser=false;$scope.lodgeclaimpop=false;$scope.lodgeclaimAnimation="out fadeOutDownBig";$scope.lodgeclaimAnimation1="out fadeOutDownBig";}else{$scope.lodgeclaimpopaftersubmituser=false;}
$scope.clearlodgeaclaim();$scope.$root.scrollhide="";$scope.htmlScroll="";if(flag!=1){$rootScope.closedirect=1;$location.search("Claim",null);if($scope.lodgeaclaimHistoryback!=true){window.history.back();}}};$scope.SetMaxTravelEndDate=function(){if($scope.travelStartDate){$scope.travelEndDate=undefined;$scope.datedifferror=false;var date3=new Date($scope.travelStartDate);let date2=new Date($scope.travelStartDate);date3.setDate(date3.getDate()+1);let minenddatetravel=date3.getMonth()+1+"/"+date3.getDate()+"/"+date3.getFullYear();var maxdate=new Date(minenddatetravel);maxdate.setDate(maxdate.getDate()+180);$scope.maxenddatetravel=maxdate.getFullYear()+"-"+((maxdate.getMonth()+1)<=9?"0"+(maxdate.getMonth()+1):(maxdate.getMonth()+1))+"-"+(maxdate.getDate()<=9?"0"+maxdate.getDate():maxdate.getDate());$scope.minenddate=date2.getFullYear()+"-"+((date2.getMonth()+1)<=9?"0"+(date2.getMonth()+1):(date2.getMonth()+1))+"-"+(date2.getDate()<=9?"0"+date2.getDate():date2.getDate());if($scope.travelStartDate){$scope.startdateError=false;$scope.isOpenEndDate=false;$scope.dtdisable="";}}};function settraveldatestring(){if($scope.travelstartdatestring){$scope.travelEndDate="";$scope.datedifferror=false;$scope.isOpenEndDate=true;$scope.dtdisable="dt-desabled";var date3=new Date($scope.travelstartdatestring);let date2=new Date($scope.travelstartdatestring);date3.setDate(date3.getDate()+1);let minenddatetravel=date3.getMonth()+1+"/"+date3.getDate()+"/"+date3.getFullYear();var maxdate=new Date(minenddatetravel);maxdate.setDate(maxdate.getDate()+180);$scope.maxenddatetravel=maxdate.getFullYear()+"-"+((maxdate.getMonth()+1)<=9?"0"+(maxdate.getMonth()+1):(maxdate.getMonth()+1))+"-"+(maxdate.getDate()<=9?"0"+maxdate.getDate():maxdate.getDate());$scope.minenddate=date2.getFullYear()+"-"+((date2.getMonth()+1)<=9?"0"+(date2.getMonth()+1):(date2.getMonth()+1))+"-"+(date2.getDate()<=9?"0"+date2.getDate():date2.getDate());}};$scope.geticon=function(flag){if(flag==1){if($scope.mobileicontab[0].id>1){$scope.mobileicontab.splice(3,1);$scope.mobileicontab.splice(0,0,$scope.mobileicontab1[$scope.mobileicontab[0].id-2]);}}else{if($scope.mobileicontab[3].id<7){$scope.mobileicontab.splice(0,1);$scope.mobileicontab.push($scope.mobileicontab1[$scope.mobileicontab[2].id]);}}};$scope.makeauto=function(){$scope.popupautocomplete=true;};$scope.hidescroll=function(){$scope.$root.scrollhide="scrollhides";};$scope.showscroll=function(){$scope.$root.scrollhide="";};$scope.getcarcityauto=function(item){$scope.selectedItem=item;$scope.popupautocomplete=false;};$scope.testdate=function(flag,diff,ids){var check=0;if($scope.IGdate==undefined&&flag==1){$scope.dateerror=true;check=1;}else if($scope.IGmonth==undefined&&flag==2){$scope.dateerror=true;check=1;}else if($scope.IGyear==undefined&&flag==3){$scope.dateerror=true;check=1;}else{$scope.dateerror=false;$scope.testdatespecific(flag,$scope.IGdate,$scope.IGmonth,$scope.IGyear);}
if($scope.dateerror==true){$scope.datespecificmsg="";}
$scope.datespecificmsgparent=$scope.datespecificmsg;if($scope.datespecificmsg==""){if($scope.IGdate!=undefined&&$scope.IGmonth!=undefined&&$scope.IGyear!=undefined){var d=new Date();var n=d.getFullYear();var m=d.getMonth();var yy=$scope.IGmonth+"-"+$scope.IGdate+"-"+$scope.IGyear;if(diff==1){$scope.age=$scope.getAge(yy);}
if(isNaN($scope.age)==true||isNaN(parseInt($scope.IGmonth))==true||isNaN(parseInt($scope.IGdate))==true||isNaN(parseInt($scope.IGyear))==true){check=1;$scope.age=undefined;}
if($scope.age<18){$scope.dateerror=true;check=1;}else if($scope.$root.popuptermpage==true&&$scope.age>=66){$scope.dateerror=true;check=1;}
if(ValidationFactory.onlynumber($scope.IGmonth)=="False"||ValidationFactory.onlynumber($scope.IGdate)=="False"||ValidationFactory.onlynumber($scope.IGyear)=="False"){$scope.dateerror=true;check=1;}else if($scope.age>65&&$scope.product!="Health"&&$scope.product!="Pension"){$scope.dateerror=true;check=1;}else if($scope.age>100&&$scope.product=="Health"){$scope.dateerror=true;check=1;}else if($scope.age>60&&$scope.product=="Pension"){$scope.dateerror=true;check=1;}
if($scope.IGyear%4!=0&&$scope.IGyear%100!=0&&($scope.IGmonth==2||$scope.IGmonth==02)&&$scope.IGdate>28){$scope.dateerror=true;check=1;}else if($scope.IGyear%400!=0&&$scope.IGyear%100==0&&($scope.IGmonth==2||$scope.IGmonth==02)&&$scope.IGdate>28){$scope.dateerror=true;check=1;}
if($scope.IGmonth>12||$scope.IGmonth<=0){$scope.dateerror=true;check=1;}else if(($scope.IGmonth==2||$scope.IGmonth==02)&&$scope.IGdate>29){$scope.dateerror=true;check=1;}else if(($scope.IGmonth==4||$scope.IGmonth==6||$scope.IGmonth==9||$scope.IGmonth==11)&&$scope.IGdate>30){$scope.dateerror=true;check=1;}
if($scope.IGdate>31||$scope.IGdate<=0||$scope.IGyear.length<4){$scope.dateerror=true;check=1;}}
if($scope.product=="Child"){if($scope.age<18||$scope.age>65){$scope.DobMessage="Parent's age should be (Min. 18 yrs & Max. 65 yrs)";$scope.dateerror=true;}}
if(check==1){$scope.formdob=undefined;$scope.dateerror=true;$scope.chatageflag=false;}
if(check==0&&$scope.IGdate!=undefined&&$scope.IGmonth!=undefined&&$scope.IGyear!=undefined){if($scope.IGyear.length<4){$scope.dateerror=true;check==1;}else{$scope.dateerror=false;$scope.chatageflag=true;$scope.agemonth=$scope.getmonth(yy);console.log($scope.agemonth);$scope.formdob=$scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear;}}
$scope.checkdate=check;}};$scope.childtestdate=function(flag,diff,ids){var childcheck=0;$scope.datechilderror=false;if($scope.IGchilddate==undefined&&flag==1){$scope.datechilderror=true;childcheck=1;}else if($scope.IGchildmonth==undefined&&flag==2){$scope.datechilderror=true;childcheck=1;}else if($scope.IGchildyear==undefined&&flag==3){$scope.datechilderror=true;childcheck=1;}else{$scope.datechilderror=false;$scope.testdatespecific(flag,$scope.IGchilddate,$scope.IGchildmonth,$scope.IGchildyear);$scope.datespecificmsgchild=$scope.datespecificmsg;}
if($scope.datechilderror==true){$scope.datespecificmsg="";$scope.datespecificmsgchild="";}
if($scope.datespecificmsg==""){if($scope.IGchildmonth!=undefined&&$scope.IGchilddate!=undefined&&$scope.IGchildyear!=undefined&&$scope.IGchildmonth!=""&&$scope.IGchilddate!=""&&$scope.IGchildyear!=""){var d=new Date();var n=d.getFullYear();var m=d.getMonth();var yy=$scope.IGchildmonth+"-"+$scope.IGchilddate+"-"+$scope.IGchildyear;$scope.child_age=$scope.getAge(yy);if(isNaN($scope.child_age)==true||isNaN(parseInt($scope.IGchildmonth))==true||isNaN(parseInt($scope.IGchilddate))==true||isNaN(parseInt($scope.IGchildyear))==true){childcheck=1;$scope.child_age=undefined;}
if($scope.child_age>=18){$scope.datechilderror=true;childcheck=1;}
if(isNaN($scope.datechilderror)==true){check=1;}
if(ValidationFactory.onlynumber($scope.IGchildmonth)=="False"||ValidationFactory.onlynumber($scope.IGchilddate)=="False"||ValidationFactory.onlynumber($scope.IGchildyear)=="False"){$scope.datechilderror=true;childcheck=1;}else if($scope.child_age<0){$scope.datechilderror=true;childcheck=1;}else if($scope.IGchildyear%4!=0&&$scope.IGchildyear%100!=0&&($scope.IGchildmonth==2||$scope.IGchildmonth==02)&&$scope.IGchilddate>28){$scope.datechilderror=true;childcheck=1;}else if($scope.IGchildyear%400!=0&&$scope.IGchildyear%100==0&&($scope.IGchildmonth==2||$scope.IGchildmonth==02)&&$scope.IGchilddate>28){$scope.datechilderror=true;childcheck=1;}
if($scope.IGchildmonth>12||$scope.IGchildmonth<=0){$scope.datechilderror=true;childcheck=1;}else if(($scope.IGchildmonth==2||$scope.IGchildmonth==02)&&$scope.IGchilddate>29){$scope.datechilderror=true;childcheck=1;}else if(($scope.IGchildmonth==4||$scope.IGchildmonth==6||$scope.IGchildmonth==9||$scope.IGchildmonth==11)&&$scope.IGchilddate>30){$scope.datechilderror=true;childcheck=1;}
if($scope.IGchilddate>31||$scope.IGchilddate<=0){$scope.datechilderror=true;childcheck=1;}}
if(childcheck==1){$scope.datechilderror=true;$scope.formchilddob=undefined;$scope.chatchildageflag=false;}
if(childcheck==0&&$scope.IGchilddate!=undefined&&$scope.IGchildmonth!=undefined&&$scope.IGchildyear!=undefined){$scope.datechilderror=false;$scope.chatchildageflag=true;$scope.formchilddob=$scope.IGchilddate+"-"+$scope.IGchildmonth+"-"+$scope.IGchildyear;}
$scope.checkchilddate=childcheck;}};$scope.getAge=function(dateString){var today=new Date();var tempage=dateString.split("-");var birthDate=new Date(parseInt(tempage[2]),parseInt(tempage[0])-1,parseInt(tempage[1]));var age=today.getFullYear()-birthDate.getFullYear();var m=today.getMonth()-birthDate.getMonth();if(m<0||(m===0&&today.getDate()<birthDate.getDate())){age--;}
return age;};$scope.getmonth=function(dateString){if(dateString!=undefined){var tempage=dateString.split("-");var past_date=new Date(tempage[2],tempage[1],tempage[0]);var current_date=new Date();var difference=current_date.getFullYear()*12+current_date.getMonth()-(past_date.getFullYear()*12+past_date.getMonth());return difference;}};$scope.checkincomeerror=function(flag){if(flag=="pension"){if($scope.payMode==undefined||$scope.payMode==""||$scope.payMode==null){flag=1;}else{$scope.incomeerror=false;$scope.forminvestamtvalue=$scope.payMode;$scope.formsuminsured=$scope.payMode;}}else if(flag=="child"){if($scope.childincometype==undefined||$scope.childincometype==""||$scope.childincometype==null){$scope.incomeerror=true;}else{$scope.incomeerror=false;}}else{if($scope.selectedincome==undefined||$scope.selectedincome==""||$scope.selectedincome==null){flag=1;$scope.incomeerror=true;}else{$scope.incomeerror=false;$scope.forminvestamtvalue=$scope.selectedincome;$scope.formsuminsured=$scope.selectedincome;}}};$scope.checkforincomeerror=function(flag){if($scope.selectedincome==undefined){flag=1;}else{$scope.incomeerror=false;var incomearray=$scope.selectedincome.split(",");$scope.formsuminsured=incomearray[1].toString();$scope.txtSumAssuredRange=incomearray[0].toString();}};$scope.formatReg=function(event,registrationNo,flag){if(event.keyCode!=8){var regNo=registrationNo;if(flag==1){$scope.carregnumber=regNo;$scope.carregnumber=$scope.carregnumber.toUpperCase();}else{$scope.bikeregnumber=regNo;$scope.bikeregnumber=$scope.bikeregnumber.toUpperCase();}}};$scope.closemblpop=function(item,flag){if(item==1){$scope.showcitypop=false;$scope.carmakemblpop=false;$scope.citymblpop=false;$scope.carrtomblpop=false;$scope.bikemakemblpop=false;$scope.bikertomblpop=false;$scope.ShowCarRegistrationyear=false;$scope.Showcarbreak=false;$scope.Showlastclaim=false;$scope.ShowCarCNGKit=false;$scope.ShowBikeRegistrationyear=false;$scope.Showbikepolexp=false;if(flag!=-1){$location.search("Details",null);window.history.back();}}
if(flag==1){if(item==2){$scope.showcitypop=true;$scope.citymblpop=true;$scope.myInputFocus=true;$scope.termannualmblpop=false;$location.search("Details");}else{$scope.showcitypop=false;$scope.citymblpop=false;$scope.selectedItem2=item;$scope.selectedcitynampop=item.cityname;}}
if(flag==2){if(item==2){$scope.showcitypop=true;$scope.carmakemblpop=true;$scope.myInputFocusCarMake=true;$location.search("Details");}else{$scope.showcitypop=true;$scope.carmakemblpop=false;$scope.carrtomblpop=true;$scope.selectedItem=item;$scope.selectedcarmakepop=item.ModelName;$scope.checkcarerror();}}
if(flag==3){if(item==2){$scope.showcitypop=true;$scope.carrtomblpop=true;$scope.myInputFocusCarRto=true;$location.search("Details");}else{$scope.showcitypop=true;$scope.carrtomblpop=false;$scope.ShowCarRegistrationyear=true;$scope.selectedItem1=item;$scope.selectedcarrtopop=item.RTOCode;if($scope.newcarshow==false){$scope.showcitypop=false;$scope.citymblpop=false;$scope.carrtomblpop=false;$scope.ShowCarRegistrationyear=false;if($scope.$root.carfuelcontainer==true||$scope.carfuelcontainer==true){$scope.showcitypop=true;$scope.ShowCarCNGKit=true;}}}}
if(flag==4){if(item==2){$scope.showcitypop=true;$scope.bikemakemblpop=true;$scope.myInputFocusBikeMake=true;$location.search("Details");}else{$scope.bikemakemblpop=false;$scope.bikertomblpop=true;$scope.selectedbikemmv=item;$scope.selectedbikemakepop=item.bikename;$scope.checkbikelisterror();}}
if(flag==5){if(item==2){$scope.showcitypop=true;$scope.bikertomblpop=true;$scope.myInputFocusBikeRto=true;$location.search("Details");}else{$scope.showcitypop=true;$scope.bikertomblpop=false;$scope.ShowBikeRegistrationyear=true;$scope.selectedbikerto=item;$scope.selectedbikertopop=item.cityname;$scope.checkbikertoerror();if($scope.newcarshow==false){$scope.showcitypop=false;$scope.bikemakemblpop=false;$scope.bikertomblpop=false;$scope.ShowBikeRegistrationyear=false;}}}
if(flag==6){if(item==2){$scope.showcitypop=true;$scope.termannualmblpop=true;$scope.myInputFocusTermIncome=true;$location.search("Details");DataFactory.userActualIncome($scope);}else{$scope.showcitypop=false;$scope.termannualmblpop=false;$scope.txtActualIncome=item;$scope.selectedtermincomepop=item.text;}}
if(flag==7){if(item==2){$scope.showcitypop=true;$scope.traveldestination=true;$scope.myInputFocustravellingdest=true;$scope.termannualmblpop=false;$location.search("Details");}else{$scope.showcitypop=false;$scope.traveldestination=false;$scope.searchText07=undefined;destinationList(item);}}
if(flag==8){if(item==2){$scope.showcitypop=true;$scope.ShowCarRegistrationyear=true;$scope.myInputFocusRegistrationyear=true;$location.search("Details");}else{$scope.showcitypop=true;$scope.ShowCarRegistrationyear=false;$scope.selectedcarregyr=item.text;$scope.carreg=item.value;$scope.PopulateClaimddl();$scope.carregyear();$scope.Showcarbreak=true;}}
if(flag==9){if(item==2){$scope.showcitypop=true;$scope.Showlastclaim=true;$scope.myInputFocuslastclaim=true;$location.search("Details");}else{$scope.showcitypop=false;$scope.Showlastclaim=false;if($scope.$root.carfuelcontainer==true||$scope.carfuelcontainer==true){$scope.showcitypop=true;$scope.ShowCarCNGKit=true;}
$scope.carclaimtext1=item.text;$scope.carclaim=item.value;$scope.carclaimchange();}}
if(flag==10){if(item==2){$scope.showcitypop=true;$scope.ShowCarCNGKit=true;$scope.myInputFocusCNGKit=true;$location.search("Details");}else{$scope.showcitypop=false;$scope.ShowCarCNGKit=false;$scope.carkitstatusText=item.text;$scope.carkitstatus=item.value;$scope.carkitchange();}}
if(flag==12){if(item==2){$scope.showcitypop=true;$scope.ShowBikeRegistrationyear=true;$scope.myInputFocusbikeyear=true;$location.search("Details");}else{$scope.showcitypop=true;$scope.ShowBikeRegistrationyear=false;$scope.Showbikepolexp=true;$scope.selectedbikeregyr=item.text;$scope.bikereg=item.value;$scope.bikeregyear();}}
if(flag==13){if(item==2){$scope.showcitypop=true;$scope.Showbikepolexp=true;$scope.myInputFocusbikepolexp=true;$location.search("Details");}else{$scope.showcitypop=false;$scope.Showbikepolexp=false;$scope.bikepolexp=item.text;$scope.bikeexpiredpol=item.value;$scope.bikepolicyexp();if($scope.showbikelastclaim==true){}}}
if(flag==14){if(item==2){$scope.showcitypop=true;$scope.Showbikeclaim=true;$scope.myInputFocusbikeclaim=true;$location.search("Details");}else{$scope.showcitypop=false;$scope.Showbikeclaim=false;$scope.bikelastclaimtaken=item.text;$scope.bikelastclaim=item.value;$scope.bikelastclaimfn();}}
if(flag==11){if(item==2){$scope.showcitypop=true;$scope.Showcarbreak=true;$scope.myInputFocuscarbreak=true;$location.search("Details");}else{$scope.showcitypop=true;$scope.Showcarbreak=false;$scope.carbreak=item.text;if(item.value==0){$scope.carbreaking=1;$scope.carbreakingpol=0;$scope.checkcarbreaking(3);$scope.Showlastclaim=true;}else{$scope.carbreaking=0;if(item.value==90){$scope.carbreakingexp=0;$scope.carbreakingpol=90;$scope.checkcarbreaking(4);$scope.Showlastclaim=true;}else if(item.value==91){$scope.carbreakingexp=1;$scope.carbreakingpol=91;$scope.checkcarbreaking(4);if($scope.$root.carfuelcontainer==true||$scope.carfuelcontainer==true){$scope.showcitypop=true;$scope.ShowCarCNGKit=true;}}}}}};$scope.$watch("online",function(){if(!$rootScope.online){}});$scope.validate=function(){if($scope.carregnumber!=undefined)$scope.carregnumber=$scope.carregnumber.replace(/\s/g,"");var patt1=/^[A-Z]{1}[0-9A-Za-z]{4,12}[0-9]{1}$/;if($scope.carregnumber!=undefined&&$scope.carregnumber!=""){var bool=patt1.test($scope.carregnumber.replace(/-/g,"").toUpperCase());}else{bool=false;}
if($scope.carregnumber!=undefined&&bool==true&&$scope.carregnumber.length>4){$scope.patternFails=false;var temp=$scope.carregnumber.split("-");$scope.carNo.registrationNo=temp[0];for(i=1;i<temp.length;i++){$scope.carNo.registrationNo+=temp[i];}
$scope.patterntrueclass="";}else{$scope.patternFails=true;$scope.patterntrueclass="inputactive";$scope.regnoerrortext="Enter correct car registration no.";}};$scope.bikevalidate=function(){if($scope.bikeregnumber!=undefined)$scope.bikeregnumber=$scope.bikeregnumber.replace(/\s/g,"");if($scope.bikeregnumber!=undefined&&$scope.bikeregnumber!=""){var patt=/^[A-Z]{2}[0-9]{1,2}[A-Z]{1,3}[0-9]{4}$/;var patt1=/^[A-Z]{1}[0-9A-Za-z]{4,12}[0-9]{1}$/;var bool=patt1.test($scope.bikeregnumber.replace(/-/g,"").toUpperCase());if(bool==false||$scope.bikeregnumber.length<5){$scope.patternFails1=true;$scope.regnoerrortext="Enter correct bike registration no.";}else{$scope.patternFails1=false;var temp=$scope.bikeregnumber.split("-");$scope.bikeNo.registrationNo=temp[0];for(i=1;i<temp.length;i++){$scope.bikeNo.registrationNo+=temp[i];}
$scope.CallWEBAPIServicebike(false);}}else{$scope.patternFails1=true;$scope.regnoerrortext="Enter correct bike registration no.";}};$scope.changeInvestValue=function(flag){if(flag=="child"){if($scope.childincometype=="Y"){var x=$scope.childincome*12;$scope.childincome=Math.ceil(x/1000.0)*1000;if($scope.childincome>=5000&&$scope.childincome<=5000000){$scope.annualerror=false;$scope.paymenterror=false;}else{$scope.annualerror=false;$scope.paymenterror=true;}}else if($scope.childincometype=="M"){var x=$scope.childincome/12;$scope.childincome=Math.floor(x/100.0)*100;if($scope.childincome>=500&&$scope.childincome<=416666){$scope.annualerror=false;$scope.paymenterror=false;}else{$scope.annualerror=false;$scope.paymenterror=true;}}}else{if($scope.selectedincome=="Y"){var x=$scope.txtInvestIncome*12;$scope.txtInvestIncome=Math.ceil(x/1000.0)*1000;if($scope.txtInvestIncome>=5000&&$scope.txtInvestIncome<=5000000){$scope.annualerror=false;$scope.paymenterror=false;}else{$scope.annualerror=false;$scope.paymenterror=true;}}else if($scope.selectedincome=="M"){var x=$scope.txtInvestIncome/12;$scope.txtInvestIncome=Math.floor(x/100.0)*100;if($scope.txtInvestIncome>=500&&$scope.txtInvestIncome<=416666){$scope.annualerror=false;$scope.paymenterror=false;}else{$scope.annualerror=false;$scope.paymenterror=true;}}}};$scope.changeInvestValue1=function(){if($scope.payMode=="Y"){var x=$scope.txtPensionIncome*12;$scope.txtPensionIncome=Math.ceil(x/1000.0)*1000;}else if($scope.payMode=="M"){var x=$scope.txtPensionIncome/12;$scope.txtPensionIncome=Math.floor(x/100.0)*100;}};$scope.CallWEBAPIServicebike=function(apiFlag){var defer=$q.defer();var temp={RegistrationNumber:$scope.bikeregnumber,ProductId:8,utmCompaign:$scope.utmcampaigndata,utmSource:$scope.utmsourcedata,utmMedium:$scope.utmmediumdata,utmTerm:$scope.utmtermdata,IsMakeModelChanged:$scope.flagforbike,LeadId:$scope.leadidbike,};var timeoutvar=0;var time="2000";var urlservice=globals.IGwServiceURL+"/VehicleLookupService.svc/web/GetVehicleLookupWithlead";var ServiceName="VehicleLookupService";$timeout(function(){if(timeoutvar==0){$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[1].product);timeoutvar=2;}else{timeoutvar=0;}},2000);var data=CommonService.fastlane1(temp,$scope);data.then(function(result){defer.resolve(result);if(timeoutvar==2){var timeoutvar=new Date().getTime();var dvar=timeoutvar-$scope.timeoutarray["fastlane"];$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[1].product,dvar);}
timeoutvar=1;if(result.data=="Registration no. belongs to a CAR"){$scope.patternFails1=true;$scope.regnoerrortext=result.data;}else{result.data=angular.fromJson(result.data);$scope.fastlanebikeresultlength=result.data.length;$scope.fastlaneflag1=true;if(result.data.length==0){errorflag=1;errorflag1=1;$scope.selectedbikemmv=null;$scope.searchText101=undefined;$scope.bikenoresult=true;$scope.selectedbikerto=null;$scope.searchText10=undefined;$scope.selectedbikemakepop=undefined;$scope.selectedbikertopop=undefined;$scope.bikereg=undefined;localStorage.searchText10=null;localStorage.selectedbikemakepop==null;localStorage.selectedbikertopop==null;localStorage.searchText101==null;localStorage.selectedbikemmv==null;$scope.flagforbike=false;$scope.leadidbike=0;}else if(result.data.length&&result.data[0].MakeModel==undefined){$scope.formlblregno=$scope.bikeregnumber.toUpperCase();if(result.data[0].LeadId!=0)$scope.VechileLookUpLeadIdBike=result.data[0].LeadId;$scope.flagforbike=true;$scope.leadidbike=$scope.VechileLookUpLeadIdBike;errorflag=1;errorflag1=1;$scope.selectedbikemmv=null;$scope.searchText101=undefined;$scope.bikenoresult=true;$scope.selectedbikerto=null;$scope.searchText10=undefined;$scope.selectedbikemakepop=undefined;$scope.selectedbikertopop=undefined;$scope.bikereg=undefined;localStorage.searchText10=null;localStorage.selectedbikemakepop==null;localStorage.selectedbikertopop==null;localStorage.searchText101==null;localStorage.selectedbikemmv==null;$scope.bikeModelItem="";$scope.regItem="";$scope.bikeRtoItem="";}else{$scope.bikenoresult=false;$scope.patternFails1=false;$scope.fastlaneresultbike=result.data[0];$scope.fastlanedata=result.data[0];if(result.data[0].LeadId!=0)$scope.VechileLookUpLeadIdBike=result.data[0].LeadId;$scope.flagforbike=true;$scope.leadidbike=$scope.VechileLookUpLeadIdBike;if($scope.fastlaneresultbike.RegistrationDate!=undefined){var dateObj=new Date($scope.fastlaneresultbike.RegistrationDate);var month=dateObj.getMonth()+1;var day=dateObj.getDate();var year=dateObj.getFullYear();var date=day+"-"+month+"-"+year;$scope.Registrationdate=JSON.parse(CommonService.stringifyWcf(date,1));}
$scope.carflag=true;if($scope.fastlaneresultbike.MakeModel!=undefined)var Fuel_Type=$scope.fastlaneresultbike.MakeModel.split(",")[1];if($scope.fastlaneresultbike.MakeModel!=undefined)var CC=$scope.fastlaneresultbike.MakeModel.split(",")[3];var Year_Of_manufacturer=$scope.fastlaneresultbike.ManufactureYear;if($scope.fastlaneresultbike.MakeModel!=undefined)var Seating_Capacity=$scope.fastlaneresultbike.MakeModel.split(",")[2];if($scope.fastlaneresultbike.MakeModel!=undefined)var series=$scope.fastlaneresultbike.MakeModel;var ChasisNo=$scope.fastlaneresultbike.ChassisNumber;var EngineNo=$scope.fastlaneresultbike.EngineNumber;var Reg_no=$scope.fastlaneresultbike.RegistrationNumber;var regyeartemp=$scope.regyear1;$scope.bikeengineno=EngineNo;$scope.bikechasisno=ChasisNo;$scope.bikeregnofastlane="";for(i=4;i<Reg_no.length;i++){$scope.bikeregnofastlane=$scope.bikeregnofastlane+Reg_no[i];}
console.log($scope.bikeregnofastlane);var makeid=0,modelid=0;if($scope.fastlaneresultbike.MakeModelIds!=undefined){makeid=$scope.fastlaneresultbike.MakeModelIds.split(",")[0];modelid=$scope.fastlaneresultbike.MakeModelIds.split(",")[1];}
$scope.selectedbikemmv={bikename:series,makeid:makeid,modelid:modelid};$scope.checkbikelisterror();$scope.bikereg=Year_Of_manufacturer;$scope.selectedbikeregyr=Year_Of_manufacturer;$scope.selectedbikemakepop=series;$scope.bikeModelItem=series;$scope.selectedbikeregyr=Year_Of_manufacturer;$scope.regItem=Year_Of_manufacturer;$scope.bikechasisno=ChasisNo;$scope.bikeengineno=EngineNo;$scope.txtbiketype=$scope.selectedbikemmv.bikename;var rtocodeforapi=$scope.fastlaneresultbike.RTOCode;$scope.updatedbikerto=CommonService.bikertoservice("",result.data[0].RTOCode,$scope);$scope.updatedbikerto.then(function(result){result.data=angular.fromJson(result.data);$scope.selectedbikerto={cityid:result.data[0].CityId,stateid:result.data[0].StateId,RTOCode:result.data[0].RTOCode,cityname:result.data[0].RTOCity};$scope.bikeRtoItem=$scope.selectedbikerto.cityname;$scope.checkbikertoerror();$scope.bikeregyear();$scope.bikepolicyexp();$scope.txtbikerto=$scope.selectedbikerto.cityname;console.log("car");console.log(result);},function(response){ServiceRespnse(response);});}
if($scope.fastlaneflag==true){$scope.getformbikequotespop();}}},function(response){ServiceRespnse(response);});return defer.promise;};$scope.CallWEBAPIService=function(){var defer=$q.defer();var temp={RegistrationNumber:$scope.carregnumber,ProductId:4,utmCompaign:$scope.utmcampaigndata,utmSource:$scope.utmsourcedata,utmMedium:$scope.utmmediumdata,utmTerm:$scope.utmtermdata,IsMakeModelChanged:$scope.flagforcar,LeadId:$scope.leadidcar,};$scope.selectedItem=null;$scope.selectedItem1=null;$scope.carreg="";$scope.carclaim="";$scope.carkitstatus="";$scope.searchText2="";$scope.fastlanecarresult=CommonService.fastlane1(temp,$scope);$scope.fastlanecarresult.then(function(result){defer.resolve(result);if(result.data=="Registration number belongs to a  TwoWheeler"){$scope.patternFails=true;$scope.regnoerrortext=result.data;}else{result.data=angular.fromJson(result.data);console.log(result.data);$scope.fastlaneresult=result.data[0];$scope.fastlanedata=result.data[0];if(result.data.length==0){$scope.fastlanenohit=true;$scope.flagforcar=false;$scope.leadidcar=0;}else if(result.data.length&&result.data[0].MakeModel==undefined){$scope.formlblregno=$scope.carregnumber.toUpperCase();if($scope.fastlaneresult.LeadId!=0)$scope.VechileLookUpLeadIdCar=$scope.fastlaneresult.LeadId;$scope.flagforcar=true;$scope.leadidcar=$scope.VechileLookUpLeadIdCar;$scope.fastlanenohit=true;$scope.selectedItem="";$scope.selectedItem1="";$scope.searchText1="";$scope.carreg=$scope.carregnumber.toUpperCase();$scope.carkitstatus="";}else{$scope.fastlanenohit=false;$scope.patternFails=false;console.log("yes");$scope.carflag=true;if($scope.fastlaneresult.RegistrationDate!=undefined){var dateObj=new Date($scope.fastlaneresult.RegistrationDate);var month=dateObj.getMonth()+1;var day=dateObj.getDate();var year=dateObj.getFullYear();var date=day+"-"+month+"-"+year;$scope.Registrationdate=JSON.parse(CommonService.stringifyWcf(date,1));}
var Fuel_Type=$scope.fastlaneresult.MakeModel.split(",")[1];var CC=$scope.fastlaneresult.MakeModel.split(",")[3];var Year_Of_manufacturer=$scope.fastlaneresult.ManufactureYear;var Seating_Capacity=$scope.fastlaneresult.MakeModel.split(",")[2];var series=$scope.fastlaneresult.MakeModel;var ChasisNo=$scope.fastlaneresult.ChassisNumber;var EngineNo=$scope.fastlaneresult.EngineNumber;var Reg_no=$scope.fastlaneresult.RegistrationNumber;if($scope.fastlaneresult.LeadId!=0)$scope.VechileLookUpLeadIdCar=$scope.fastlaneresult.LeadId;$scope.flagforcar=true;$scope.leadidcar=$scope.VechileLookUpLeadIdCar;$scope.carengineno=EngineNo;$scope.carchasisno=ChasisNo;var regyeartemp=$scope.regyear1;var temparray=[];var yeargap=$scope.year-Year_Of_manufacturer;for(var i=0;i<=yeargap;i++){if(regyeartemp.length>=i){temparray.push(regyeartemp[i]);}}
$scope.regyear=temparray;$scope.showcarncb=true;$scope.claimtaken="";if(Fuel_Type.trim()=="DIESEL"){$scope.carkitstatus=undefined;$scope.carkitstatusText=undefined;$scope.formddlkit="Kit0";$scope.carfuelcontainer=false;}else if(Fuel_Type.trim()=="CNG"){$scope.carkitstatusText=undefined;$scope.carkitstatus=undefined;$scope.formddlkit="Kit0";$scope.carfuelcontainer=false;}else if(Fuel_Type.trim()=="LPG"){$scope.carkitstatus=undefined;$scope.carcnglpg=$scope.carpoplpg;$scope.carfuelcontainer=true;}else if(Fuel_Type.trim()=="PETROL"){$scope.carkitstatus=undefined;$scope.carkitstatusText=undefined;$scope.carcnglpg=$scope.carpoppetrol;$scope.carfuelcontainer=true;}
$scope.formcarwidget=series;$scope.selectedItem={};$scope.selectedItem1={};$scope.selectedItem.ModelName=series;$scope.selectedcarmakepop=series;$scope.modelItem=series;$scope.selectedcarregyr=$scope.fastlaneresult.ManufactureYear;$scope.selectedItem.MakeId=$scope.fastlaneresult.MakeModelIds.split(",")[0].trim();$scope.selectedItem.ModelId=$scope.fastlaneresult.MakeModelIds.split(",")[1].trim();$scope.yearOfRegistration=Year_Of_manufacturer;$scope.forcarreg=Year_Of_manufacturer;$scope.carreg=Year_Of_manufacturer;$scope.regItem=Year_Of_manufacturer;$scope.formlblregno=$scope.carregnumber.toUpperCase();$scope.formchasisno=ChasisNo;$scope.formengineno=EngineNo;var regcode=$scope.fastlaneresult.RTOCode;regcode=$scope.fastlaneresult.RTOCode.toUpperCase();$scope.selectedItem1.CityName="("+regcode+")"+result.data[0].CityName+","+result.data[0].StateName;$scope.selectedItem1.RTOCode=$scope.fastlanedata.RTOCode;$scope.rtoItem=$scope.fastlanedata.RTOCode;$scope.selectedItem1.StateCode=result.data[0].StateId;$scope.selectedItem1.CityCode=result.data[0].CityId;}}},function(response){ServiceRespnse(response);});return defer.promise;};$scope.closepop1=function(){$scope.claimtaken="";$scope.$root.comparebuypop=false;$scope.$root.popupcarpage=false;$scope.$root.scrollhide="";if($rootScope.productpop=="bounceInDown"){$rootScope.productpop="out fadeOutDownBig";}else{$rootScope.productpop="bounceInD bounceInDown";}
$scope.showchat1=false;$scope.showchatmsg=true;$scope.showheader=true;$scope.showmobileheader=true;};$scope.backpop1=function(flag){if(flag!=1&&flag!=2&&$scope.carpopup==true){$location.search("ProductFormCar",null);window.history.back();}else if(flag!=1&&flag!=2&&$scope.carmaindetails==true){$location.search("ProductCar",null);window.history.back();}
if($scope.carmaindetails==true||flag==1){$rootScope.productpop="bounceOut bounceOutLeft";$scope.planpopshow="bounceInRight";$scope.$root.comparebuypop=true;$scope.$root.scollClassjs="";$scope.$root.scrollhide="scrollhides";$rootScope.closedirect=1;}else if($scope.carpopup==true||flag==2){$scope.carProceedBtnLoader=false;$scope.carNo.registrationNo="";$scope.carmaindetails=true;$scope.selectedItem="";$scope.selectedItem1="";$scope.carreg="";$scope.carclaim="";$scope.carkitstatus="";$scope.carpopup=false;$scope.carregnumber="";$scope.carengineno="";$scope.carchasisno="";$scope.claimtaken="";$scope.showcarexpired=false;$scope.showfastlaneclaimlast=true;$scope.carbreaking=1;$scope.carbreakingexp=0;if($scope.userdata!=undefined){if($scope.userdata.length>0){if($scope.userdata[0].Product=="Car"&&$scope.$root.planpop==false){$scope.$root.backpop=false;}}}}};$scope.backpop2=function(flag){if(flag!=1&&flag!=2&&$scope.bikepopup==true){$location.search("ProductFormBike",null);window.history.back();}else if(flag!=1&&flag!=2&&$scope.bikemaindetails==true){$location.search("ProductBike",null);$scope.$root.scollClassjs="";window.history.back();}
if($scope.bikemaindetails==true||flag==1){$rootScope.productpop="bounceOut bounceOutLeft";$scope.planpopshow="bounceInRight";$scope.$root.comparebuypop=true;$scope.$root.scollClassjs="";$scope.$root.scrollhide="scrollhides";$rootScope.closedirect=1;}else if($scope.bikepopup==true||flag==2){$scope.bikeProceedBtnLoader=false;$scope.bikeNo.registrationNo=undefined;$scope.bikeregnumber=undefined;$scope.bikemaindetails=true;if($scope.bikeregnumber!=undefined){$scope.bikevalidate();}
$scope.bikepopup=false;$scope.$root.bikeregno=true;if($scope.userdata!=undefined){if($scope.userdata.length>0){if($scope.userdata[0].Product=="Twowheeler"&&$scope.$root.planpop==false){$scope.$root.backpop=false;}}}}};$scope.backpop3=function(product,flag){$rootScope.productpop="bounceOut bounceOutLeft";$scope.planpopshow="bounceInRight";$scope.$root.comparebuypop=true;$scope.$root.scrollhide="scrollhides";$scope.$root.travelfirstpop=false;$scope.$root.travelsecondpop=false;$scope.$root.scollClassjs="";$rootScope.closedirect=1;if(flag!=1){$location.search(product,null);window.history.back();}};$scope.backpop4=function(flag){if(flag!=1){$location.search("Travel",null);$scope.$root.scollClassjs="";window.history.back();}
if($scope.$root.travelfirstpop==true||flag==1){$rootScope.productpop="bounceOut bounceOutLeft";$scope.planpopshow="bounceInRight";$scope.$root.comparebuypop=true;$scope.$root.scrollhide="scrollhides";$rootScope.closedirect=1;}else if($scope.$root.travelsecondpop==true){$scope.travelProceedBtnLoader=false;$scope.$root.travelfirstpop=true;$scope.$root.travelsecondpop=false;$scope.travelpopSecond="display-none";$scope.travelpopFirst="display-visible";if($scope.userdata!=undefined){if($scope.userdata.length>0){if($scope.userdata[0].Product=="Travel"&&$scope.$root.planpop==false){$scope.$root.backpop=false;}}}}};console.log=function(){};$scope.maintabform=function(newTab,flag){$timeout(function(){$scope.$root.scollClassjs="scollClass";},1000);$scope.leadCreationExceedMsg=null;$scope.isWhatsApp=true;$scope.IsRenewal=false;$scope.products=[{product:"Car",id:"4"},{product:"Twowheeler",id:"8"},{product:"Health",id:"2"},{product:"Term",id:"3"},{product:"Critical Illness",id:"9"},{product:"Child",id:"7"},{product:"Investment",id:"5"},{product:"Pension",id:"6"}];if(newTab==1){$scope.product="Car";$scope.loadtemplateUrl="Template/CarForm.html";}else if(newTab==2){$scope.product="Bike";$scope.loadtemplateUrl="Template/BikeForm.html";}else if(newTab==3){$scope.product="Health";$scope.loadtemplateUrl="Template/HealthForm.html";}else if(newTab==11){$scope.product="Renewal";$scope.loadtemplateUrl="Template/RenewalForm.html";}
else if(newTab==9){$scope.product="Covid";$scope.loadtemplateUrl="Template/Covid.html";}else if(newTab==10){getIGCoverList();$scope.product="Health";$scope.loadtemplateUrl="Template/SuperTopUp.html";}else if(newTab==5){$scope.product="Child";$scope.loadtemplateUrl="Template/ChildForm.html";}else if(newTab==6){$scope.product="Investment";$scope.loadtemplateUrl="Template/InvestmentForm.html";}else if(newTab==7){$scope.product="Pension";$scope.loadtemplateUrl="Template/PensionForm.html";}else if(newTab==8){$scope.product="Travel";$scope.loadtemplateUrl="Template/TravelForm.html";}
if(flag=="critical"){$scope.termshow=false;$scope.criticalshow=true;$scope.product="Critical";$location.search("ProductCritical");$scope.loadtemplateUrl="Template/CriticalForm.html";}else if(flag=="term"){$scope.criticalshow=false;$scope.termshow=true;$scope.product="Term";$location.search("ProductTerm");$scope.loadtemplateUrl="Template/TermForm.html";}
$rootScope.closedirect=0;if($scope.appinitializedata==0){GetLocalStorageData();$scope.appinitializedata=1;}
$scope.showheader=false;if(newTab==1){$location.search("ProductCar");carlist();citylist();$scope.checkcarbreaking1();$scope.$root.popuphealthpage=false;$scope.$root.popuptermpage=false;$scope.$root.popupchildpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popupbikepage=false;$scope.$root.popupcovidpage=false;$scope.$root.popupcarpage=true;$scope.$root.closepop=false;$scope.$root.backpop=true;$scope.carpopup=false;$scope.carmaindetails=true;$scope.bikeregno=false;$scope.carregno=true;$scope.cartab="active cartab";$scope.biketab="biketab";$rootScope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";$scope.regerror=false;$scope.regnoerrortext="";}else if(newTab==2){$location.search("ProductBike");$scope.product="Bike";$scope.bikeProceedBtnLoader=false;$scope.carformfastlane="";bikealldatalist();bikecitylist();$scope.$root.popuphealthpage=false;$scope.$root.popuptermpage=false;$scope.$root.popupchildpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popupcarpage=false;$scope.$root.popupcovidpage=false;$scope.$root.popupbikepage=true;$scope.$root.closepop=false;$scope.$root.backpop=true;$scope.bikepopup=false;$scope.bikemaindetails=true;if($scope.bikeregnumber!=undefined){}
$scope.carregno=false;$scope.$root.bikeregno=true;$scope.biketab="active biketab";$scope.cartab="cartab";$rootScope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";$scope.regnoerrortext="";getlinkbikepop();}else if(newTab==3){$location.search("ProductHealth");$scope.product="Health";$scope.cityerror=false;$scope.dateerror=false;$scope.annualerror=false;$scope.commoncity1();$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popuptermpage=false;$scope.$root.popupchildpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popupcovidpage=false;$scope.$root.popuphealthpage=true;$scope.$root.closepop=false;$scope.$root.backpop=true;$rootScope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";}
else if(newTab==11){$location.search("ProductRenewal");$scope.product="Renewal";$scope.cityerror=false;$scope.dateerror=false;$scope.annualerror=false;$scope.IsRenewal=true;$scope.renewalInsuranceCompany="";$scope.renewalClaimInsurer="";$scope.insurerDisabled=true;$scope.renewalClaimProductItem="";$scope.renewalProductType="";$scope.IGdate="";$scope.IGmonth="";$scope.IGyear="";$scope.insurerDisabled=true;$scope.products=[{product:"Car",id:"4"},{product:"Twowheeler",id:"8"},{product:"Health",id:"2"}];$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popuptermpage=false;$scope.$root.popupchildpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popupcovidpage=false;$scope.$root.popuprenewalpage=true;$scope.$root.closepop=false;$scope.$root.backpop=true;$rootScope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";}
else if(newTab==10){$location.search("ProductSuperTopupHealth");$scope.product="Health";$scope.cityerror=false;$scope.dateerror=false;$scope.annualerror=false;$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popuptermpage=false;$scope.$root.popupchildpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popupcovidpage=false;$scope.$root.popuphealthpage=true;$scope.$root.closepop=false;$scope.$root.backpop=true;$rootScope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";}else if(newTab==9){$location.search("ProductCovid");$scope.product="Covid";$scope.cityerror=false;$scope.dateerror=false;$scope.annualerror=false;$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popuptermpage=false;$scope.$root.popupchildpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popuphealthpage=false;$scope.$root.popupcovidpage=true;$scope.$root.closepop=false;$scope.$root.backpop=true;$rootScope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";}else if(newTab==4){$scope.productname=flag;$scope.commoncity1();DataFactory.userActualIncome($scope);$scope.cityerror=false;$scope.dateerror=false;$scope.annualerror=false;$scope.$root.popuphealthpage=false;$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popupchildpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popuptermpage=true;$scope.$root.popupcovidpage=false;$scope.$root.closepop=false;$scope.$root.backpop=true;$rootScope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";}else if(newTab==5){$location.search("ProductChild");$scope.product="Child";$scope.$root.popuptermpage=false;$scope.$root.popuphealthpage=false;$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popupchildpage=true;$scope.$root.popupcovidpage=false;$scope.$root.closepop=false;$scope.$root.backpop=true;$rootScope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";}else if(newTab==6){$location.search("ProductInvestment");$scope.product="Investment";$scope.annualerror=false;$scope.incomeerror=false;$scope.dateerror=false;$scope.paymenterror=false;$scope.$root.popupchildpage=false;$scope.$root.popuptermpage=false;$scope.$root.popuphealthpage=false;$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popupinvestmentpage=true;$scope.$root.popupcovidpage=false;$scope.$root.closepop=false;$scope.$root.backpop=true;$rootScope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";$scope.selectedincome=$scope.investincome[0].value;$scope.payItem=$scope.investincome[0].text;}else if(newTab==7){$location.search("ProductPension");$scope.product="Pension";$scope.annualerror=false;$scope.incomeerror=false;$scope.dateerror=false;$scope.paymenterror=false;$scope.$root.popupchildpage=false;$scope.$root.popuptermpage=false;$scope.$root.popuphealthpage=false;$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popuppensionpage=true;$scope.$root.popupcovidpage=false;$scope.$root.closepop=false;$scope.$root.backpop=true;$rootScope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";$scope.payMode=$scope.investincome[0].value;$scope.annuity="self";}else if(newTab==8){$location.search("ProductTravel");$scope.product="Travel";$scope.$root.popupchildpage=false;$scope.$root.popuptermpage=false;$scope.$root.popuphealthpage=false;if($scope.travelDestinations==undefined){$scope.travelDestinations=[];AllDestinationlist();}
$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=true;$scope.$root.travelfirstpop=true;$scope.$root.travelsecondpop=false;$scope.$root.popupcovidpage=false;$scope.$root.closepop=false;$scope.$root.backpop=true;$rootScope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";$scope.travelpopFirst="display-visible";let date=new Date();let crrdate=date.getFullYear()+"/"+(date.getMonth()+1)+"/"+(date.getDate());$scope.travelstartdatestring=new Date(crrdate);$scope.minstartdatetravel=date.getFullYear()+"-"+((date.getMonth()+1)<=9?"0"+(date.getMonth()+1):(date.getMonth()+1))+"-"+((date.getDate())<=9?"0"+(date.getDate()):(date.getDate()));settraveldatestring();}
$scope.mainform_animation="";$scope.$root.productBox="display-visible";if($scope.tab<newTab){$scope.mainform_animation="to-animate intro-animate-66";}else{$scope.mainform_animation="to-animate intro-animate-66";}};$scope.setcalendar=function(){if($scope.travelEndDate1!=undefined&&$scope.travelStartDate1!=undefined){if($scope.travelEndDate!=undefined&&$scope.travelEndDate!=null&&$scope.travelEndDate!=""){$scope.travelEndDate1.calendars[0]={month:new Date($scope.travelEndDate).getMonth(),year:new Date($scope.travelEndDate).getFullYear()};}
if($scope.travelStartDate!=undefined&&$scope.travelStartDate!=null&&$scope.travelStartDate!=""){$scope.travelStartDate1.calendars[0]={month:new Date($scope.travelStartDate).getMonth(),year:new Date($scope.travelStartDate).getFullYear()};}}};$scope.getpensionquote=function(){$scope.errorId="";var flag=1;if($scope.usermobile!=undefined&&ValidationFactory.mobilevalidate($scope.usermobile)=="True"){$scope.popmobileerror=false;}else{flag=0;$scope.popmobileerror=true;}
if($scope.IGdate==undefined||$scope.IGmonth==undefined||$scope.IGyear==undefined){flag=0;$scope.dateerror=true;}else{$scope.age=(ValidationFactory.AgeGroup($scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear)/12);if($scope.age<18||$scope.age>60){$scope.dateerror=true;$scope.checkdate=1;flag=0;}else{$scope.dateerror=false;}}
if($scope.checkdate==1||$scope.checkdate==undefined){flag=0;$scope.dateerror=true;}else{$scope.dateerror=false;}
if($scope.datespecificmsg!=""&&$scope.datespecificmsg!=undefined){$scope.dateerror=false;}
if($scope.nonTermvalidate($scope.txtPensionIncome,'pension')){flag=0;}
if(flag==1&&($scope.datespecificmsg==""||$scope.datespecificmsg==undefined)){$scope.formdob=$scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear;localStorage.maleclass=$scope.maleclass;localStorage.femaleclass=$scope.femaleclass;localStorage.gender=$scope.gender;localStorage.formgender=$scope.formgender;localStorage.IGdate=$scope.IGdate;localStorage.IGmonth=$scope.IGmonth;localStorage.IGyear=$scope.IGyear;localStorage.formdob=$scope.formdob;localStorage.txtPensionIncome=$scope.txtPensionIncome;localStorage.selectedincome1=$scope.selectedincome;localStorage.payMode=$scope.payMode;$scope.showbtnpensionloader=true;var currentPage=$location.absUrl();$scope.utm_source="";$scope.utm_campaign="";$scope.utm_term="";$scope.utm_medium="";$scope.insDOB=$scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear;var today=new Date();if(flag==1){if(currentPage.indexOf("utm_source")!=-1){$scope.utm_source=currentPage.slice(currentPage.indexOf("utm_source=")+11).split("&")[0];}
if(currentPage.indexOf("utm_campaign")!=-1){$scope.utm_campaign=currentPage.slice(currentPage.indexOf("utm_campaign=")+13).split("&")[0];}
if(currentPage.indexOf("utm_term")!=-1){$scope.utm_term=currentPage.slice(currentPage.indexOf("utm_term=")+9).split("&")[0];}
if(currentPage.indexOf("utm_medium")!=-1){$scope.utm_medium=currentPage.slice(currentPage.indexOf("utm_medium=")+11).split("&")[0];}
$scope.nontermdata={userdetails:{IGQuoteId:0,PartnerAgentId:"String content",PartnerLeadId:"String content",RequestType:"String content",Requests:[{__type:"NonTermRequest:#ServiceEntities",DOBs:[$scope.insDOB],Features:[{__type:"BooleanFeature:#ServiceEntities",Name:"ReturnOfPurchasePrice"},{__type:"BooleanFeature:#ServiceEntities",Name:"LumpSumOnRetirement"},],Amount:$scope.txtPensionIncome+","+$scope.payMode,MaturityTerm:0,Gender:$scope.gender,CityId:3502,ProductId:6,MinRisk:0,MaxRisk:0,PensionFor:$scope.annuity,PaymentDuration:$scope.PaymentDuration,PensionTill:$scope.PensionTill,},],ServiceTimeOut:2147483647,utmCompaign:$scope.utm_campaign,utmMedium:$scope.utm_medium,utmSource:$scope.utm_source,utmTerm:$scope.utm_term,},};$scope.userProduct=7;var saveRequirementData=CommonService.savePensionRequirementData($scope,globals);saveRequirementData.then(function(pl){$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=angular.fromJson(angular.toJson(pl.data.Message));if($scope.IGQuoteId>0){$scope.leadCreationfn(6);}else{$scope.showbtnpensionloader=false;}},function(response){ServiceRespnse(response);});}}};$scope.getinvestquotes=function(){$scope.errorId="";var flag=1;if($scope.usermobile!=undefined&&ValidationFactory.mobilevalidate($scope.usermobile)=="True"){$scope.popmobileerror=false;}else{flag=0;$scope.popmobileerror=true;}
if($scope.IGdate==undefined||$scope.IGmonth==undefined||$scope.IGyear==undefined){flag=0;$scope.dateerror=true;}else{$scope.age=(ValidationFactory.AgeGroup($scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear)/12);if($scope.age<18||$scope.age>65){$scope.dateerror=true;$scope.checkdate=1;flag=0;}else{$scope.dateerror=false;}}
if($scope.nonTermvalidate($scope.txtInvestIncome,'invest')){flag=0;}
if($scope.checkdate==1||$scope.checkdate==undefined){flag=0;$scope.dateerror=true;}else{$scope.dateerror=false;}
if($scope.datespecificmsg!=""&&$scope.datespecificmsg!=undefined){$scope.dateerror=false;}
if(flag==1&&($scope.datespecificmsg==""||$scope.datespecificmsg==undefined)){localStorage.maleclass=$scope.maleclass;localStorage.femaleclass=$scope.femaleclass;localStorage.gender=$scope.gender;localStorage.formgender=$scope.formgender;localStorage.IGdate=$scope.IGdate;localStorage.IGmonth=$scope.IGmonth;localStorage.IGyear=$scope.IGyear;localStorage.formdob=$scope.formdob;localStorage.txtInvestIncome=$scope.txtInvestIncome;localStorage.selectedincome1=$scope.selectedincome;localStorage.payMode=$scope.payMode;$scope.showbtninvestloader=true;var currentPage=$location.absUrl();$scope.utm_source="";$scope.utm_campaign="";$scope.utm_term="";$scope.utm_medium="";$scope.insDOB=$scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear;if(currentPage.indexOf("utm_source")!=-1){$scope.utm_source=currentPage.slice(currentPage.indexOf("utm_source=")+11).split("&")[0];}
if(currentPage.indexOf("utm_campaign")!=-1){$scope.utm_campaign=currentPage.slice(currentPage.indexOf("utm_campaign=")+13).split("&")[0];}
if(currentPage.indexOf("utm_term")!=-1){$scope.utm_term=currentPage.slice(currentPage.indexOf("utm_term=")+9).split("&")[0];}
if(currentPage.indexOf("utm_medium")!=-1){$scope.utm_medium=currentPage.slice(currentPage.indexOf("utm_medium=")+11).split("&")[0];}
var data={userdetails:{IGQuoteId:0,PartnerAgentId:"",PartnerLeadId:"",RequestType:"",Requests:[{__type:"NonTermRequest:#ServiceEntities",DOBs:[$scope.insDOB],Features:[{__type:"BooleanFeature:#ServiceEntities",Id:$scope.AllowPartialWithdrawNameAmount,Name:""},{__type:"CustomFeature:#ServiceEntities",Id:$scope.TermBenefitAmount,Name:"",Value:0},{__type:"CustomFeature:#ServiceEntities",Id:$scope.AccidentalDisabilityAmount,Name:"",Value:0},{__type:"CustomFeature:#ServiceEntities",Id:$scope.AccidentalDeathAmount,Name:"",Value:0},{__type:"CustomFeature:#ServiceEntities",Id:$scope.CriticalIllnessAmount,Name:"",Value:0},],Amount:$scope.txtInvestIncome+","+$scope.selectedincome,MaturityTerm:0,Gender:$scope.gender,CityId:3502,MinRisk:0,MaxRisk:0,ProductId:5,MaturityType:"HistoricalGrowth",PaymentDuration:"",},],ServiceTimeOut:"2147483647",utmCompaign:$scope.utm_campaign,utmMedium:$scope.utm_medium,utmSource:$scope.utm_source,utmTerm:$scope.utm_term,},};var resultdata=[];resultdata.push(data);$scope.formdob=$scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear;$rootScope.sessionValue["Investment"]=data;$scope.userProduct=6;var saveRequirementData=CommonService.saveInvestmentRequirementData($scope,globals);saveRequirementData.then(function(pl){$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=angular.fromJson(angular.toJson(pl.data.Message));if($scope.IGQuoteId>0){$scope.leadCreationfn(5);}else{$scope.showbtninvestloader=false;}},function(response){ServiceRespnse(response);});}};$scope.calculateAgeInYear=function(insDOB,childDOB){var date1=new Date(insDOB);var date2=new Date(childDOB);var diffDays=parseInt((date2-date1)/(1000*60*60*24)/365);return Math.abs(diffDays);};$scope.getchildquotes=function(){var flag=1;if($scope.nonTermvalidate($scope.childincome,"child")){flag=0;}
if($scope.usermobile!=undefined&&ValidationFactory.mobilevalidate($scope.usermobile)=="True"){$scope.popmobileerror=false;}else{flag=0;$scope.popmobileerror=true;}
if($scope.IGdate==undefined||$scope.IGmonth==undefined||$scope.IGyear==undefined){flag=0;$scope.DobMessage="Parent's age should be (Min. 18 yrs & Max. 65 yrs)";$scope.dateerror=true;}else{$scope.dateerror=false;}
if($scope.formchilddob==undefined){flag=0;$scope.datechilderror=true;}else{$scope.datechilderror=false;}
var DateDiff=this.calculateAgeInYear($scope.IGchildmonth+"-"+$scope.IGchilddate+"-"+$scope.IGchildyear,$scope.IGmonth+"-"+$scope.IGdate+"-"+$scope.IGyear);var age=ValidationFactory.AgeGroup($scope.IGchilddate+"-"+$scope.IGchildmonth+"-"+$scope.IGchildyear)/12;if(age>0&&age<18){$scope.datechilderror=false;}else{$scope.datechilderror=true;flag=0;}
if($scope.age>=18&&$scope.age<=65){if($scope.checkdate==1||$scope.checkdate==undefined||DateDiff<18){$scope.DobMessage="Parent's & child age difference should be 18 yrs";$scope.dateerror=true;flag=0;}else{$scope.dateerror=false;}}else{$scope.dateerror=true;flag=0;$scope.DobMessage="Parent's age should be (Min. 18 yrs & Max. 65 yrs)";}
if($scope.checkchilddate==1||$scope.checkchilddate==undefined){$scope.datechilderror=true;flag=0;}else{$scope.datechilderror=false;}
if($scope.datespecificmsg!=""&&$scope.datespecificmsg!=undefined){$scope.dateerror=false;}
if(flag==1&&($scope.datespecificmsg==""||$scope.datespecificmsg==undefined)){localStorage.maleclass=$scope.maleclass;localStorage.femaleclass=$scope.femaleclass;localStorage.gender=$scope.gender;localStorage.IGdate=$scope.IGdate;localStorage.IGmonth=$scope.IGmonth;localStorage.IGyear=$scope.IGyear;localStorage.IGchilddate=$scope.IGchilddate;localStorage.IGchildmonth=$scope.IGchildmonth;localStorage.IGchildyear=$scope.IGchildyear;localStorage.formchilddob=$scope.formchilddob;localStorage.childincome=$scope.childincome;localStorage.childincometype=$scope.childincometype;localStorage.formdob=$scope.formdob;$scope.showbtnchildloader=true;$scope.insurerDOB=$scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear;$scope.childDOB=$scope.IGchilddate+"-"+$scope.IGchildmonth+"-"+$scope.IGchildyear;$scope.formdob=$scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear;var currentPage=$location.absUrl();$scope.utm_source="";$scope.utm_campaign="";$scope.utm_term="";$scope.utm_medium="";$scope.DOBs=[];$scope.DOBs.push($scope.insurerDOB);$scope.DOBs.push($scope.childDOB);if(currentPage.indexOf("utm_source")!=-1){$scope.utm_source=currentPage.slice(currentPage.indexOf("utm_source=")+11).split("&")[0];}
if(currentPage.indexOf("utm_campaign")!=-1){$scope.utm_campaign=currentPage.slice(currentPage.indexOf("utm_campaign=")+13).split("&")[0];}
if(currentPage.indexOf("utm_term")!=-1){$scope.utm_term=currentPage.slice(currentPage.indexOf("utm_term=")+9).split("&")[0];}
if(currentPage.indexOf("utm_medium")!=-1){$scope.utm_medium=currentPage.slice(currentPage.indexOf("utm_medium=")+11).split("&")[0];}
var data={userdetails:{IGQuoteId:0,PartnerAgentId:"",PartnerLeadId:"",RequestType:"",Requests:[{__type:"NonTermRequest:#ServiceEntities",DOBs:[$scope.DOBs],City:"Others",Features:[{__type:"BooleanFeature:#ServiceEntities",Id:$scope.AllowPartialWithdrawNameAmount,Name:""},{__type:"CustomFeature:#ServiceEntities",Id:$scope.AllowPartialWithdrawNameAmount,Name:"",Value:0},],Amount:$scope.childincome+",Y",MaturityTerm:0,Gender:$scope.gender,CityId:3035,MinRisk:1,MaxRisk:5,ProductId:7,MaturityType:"HistoricalGrowth",PaymentDuration:"",},],ServiceTimeOut:"2147483647",utmCompaign:$scope.utm_campaign,utmMedium:$scope.utm_medium,utmSource:$scope.utm_source,utmTerm:$scope.utm_term,},};var saveRequirementData=CommonService.saveChildRequirementData($scope,globals);saveRequirementData.then(function(pl){$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=angular.fromJson(angular.toJson(pl.data.Message));if($scope.IGQuoteId>0){$scope.leadCreationfn(7);}else{$scope.showbtnchildloader=false;}},function(response){ServiceRespnse(response);});}};$scope.getbikequotespop=function(){if($scope.newcarshow==false){$scope.bikereg=$scope.date.getFullYear();$scope.bikelastclaim="Yes~0";$scope.bikeexpiredpol=0;}
var flag=1;if($scope.selectedbikemmv==null){flag=0;$scope.biketexterror=true;}else{$scope.biketexterror=false;}
if($scope.selectedbikerto==null){flag=0;$scope.bikertoerror=true;}else{$scope.bikertoerror=false;}
if($scope.bikereg==undefined){flag=0;$scope.popbikeregerror=true;}else{$scope.popbikeregerror=false;}
if($scope.bikeexpiredpol==undefined){flag=0;$scope.popbikepolexperror=true;}else{$scope.popbikepolexperror=false;}
if($scope.usermobile!=undefined&&ValidationFactory.mobilevalidate($scope.usermobile)=="True"){$scope.popmobileerror=false;}else{flag=0;$scope.popmobileerror=true;}
if($scope.bikelastclaim==undefined&&$scope.bikeexpiredpol!=91){flag=0;$scope.popbikelastclaimerror=true;}else{$scope.popbikelastclaimerror=false;}
if($scope.carflag==true&&$scope.fastlanedata!=undefined){$scope.ProductType="Bike";if($scope.selectedbikemmv.bikename!=$scope.fastlanedata.MakeModel&&$scope.selectedbikemmv.makeid+","+$scope.selectedbikemmv.modelid!=$scope.fastlanedata.MakeModelIds&&parseInt($scope.bikereg)!=$scope.fastlanedata.ManufactureYear){$scope.fastlanedata.MakeModel=$scope.selectedbikemmv.bikename;$scope.fastlanedata.MakeModelIds=$scope.selectedbikemmv.makeid+","+$scope.selectedbikemmv.modelid;$scope.fastlanedata.ManufactureYear=parseInt($scope.bikereg);var updatedata=CommonService.UpdateVahicleLookup($scope);updatedata.then(function(pl){updatedata=pl.data;},function(response){ServiceRespnse(response);});}}
if(flag==1){$scope.showbtnbikeloader=true;if($scope.fastlaneresultbike!=undefined){if($scope.fastlaneresultbike.ManufactureYear!=$scope.bikereg){$scope.Registrationdate="";}}
$scope.carclaim=$scope.bikelastclaim;$scope.carreg=$scope.bikereg;$scope.ncblogic();$scope.$root.scrollhide="whitebg";var data={userdetails:{UtmSource:$scope.UtmSource,UtmCompaign:$scope.utmCompaign,UtmTerm:$scope.utmTerm,UtmMedium:$scope.utmMedium,RegistrationNo:$scope.bikeregnumber,VechileDetails:$scope.selectedbikemmv,BikeExpiredpol:$scope.bikeexpiredpol,ProductName:"Bike",CityList:$scope.selectedbikerto,ClaimPercent:$scope.bikelastclaim,RegYear:$scope.bikereg,EngineNo:$scope.bikeengineno,ChasisNo:$scope.bikechasisno,UserName:$scope.username,usermobile:$scope.usermobile,UserEmail:$scope.useremail,},};console.log(data);var resultdata=[];resultdata.push(data);$scope.userProduct=8;var saveRequirementData=CommonService.saveBikeRequirementData($scope,globals);var time="3000";var urlservice=globals.ServiceURL+"/QuoteService.svc/web/Save";var ServiceName="QuoteService";$timeout(function(){if($scope.BikeSavetime==0){$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[1].product);$scope.BikeSavetime=2;}else{$scope.BikeSavetime=0;}},3000);saveRequirementData.then(function(pl){if($scope.BikeSavetime==2){var timeoutvar=new Date().getTime();var dvar=timeoutvar-$scope.timeoutarray["saveservice"];$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[1].product,dvar);}
$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=angular.fromJson(angular.toJson(pl.data.Message));$scope.BikeSavetime=1;if($scope.IGQuoteId>0){$scope.leadCreationfn(8);}else{$scope.showbtnbikeloader=false;}},function(response){ServiceRespnse(response);});}};$scope.gethealthquotespop=function(id){var flag=1;if($scope.selectedItem2==null){flag=0;$scope.cityerror=true;}else{$scope.cityerror=false;}
if(parseInt($scope.selectedadult)>2||$scope.selectedadult==undefined||$scope.selectedadult==""||$scope.selectedadult=="0"){flag=0;$scope.adulterror=true;$scope.adulterrortext="Enter no of adult (1 or 2)";}else{$scope.adulterror=false;}
if(parseInt($scope.selectedchild)>4||$scope.selectedchild==undefined){flag=0;$scope.childerror=true;}else{$scope.childerror=false;}
if($scope.IGdate==undefined||$scope.IGmonth==undefined||$scope.IGyear==undefined||$scope.IGdate==""||$scope.IGmonth==""||$scope.IGyear==""||$scope.IGyear.length<4||$scope.IGyear==0||$scope.IGdate==0||$scope.IGmonth==0){flag=0;$scope.dateerror=true;}else{var yy=$scope.IGmonth+"-"+$scope.IGdate+"-"+$scope.IGyear;$scope.age=$scope.getAge(yy);if($scope.age<18||$scope.age>100){flag=0;$scope.dateerror=true;}else{$scope.dateerror=false;}}
if($scope.checkdate==1||$scope.checkdate==undefined){flag=0;$scope.dateerror=true;}else{$scope.dateerror=false;}
if($scope.usermobile!=undefined&&ValidationFactory.mobilevalidate($scope.usermobile)=="True"){$scope.popmobileerror=false;}else{flag=0;$scope.popmobileerror=true;}
if($scope.datespecificmsg!=""&&$scope.datespecificmsg!=undefined){$scope.dateerror=false;}
$scope.isSuperTopup=false;$scope.preIGPolicyCover=undefined;if(id=="supertopup"){$scope.isSuperTopup=true;if($scope.checkIGCover()){flag=0;}else{$scope.preIGPolicyCover=$scope.IGCoverValue.value;}}
if(flag==1&&($scope.datespecificmsg==""||$scope.datespecificmsg==undefined)){$scope.showbtnhealthloader=true;$scope.$root.scrollhide="whitebg";$scope.formdob=$scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear;localStorage.formdob=$scope.formdob;localStorage.gender=$scope.gender;localStorage.selectedadult=$scope.selectedadult;localStorage.selectedchild=$scope.selectedchild;localStorage.IGdate=$scope.IGdate;localStorage.IGmonth=$scope.IGmonth;localStorage.IGyear=$scope.IGyear;localStorage.maleclass=$scope.maleclass;localStorage.femaleclass=$scope.femaleclass;$scope.formdob1=$scope.IGyear+"-"+$scope.IGmonth+"-"+$scope.IGdate;var currentPage=$location.absUrl();$scope.utm_source="";$scope.utm_campaign="";$scope.utm_term="";$scope.utm_medium="";if(currentPage.indexOf("utm_source")!=-1){$scope.utm_source=currentPage.slice(currentPage.indexOf("utm_source=")+11).split("&")[0];}
if(currentPage.indexOf("utm_campaign")!=-1){$scope.utm_campaign=currentPage.slice(currentPage.indexOf("utm_campaign=")+13).split("&")[0];}
if(currentPage.indexOf("utm_term")!=-1){$scope.utm_term=currentPage.slice(currentPage.indexOf("utm_term=")+9).split("&")[0];}
if(currentPage.indexOf("utm_medium")!=-1){$scope.utm_medium=currentPage.slice(currentPage.indexOf("utm_medium=")+11).split("&")[0];}
if(flag==1){var data={userdetails:{Adult:parseInt($scope.selectedadult),Child:parseInt($scope.selectedchild),Gender:$scope.gender,Birthdate:$scope.formdob,Citylist:$scope.selectedItem2,Product:"Health",Username:$scope.username,usermobile:$scope.usermobile,Useremail:$scope.useremail,UtmSource:$scope.utm_source,UtmCampaign:$scope.utm_campaign,UtmTerm:$scope.utm_term,UtmMedium:$scope.utm_medium,},};var resultdata=[];resultdata.push(data);$scope.userProduct=2;var saveRequirementData=CommonService.saveHealthRequirementData($scope,globals);saveRequirementData.then(function(pl){$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=angular.fromJson(angular.toJson(pl.data.Message));if($scope.IGQuoteId>0){$scope.leadCreationfn(2);}else{$scope.showbtnhealthloader=false;}},function(response){ServiceRespnse(response);});}}};$scope.gecovidquotespop=function(){var flag=1;if($scope.selectedItem2==null){flag=0;$scope.cityerror=true;}else{$scope.cityerror=false;}
if(parseInt($scope.selectedadult)>2||$scope.selectedadult==undefined||$scope.selectedadult==""||$scope.selectedadult=="0"){flag=0;$scope.adulterror=true;$scope.adulterrortext="Enter no of adult (1 or 2)";}else{$scope.adulterror=false;}
if(parseInt($scope.selectedchild)>4||$scope.selectedchild==undefined){flag=0;$scope.childerror=true;}else{$scope.childerror=false;}
if($scope.IGdate==undefined||$scope.IGmonth==undefined||$scope.IGyear==undefined||$scope.IGdate==""||$scope.IGmonth==""||$scope.IGyear==""||$scope.IGyear.length<4||$scope.IGyear==0||$scope.IGdate==0||$scope.IGmonth==0){flag=0;$scope.dateerror=true;}else{var yy=$scope.IGmonth+"-"+$scope.IGdate+"-"+$scope.IGyear;$scope.age=$scope.getAge(yy);if($scope.age<18||$scope.age>100){flag=0;$scope.dateerror=true;}else{$scope.dateerror=false;}}
if($scope.checkdate==1||$scope.checkdate==undefined){flag=0;$scope.dateerror=true;}else{$scope.dateerror=false;}
if($scope.usermobile!=undefined&&ValidationFactory.mobilevalidate($scope.usermobile)=="True"){$scope.popmobileerror=false;}else{flag=0;$scope.popmobileerror=true;}
if($scope.datespecificmsg!=""&&$scope.datespecificmsg!=undefined){$scope.dateerror=false;}
if(flag==1&&($scope.datespecificmsg==""||$scope.datespecificmsg==undefined)){$scope.showbtnhealthloader=true;$scope.$root.scrollhide="whitebg";$scope.formdob=$scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear;localStorage.selectedItem2=$scope.selectedItem2;localStorage.formdob=$scope.formdob;localStorage.gender=$scope.gender;localStorage.selectedadult=$scope.selectedadult;localStorage.selectedchild=$scope.selectedchild;localStorage.IGdate=$scope.IGdate;localStorage.IGmonth=$scope.IGmonth;localStorage.IGyear=$scope.IGyear;localStorage.maleclass=$scope.maleclass;localStorage.femaleclass=$scope.femaleclass;localStorage.selectedcitynampop=$scope.selectedItem2.cityname;$scope.formdob1=$scope.IGyear+"-"+$scope.IGmonth+"-"+$scope.IGdate;var currentPage=$location.absUrl();$scope.utm_source="";$scope.utm_campaign="";$scope.utm_term="";$scope.utm_medium="";if(currentPage.indexOf("utm_source")!=-1){$scope.utm_source=currentPage.slice(currentPage.indexOf("utm_source=")+11).split("&")[0];}
if(currentPage.indexOf("utm_campaign")!=-1){$scope.utm_campaign=currentPage.slice(currentPage.indexOf("utm_campaign=")+13).split("&")[0];}
if(currentPage.indexOf("utm_term")!=-1){$scope.utm_term=currentPage.slice(currentPage.indexOf("utm_term=")+9).split("&")[0];}
if(currentPage.indexOf("utm_medium")!=-1){$scope.utm_medium=currentPage.slice(currentPage.indexOf("utm_medium=")+11).split("&")[0];}
if(flag==1){var data={userdetails:{Adult:parseInt($scope.selectedadult),Child:parseInt($scope.selectedchild),Gender:$scope.gender,Birthdate:$scope.formdob,Citylist:$scope.selectedItem2,Product:"Health",Username:$scope.username,usermobile:$scope.usermobile,Useremail:$scope.useremail,UtmSource:$scope.utm_source,UtmCampaign:$scope.utm_campaign,UtmTerm:$scope.utm_term,UtmMedium:$scope.utm_medium,},};var resultdata=[];resultdata.push(data);$scope.userProduct=2;var saveRequirementData=CommonService.saveCovidRequirementData($scope,globals);var time="3000";var urlservice=globals.ServiceURL+"/QuoteService.svc/web/Save";var ServiceName="QuoteService";$timeout(function(){if($scope.HealthSavetime==0){$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[2].product);$scope.HealthSavetime=2;}else{$scope.HealthSavetime=0;}},3000);saveRequirementData.then(function(pl){if($scope.HealthSavetime==2){var timeoutvar=new Date().getTime();var dvar=timeoutvar-$scope.timeoutarray["saveservice"];$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[6].product,dvar);}
$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=angular.fromJson(angular.toJson(pl.data.Message));$scope.HealthSavetime=1;if($scope.IGQuoteId>0){$scope.leadCreationfn(2);}else{$scope.showbtnhealthloader=false;}},function(response){ServiceRespnse(response);});}}};function getquotespop1(flag1){$scope.newcarclass="col-md-6 col-sm-6 col-xs-12";if($scope.carNo.registrationNo!=undefined&&$scope.patternFails!=true&&($scope.claimtaken!=undefined||($scope.carbreakingexp==1&&$scope.carbreaking==0))){$scope.carProceedBtnLoader=true;if($scope.selectedItem!=null){$scope.lastclaimtaken=$scope.lastclaimlist;$scope.lastclaimtaken1=$scope.lastclaimlist;$scope.carpopncbtag="NCB % in your existing policy?";if($scope.claimtaken=="No~50"){$scope.showcarncb=true;var ncbyear=$scope.year-$scope.yearOfRegistration;if(ncbyear>=6){ncbyear=6;$scope.carrequiredncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];}else{$scope.carrequiredncb=$scope.lastclaimlist[ncbyear].value.split("~")[1];}
$scope.carclaim=$scope.lastclaimlist[ncbyear-1].value;$scope.carclaimtext=$scope.lastclaimlist[ncbyear-1].text;$scope.carclaimedncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];$scope.carclaimtext1=$scope.carclaimedncb;}else if($scope.claimtaken=="Yes~0"){$scope.carclaim=$scope.lastclaimlist[0].value;$scope.carclaimtext=$scope.lastclaimlist[0].text;$scope.carclaimedncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.showcarncb=false;$scope.carclaimtext1=$scope.carclaimedncb;}else if($scope.claimtaken=="No~20"){$scope.showcarncb=true;$scope.carclaim=$scope.lastclaimlist[0].value;$scope.carclaimtext=$scope.lastclaimlist[0].text;$scope.carclaimedncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[1].value.split("~")[1];$scope.carclaimtext1=$scope.carclaimedncb;}else if($scope.claimtaken=="No~25"){$scope.showcarncb=true;$scope.carclaim=$scope.lastclaimlist[1].value;$scope.carclaimtext=$scope.lastclaimlist[1].text;$scope.carclaimedncb=$scope.lastclaimlist[1].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[2].value.split("~")[1];$scope.carclaimtext1=$scope.carclaimedncb;}else if($scope.claimtaken=="No~35"){$scope.showcarncb=true;$scope.carclaim=$scope.lastclaimlist[2].value;$scope.carclaimtext=$scope.lastclaimlist[2].text;$scope.carclaimedncb=$scope.lastclaimlist[2].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[3].value.split("~")[1];$scope.carclaimtext1=$scope.carclaimedncb;}else if($scope.claimtaken=="No~45"){$scope.showcarncb=true;$scope.carclaim=$scope.lastclaimlist[3].value;$scope.carclaimtext=$scope.lastclaimlist[3].text;$scope.carclaimedncb=$scope.lastclaimlist[3].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[4].value.split("~")[1];$scope.carclaimtext1=$scope.carclaimedncb;}
$scope.forcarwidgetpercent=$scope.carclaim;if($scope.forcarwidgetpercent=="Yes~0"&&$scope.claimtaken=="No~50"){$scope.forcarwidgetpercent="No~0";}
if($scope.carbreakingexp==1&&$scope.carbreaking==0){$scope.carrequiredncb=0;$scope.carclaimedncb=0;$scope.showcarncb=false;$scope.$root.showcarncb=false;$scope.ClaimTaken=true;$scope.carclaimtext1=$scope.carclaimedncb;$scope.carclaimedncb=0;}else{$scope.ClaimTaken=angular.lowercase($scope.claimtaken.split("~")[0].trim())=="no"?"false":"true";}}
$scope.carpopheadline="Please Confirm your";$scope.showrtocity=false;$scope.showrtofield=false;$scope.maincarpage=false;$scope.carpolicyexpdropdown=false;$scope.ncbdisabled=false;$scope.carpopncbtag="NCB % in your existing policy?";$scope.bodyscroll="noscroll";$scope.regerror=false;$scope.byreg=true;$scope.carerror=false;$scope.cityerror=false;$scope.popcarregerror=false;$scope.popcarclaimerror=false;$scope.popcarcnglpgerror=false;$scope.popcarcnglpgvalueerror=false;$scope.carpopup=true;$scope.carmaindetails=false;$location.search("ProductFormCar");if(flag1==undefined){$scope.$root.popupcarpage=true;$scope.$root.scrollhide="scrollhides";}else{$scope.getlinkpop();}}else{if($scope.patternFails==true||$scope.regerror==true){$scope.carpopup=false;$scope.carmaindetails=true;if($scope.carregnumber!=undefined){$scope.validate();}
flag=1;}}
$scope.carProceedBtnLoader=false;}
$scope.getquotespop=function(flag1){var flag=0;$scope.carpolicyexpdropdown=false;if($scope.fastlanenohit==true){$scope.getlinkpop();}
if($scope.carNo.registrationNo==undefined||$scope.patternFails==true){$scope.patternFails=true;$scope.regnoerrortext="Enter correct car registration no.";flag=1;$scope.carProceedBtnLoader=false;}else{$scope.patternFails=false;$scope.regnoerrortext="";}
if($scope.claimtaken==undefined&&($scope.carbreakingexp!=1||$scope.carbreaking==1)){$scope.regerror=true;flag=1;}else{$scope.regerror=false;}
var hit=0;$scope.CallWEBAPIService().then(function(res){if(res.data){if($scope.carNo.registrationNo!=undefined&&$scope.patternFails!=true&&($scope.claimtaken!=undefined||($scope.carbreakingexp==1&&$scope.carbreaking==0))){if($scope.fastlaneresult!=undefined){hit=1;$scope.fastlaneresult=undefined;getquotespop1();}else{$scope.carProceedBtnLoader=true;$timeout(function(){if($scope.fastlaneresult!=undefined){hit=1;$scope.fastlaneresult=undefined;getquotespop1();}else{$scope.carProceedBtnLoader=false;if($scope.carNo.registrationNo!=undefined&&$scope.patternFails!=true&&($scope.claimtaken!=undefined||($scope.carbreakingexp==1&&$scope.carbreaking==0))){$scope.getlinkpop();}}},3000);}}
if($scope.carreg&&$scope.selectedcarregyr){if(new Date().getFullYear()-$scope.carreg>15){$scope.popcarregerror1=true;}else if(new Date().getFullYear()-$scope.selectedcarregyr>15){$scope.popcarregerror1=true;}}}},function(rek){$scope.carProceedBtnLoader=false;});};$scope.checkcarbreaking1=function(flag){if($scope.carbreakingpol==0){$scope.carbreaking=1;$scope.carbreakingexp=0;$scope.checkcarbreaking(1);}else if($scope.carbreakingpol==90){$scope.carbreaking=0;$scope.carbreakingexp=0;$scope.checkcarbreaking(2);}else{$scope.carbreaking=0;$scope.carbreakingexp=1;$scope.checkcarbreaking(2);}
$scope.popbikepolexperror=false;};$scope.checkcarbreaking=function(flag){if($scope.carbreakingexp==undefined){$scope.carbreakingexp=0;}
if(flag==1||flag==3){if($scope.carbreaking==0){if($scope.carbreakingexp==0){$scope.showcarncb=true;$scope.$root.showcarncb=true;}else{$scope.showcarncb=false;$scope.$root.showcarncb=false;$scope.showfastlaneclaimlast=false;}
$scope.showcarexpired=true;}else{$scope.showcarncb=true;$scope.$root.showcarncb=true;$scope.showcarexpired=false;$scope.showfastlaneclaimlast=true;}}else if(flag==2||flag==4){if($scope.carbreakingexp==0){$scope.showcarncb=true;$scope.$root.showcarncb=true;if(flag==4){$scope.showcarncb=true;$scope.$root.showcarncb=true;}
$scope.showfastlaneclaimlast=true;}else{if(flag==4){$scope.carclaim=undefined;$scope.showcarncb=false;$scope.$root.showcarncb=false;$scope.Showcarbreak=false;$scope.showcitypop=false;}
$scope.showfastlaneclaimlast=false;$scope.$root.showcarncb=false;$scope.showcarncb=false;}}};$scope.getformbikequotespop=function(flag1){var flag=0;$scope.fastlaneflag=true;$scope.newcarclass="col-md-6 col-sm-6 col-xs-12";$scope.bikeProceedBtnLoader=true;if($scope.bikeNo.registrationNo==undefined||$scope.patternFails1==true){$scope.patternFails1=true;$scope.regnoerrortext="Enter correct bike registration no.";flag=1;$scope.bikeProceedBtnLoader=false;}else{$scope.patternFails1=false;$scope.regnoerrortext="";}
for(var a=0;a<$scope.bikeexpired.length;a++){if($scope.bikeexpired[a].value==$scope.bikeexpiredpol)$scope.bikepolexp=$scope.bikeexpired[a].text;}
if($scope.bikeNo.registrationNo!=undefined&&$scope.patternFails1!=true&&$scope.bikeexpiredpol!=undefined&&$scope.fastlaneflag1==true){$scope.newcarshow=true;$scope.fastlaneflag=false;$scope.fastlaneflag1=false;$scope.bikeProceedBtnLoader=false;$scope.showbikepolicyexpired=false;$scope.$root.popupbikepage=true;$scope.$root.scrollhide="scrollhides";$scope.bikepopup=true;$scope.bikemaindetails=false;$scope.biketexterror=false;$scope.bikertoerror=false;$location.search("ProductFormBike");$scope.showrtocity=false;$scope.popbikeregerror=false;$scope.popbikepolexperror=false;$scope.popbikelastclaimerror=false;}else{if($scope.patternFails1==true||$scope.popbikelastclaimerror==true){$scope.bikepopup=false;$scope.bikeProceedBtnLoader=false;$scope.bikemaindetails=true;if($scope.bikeregnumber!=undefined){$scope.bikevalidate();}
flag=1;}}
if($scope.bikenoresult==true){$scope.showrtocity=true;}};$scope.getlinkpop=function(flag){$scope.popupformob=false;$scope.carbylink=true;$scope.ncbdirectlist=[];for(i=0;i<$scope.regyear.length;i++){$scope.ncbdirectlist.push($scope.regyear[i]);}
$scope.carpopheadline="Please Enter Your";$scope.carpopncbtag="Last Claim Taken";$scope.carpopup=true;$scope.carerror=false;$scope.carbreaking=1;$scope.carbreakingexp=0;$scope.showcarexpired=false;$scope.cityerror=false;$scope.carpolicyexpdropdown=true;$scope.popcarregerror=false;$scope.popcarclaimerror=false;$scope.popcarcnglpgerror=false;$scope.popcarcnglpgvalueerror=false;$scope.carregnumber="";$scope.carengineno="";$scope.carchasisno="";$scope.carmaindetails=false;$scope.$root.backpop=true;if(flag!=false){$scope.showheader=false;$scope.showrtocity=true;$scope.maincarpage=true;$scope.ncbdisabled=true;$scope.$root.popupcarpage=true;$scope.showchat=false;$scope.showchat1=true;$scope.showchatmsg=false;$scope.showcarncb=true;}
$location.search("ProductFormCar");$scope.newcarSearch=false;if(flag=="new"){$scope.newcarshow=false;$scope.newcarSearch=true;$scope.newcarclass="col-md-6 col-sm-6 col-xs-12";}else{$scope.newcarshow=true;$scope.newcarclass="col-md-6 col-sm-6 col-xs-12";}
$scope.lastclaimtaken=$scope.ncbdirectlist;$scope.lastclaimtaken1=$scope.ncbdirectlist;$scope.bodyscroll="noscroll";$scope.byreg=false;$scope.carpopup=true;$scope.carmaindetails=false;if($scope.claimtaken!=undefined){$scope.carclaim=$scope.claimtaken;for(var i=0;i<$scope.lastclaimtaken.length;i++){if($scope.carclaim==$scope.lastclaimtaken[i].value){$scope.carclaimtext1=$scope.lastclaimtaken[i].text;}}
$scope.carclaimchange();}
if($scope.selectedItem!=undefined&&$scope.selectedItem!=null){if($scope.selectedItem.FuelType=="PETROL"||$scope.selectedItem.ModelName.indexOf("PETROL")!=-1){$scope.carkitstatus=undefined;$scope.carcnglpg=$scope.carpoppetrol;$scope.carfuelcontainer=true;}else if($scope.selectedItem.FuelType=="LPG"||$scope.selectedItem.ModelName.indexOf("LPG")!=-1){$scope.carkitstatus=undefined;$scope.carcnglpg=$scope.carpoplpg;$scope.carfuelcontainer=true;}}};$scope.getbikepopup=function(flag){$scope.bikepopup=true;$scope.bikeregnumber=undefined;$scope.bikereg=undefined;$scope.bikeengineno=undefined;$scope.bikechasisno=undefined;$scope.bikemaindetails=false;$scope.$root.backpop=true;$scope.biketexterror=false;$scope.showbikelastclaim=true;$scope.bikertoerror=false;$scope.popbikeregerror=false;$scope.popbikepolexperror=false;$scope.popbikelastclaimerror=false;$scope.showrtocity=true;$location.search("ProductFormBike");$scope.newcarSearch=false;if(flag=="new"){$scope.newcarshow=false;$scope.newcarSearch=true;$scope.newcarclass="col-md-6 col-sm-6 col-xs-12";}else{$scope.newcarshow=true;$scope.newcarclass="col-md-6 col-sm-6 col-xs-12";}};$scope.closereferpop=function(){$scope.showrefferedpop=false;};$scope.checkadult=function(flag){$scope.selectedadult=flag;if(flag==1){$scope.a1class="lmbutton activebt";$scope.a2class="lmbutton";}else if(flag==2){$scope.a1class="lmbutton ";$scope.a2class="lmbutton activebt";}
if($scope.selectedadult>1){$scope.showadultmess=true;}else{if($scope.selectedchild<1&&$scope.selectedadult==1)$scope.showadultmess=false;}};$scope.checkchild=function(flag){$scope.selectedchild=flag;$scope.chclass=["childbt ","childbt ","childbt ","childbt ","childbt "];$scope.chclass[flag]=$scope.chclass[flag]+"activebt";if($scope.selectedchild>0){$scope.showadultmess=true;}else{if($scope.selectedchild<1&&$scope.selectedadult==1)$scope.showadultmess=false;}};$scope.selectmarital=function(){$scope.chclass=["childbt activebt","childbt ","childbt ","childbt ","childbt "];};$scope.childfn=function(flag){$scope.NoOfChild=flag;$scope.chclass=["childbt ","childbt ","childbt ","childbt ","childbt "];$scope.chclass[flag]=$scope.chclass[flag]+"activebt";};$scope.checkusermobile=function(){if($scope.usermobile!=undefined&&ValidationFactory.mobilevalidate($scope.usermobile)=="True"){$scope.popmobileerror=false;}else{$scope.popmobileerror=true;}};$scope.openLife=function(){$window.location.href="/life-insurance";};$scope.closeHindi=function(){$scope.showhindiversion=false;localStorage.hindiversion=2;};function getIGCoverList(){$scope.IGCoverList=[];for(var n=200000;n<=1000000;){$scope.IGCoverList.push({text:n/100000+" Lacs",value:n});n=n+100000;}}
$scope.init=function(){var newflag=0;var servicedate=CommonService.CurrentDateTime();servicedate.then(function(result){newflag=1;var CurrenDateTimeServicetemp=angular.fromJson(result.data);var datenew=new Date(parseInt(CurrenDateTimeServicetemp[0].CurrentDateTime.substring(6,19))).getDate()+'-'+
(new Date(parseInt(CurrenDateTimeServicetemp[0].CurrentDateTime.substring(6,19))).getMonth()+1)+'-'+
new Date(parseInt(CurrenDateTimeServicetemp[0].CurrentDateTime.substring(6,19))).getFullYear();var datenew1=datenew.toString().split("-");$rootScope.CurrenDateTimeService=angular.copy(datenew1[2]+"/"+datenew1[1]+"/"+datenew1[0]);$scope.todayDate=new Date($rootScope.CurrenDateTimeService);$scope.date=new Date($rootScope.CurrenDateTimeService);var beforeexpirydate=new Date($rootScope.CurrenDateTimeService);beforeexpirydate.setDate(beforeexpirydate.getDate()-87);var date1=new Date($rootScope.CurrenDateTimeService);date1.setDate(date1.getDate()+180);var date2=new Date($rootScope.CurrenDateTimeService);date2.setDate(date2.getDate()+1);if(newflag!=2){$scope.init1(datenew1,date1,date2);}});$timeout(function(){if(newflag==0){newflag=2;$scope.init1();}},2000);}
$scope.init1=function(){$window.scrollTo(0,0);$scope.todayDate=new Date($scope.todayDate);$scope.minstartdatetravel=new Date($scope.todayDate).getMonth()+1+"/"+new Date($scope.todayDate).getDate()+"/"+new Date($scope.todayDate).getFullYear();var date1=new Date($scope.todayDate);date1.setDate(date1.getDate()+180);$scope.maxenddatetravel=date1.getMonth()+1+"/"+date1.getDate()+"/"+date1.getFullYear();var date2=new Date($scope.todayDate);date2.setDate(date2.getDate()+1);$scope.minenddatetravel=date2.getMonth()+1+"/"+date2.getDate()+"/"+date2.getFullYear();crouselItems();if(localStorage.hindiversion!=2){$scope.showhindiversion=true;}
$scope.swipeClass="mySwipe";if(window.innerWidth>=850){$scope.device="Desktop";}else{$scope.device="Mobile";}
if(localStorage.IsDate!=new Date($scope.todayDate).getDate()){localStorage.Islogin=false;localStorage.userpage=undefined;localStorage.UserName=undefined;}
if(localStorage.Islogin){$scope.Islogin=true;$scope.UserName=localStorage.UserName;if(localStorage.userpage!="UserAccount"){$timeout(function(){$scope.HomeloaderShow=false;},2000);}else{$scope.Accountfn();}}else{$timeout(function(){$scope.HomeloaderShow=false;},2000);}
$interval(function(){$scope.showhindiversion=false;localStorage.hindiversion=2;},5000);if(window.innerWidth>=850){$scope.apidevice="Desktop";}
else if(window.innerWidth<850&&window.innerWidth>400){$scope.apidevice="Tablet";}
else{$scope.apidevice="Mobile";}
$scope.timeoutarray={};var sourcevia=document.referrer;if(sourcevia.indexOf("google")!=-1||sourcevia.indexOf("yahoo")!=-1||sourcevia.indexOf("bing")!=-1){$scope.utmsourcedata="organic";$scope.utmcampaigndata="organic";}
$scope.newcarclass="col-md-6 col-sm-6 col-xs-12";$scope.newcarshow=true;$scope.carquotesleadrequest=ValidationFactory.GetEncryptedString();$scope.leadcreaterequestdata=ValidationFactory.GetLeadCreationEncryptedString();$scope.otpcreaterequestdata=ValidationFactory.GetOTPString1();var currentURL=$location.absUrl();if(currentURL.indexOf("dev.indiacover360.com")!=-1){globals.RedirectURL="https://dev.indiacover360.com/Application/";globals.ServiceURL="https://api.indiacover360.com";globals.IGwServiceURL="https://api.indiacover360.com";globals.UIURL="https://dev.indiacover360.com/HomePage";globals.landingPage="https://dev.indiacover360.com";globals.mainPage="https://dev.indiacover360.com/Application/?CPID=";}
else if(currentURL.indexOf("qa.indiacover360.com")!=-1){globals.RedirectURL="https://qa.indiacover360.com/Application/";globals.ServiceURL="https://apiqa.indiacover360.com";globals.IGwServiceURL="https://apiqa.indiacover360.com";globals.UIURL="https://qa.indiacover360.com/HomePage";globals.landingPage="https://qa.indiacover360.com";globals.mainPage="https://qa.indiacover360.com/Application/?CPID=";}
else if(currentURL.indexOf("insurejoy.com")!=-1){globals.RedirectURL="https://www.insurejoy.com/Application/";globals.ServiceURL="https://api.insurejoy.com";globals.IGwServiceURL="https://api.insurejoy.com";globals.UIURL="https://www.insurejoy.com/HomePage";globals.landingPage="https://www.insurejoy.com";globals.mainPage="https://www.insurejoy.com/Application/?CPID=";}
else{globals.RedirectURL="http://localhost:58324/Application/";globals.ServiceURL="https://apiqa.indiacover360.com";globals.IGwServiceURL="https://apiqa.indiacover360.com";globals.UIURL="http://localhost:58324/HomePage";globals.landingPage="http://localhost:58324";globals.mainPage="http://localhost:58324/Application/?CPID=";}
QuotePageURL=globals.RedirectURL;$scope.selectedTravellers=1;$scope.checkNoOfTravellerError();if(currentURL.indexOf("ref")!=-1){$scope.utmpartneragentiddata=currentURL.split("=")[1];$scope.utmsourcedata="Referral_Program";}
if(currentURL.indexOf("productpop")!=-1){$scope.opencomparebuypop();}else if(currentURL.indexOf("lodgeclaim")!=-1){$scope.openlodgeclaimpop();}else if(currentURL.indexOf("downloadapp")!=-1){$scope.getAllLead("downloadapp");}else if(currentURL.indexOf("child")!=-1){$scope.opencomparebuypop();$scope.maintabform(5);}else if(currentURL.indexOf("investment")!=-1){$scope.opencomparebuypop();$scope.maintabform(6);}else if(currentURL.indexOf("pension")!=-1){$scope.opencomparebuypop();$scope.maintabform(7);}else if(currentURL.indexOf("travel")!=-1){$scope.opencomparebuypop();$scope.maintabform(8);}
$scope.$root.showmainloader=false;$scope.$root.quotesheader=false;$scope.$root.showHeaderClass="display-visible";$scope.$root.showNavbar=true;$rootScope.showHeader="show";$scope.$root.scrollhide="home-bg bodymain";$scope.PolicyMaturity={minValue:15,maxValue:25,options:{floor:5,ceil:40,showTicksValues:5}};$scope.lastclaimlist=[{text:"0 %",value:"Yes~0"},{text:"20 %",value:"No~20"},{text:"25 %",value:"No~25"},{text:"35 %",value:"No~35"},{text:"45 %",value:"No~45"},{text:"50 %",value:"No~50"},];$scope.regyearlist=[];for(i=1;i<=14;i++){$scope.regyearlist.push({value:$scope.year-i,text:$scope.year-i});}
$scope.bikeregyearlist=[{value:"2007",text:"2007"},{value:"2008",text:"2008"},{value:"2009",text:"2009"},{value:"2010",text:"2010"},{value:"2011",text:"2011"},{value:"2012",text:"2012"},{value:"2013",text:"2013"},{value:"2014",text:"2014"},{value:"2015",text:"2015"},];$scope.previoussearchshow=true;$timeout(function(){$scope.showchatmsg=true;},2500);$scope.previoussearchtime=$scope.date.getDate()+"-"+($scope.date.getMonth()+1)+"-"+$scope.date.getFullYear();var temp1=$location.absUrl().split("&");console.log($location.absUrl());console.log(temp1);$scope.$root.showloader=false;if(currentURL.indexOf("productpop")!=-1){$scope.opencomparebuypop();}
for(var i=0;i<temp1.length;i++){if(temp1[i].indexOf("utm_source")!=-1){$scope.utmsourcedata=temp1[i].split("=")[1];}
if(temp1[i].indexOf("utm_medium")!=-1){$scope.utmmediumdata=temp1[i].split("=")[1];}
if(temp1[i].indexOf("utm_campaign")!=-1){$scope.utmcampaigndata=temp1[i].split("=")[1];}
if(temp1[i].indexOf("utm_term")!=-1){$scope.utmtermdata=temp1[i].split("=")[1];}
if(temp1[i].indexOf("partnerleadid")!=-1){$scope.utmpartnerleadiddata=temp1[i].split("=")[1];}
if(temp1[i].indexOf("partneragentid")!=-1){$scope.utmpartneragentiddata=temp1[i].split("=")[1];}}
var temp1=$location.absUrl().split("?");console.log(temp1);console.log(temp1.length);if(temp1.length==2){if(temp1[1].toLowerCase()=="prod=health"){$scope.maintabform(3);}else if(temp1[1].toLowerCase()=="prod=healthmvc"){$scope.healthmvc=true;$scope.maintabform(3);}else if(temp1[1].toLowerCase()=="prod=term"){$scope.maintabform(4);}else if(temp1[1].toLowerCase()=="prod=child"){$scope.maintabform(5);}else if(temp1[1].toLowerCase()=="prod=investment"){$scope.maintabform(6);}else if(temp1[1].toLowerCase()=="prod=pension"){$scope.maintabform(7);}else if(temp1[1].toLowerCase()=="prod=bike"){$scope.maintabform(2);}else{console.log($scope.ProposerName);var temp2=temp1[1].split("=");if(temp2[0].toLowerCase()=="shareid"){console.log("yes");$scope.showrefferedpop=true;}}}
console.log(temp1);flaclaim($scope.year-6);console.log("Himanshu");};$scope.checkcarerror=function(flag){$scope.carlabel=true;$scope.carerror=false;if($scope.selectedItem==null||$scope.selectedItem==""||$scope.selectedItem==undefined){flag=1;$scope.carlabel=false;$scope.carerror=true;}else{$scope.carerror=false;$scope.carlabel=true;$scope.formcarwidget=$scope.selectedItem.ModelName;var temp1=$scope.selectedItem.ModelName.split(",");if(temp1[1].trim()=="DIESEL"){$scope.carkitstatus=undefined;$scope.carfuelcontainer=false;$scope.formddlkit="Kit0";$scope.$root.entercngkitvalue=0;$scope.$root.carfuelcontainervalue=false;}else if(temp1[1].trim()=="CNG"){$scope.carkitstatus=undefined;$scope.carfuelcontainer=false;$scope.$root.carfuelcontainervalue=false;$scope.formddlkit="Kit0";$scope.carkitstatus="Kit2";}else if(temp1[1].trim()=="LPG"){$scope.carkitstatus=undefined;$scope.carcnglpg=$scope.carpoplpg;$scope.carfuelcontainer=false;$scope.formddlkit="Kit0";$scope.carkitstatus="Kit2";}else if(temp1[1].trim()=="PETROL"){$scope.carkitstatus=undefined;$scope.carcnglpg=$scope.carpoppetrol;$scope.carfuelcontainer=true;}}};function flaclaim(yom,flag){var arrNeverNCB=[50,50,50,50,45,35,25,20,0];var arrYearNCB=[0,20,25,35,45,50,50,50,50];var monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];var bool=true;var year=$scope.year.toString();$scope.regyear=[];var vddlregyear=0;if(yom==year.trim()){var val="No~"+arrNeverNCB[vddlregyear-1];var option={value:val,text:"Never"};$scope.regyear.push(option);}else if(yom=="0"){var option={value:"Claim Last Taken",text:"Claim Last Taken"};$scope.regyear.push(option);}else{var findYear=year-yom;var val="No~"+arrNeverNCB[vddlregyear+1];var option={value:val,text:"Never"};$scope.regyear.push(option);var k=2;var s=1;var j=0;for(var i=findYear-1;i>=0;i--){if(bool==true){var val="Yes~"+arrYearNCB[0];var text="Less than"+" "+(findYear-i)+" "+"Year ago";var option={value:val,text:text};$scope.regyear.push(option);bool=false;}else{var val="No~"+arrYearNCB[k-2];if($scope.date.getMonth()!=0){var text=monthNames[$scope.date.getMonth()]+" "+(year-(s+1))+" "+"to"+" "+monthNames[$scope.date.getMonth()-1]+" "+(year-(j+1));}else{var text=monthNames[$scope.date.getMonth()]+" "+(year-(s+1))+" "+"to"+" "+monthNames[11]+" "+(year-(s+1));}
if(year-(s+1)!=year-6){var option={value:val,text:text};$scope.regyear.push(option);}
s++;j++;bool=false;}
k++;}}
$scope.regyear1=$scope.regyear;}
function bikecitylist(){if($scope.bikecitystate.length==0||!$scope.bikecitystate){$scope.bikertoapilist=CommonService.bikertoservice(undefined,undefined,$scope);$scope.bikertoapilist.then(function(result){result.data=angular.fromJson(result.data);$scope.bikertoapidata=result.data;for(var i=0;i<$scope.bikertoapidata.length;i++){var temp={cityid:$scope.bikertoapidata[i].CityId,stateid:$scope.bikertoapidata[i].StateId,RTOCode:$scope.bikertoapidata[i].RTOCode,cityname:$scope.bikertoapidata[i].RTOCity};$scope.bikecitystate.push(temp);}},function(response){ServiceRespnse(response);});}}
function bikealldatalist(){if($scope.bikecitystates.length==0||!$scope.bikecitystates){$scope.bikemakemodelapilist=CommonService.bikemakemodelservice($scope);$scope.bikemakemodelapilist.then(function(result){result.data=angular.fromJson(result.data);$scope.bikemakemodelapidata=result.data;for(var i=0;i<$scope.bikemakemodelapidata.length;i++){var temp={bikename:$scope.bikemakemodelapidata[i].ModelName,makeid:$scope.bikemakemodelapidata[i].MakeId,modelid:$scope.bikemakemodelapidata[i].ModelId};$scope.bikecitystates.push(temp);}},function(response){ServiceRespnse(response);});}}
function citylist(){if($scope.citystate.length==0){$scope.carupdatedrtoapilist=CommonService.carupdatedrtoservice($scope);$scope.carupdatedrtoapilist.then(function(result){result.data=angular.fromJson(result.data);$scope.citystate=result.data;},function(response){ServiceRespnse(response);});}}
function carlist(){if($scope.carlistdata.length==0){$scope.carupdatedmakemodelapilist=CommonService.carupdatedmakemodelservice($scope);$scope.carupdatedmakemodelapilist.then(function(result){result.data=angular.fromJson(result.data);$scope.carlistdata=result.data;},function(response){ServiceRespnse(response);});}}
$scope.carclaimchange=function(){console.log($scope.carclaim);$scope.popcarclaimerror=false;if($scope.carclaim==undefined){$scope.popcarclaimerror=true;flag=1;}else{$scope.popcarclaimerror=false;if($scope.carreg!=undefined){var ncbyear=$scope.year-$scope.carreg;if(ncbyear>6){ncbyear=6;$scope.carrequiredncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];}else{if(ncbyear!=undefined)$scope.carrequiredncb=$scope.lastclaimlist[ncbyear].value.split("~")[1];}
if($scope.carclaim=="No~50"){$scope.forcarwidgetpercent=$scope.lastclaimlist[ncbyear-1].value;$scope.carclaimedncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];}else if($scope.carclaim=="Yes~0"){$scope.forcarwidgetpercent=$scope.lastclaimlist[0].value;$scope.requiredncbvalue=0;$scope.carclaimedncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[0].value.split("~")[1];}else if($scope.carclaim=="No~20"){$scope.forcarwidgetpercent=$scope.lastclaimlist[0].value;$scope.carclaimedncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[1].value.split("~")[1];}else if($scope.carclaim=="No~25"){$scope.forcarwidgetpercent=$scope.lastclaimlist[1].value;$scope.carclaimedncb=$scope.lastclaimlist[1].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[2].value.split("~")[1];}else if($scope.carclaim=="No~35"){$scope.forcarwidgetpercent=$scope.lastclaimlist[2].value;$scope.carclaimedncb=$scope.lastclaimlist[2].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[3].value.split("~")[1];}else if($scope.carclaim=="No~45"){$scope.forcarwidgetpercent=$scope.lastclaimlist[3].value;$scope.carclaimedncb=$scope.lastclaimlist[3].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[4].value.split("~")[1];}
if($scope.forcarwidgetpercent=="Yes~0"&&$scope.carclaim=="No~50"){$scope.forcarwidgetpercent="No~0";}}}};$scope.carkitchange=function(){$scope.popcarcnglpgerror=false;if($scope.carkitstatus==undefined){$scope.popcarcnglpgerror=true;flag=1;}else{$scope.popcarcnglpgerror=false;$scope.formddlkit=$scope.carkitstatus;if($scope.carkitstatus=="Kit3"){$scope.$root.carfuelcontainervalue=true;$scope.cngkitdata="True";$scope.cngkitprice=20000;}else{$scope.$root.carfuelcontainervalue=false;$scope.cngkitdata="False";$scope.cngkitprice=0;}}};$scope.checkcngvalueerror=function(){if($scope.$root.entercngkitvalue<0){$scope.popcarcnglpgvalueerror=true;}else{$scope.popcarcnglpgvalueerror=false;}};$scope.carregyear=function(){if($scope.carreg!=undefined){$scope.popcarregerror=false;$scope.forcarreg=$scope.carreg;var flag=0;var lastclaimtemp=$scope.lastclaimtaken1;var temparray=[];var yeargap=$scope.year-$scope.carreg;for(var i=0;i<=yeargap;i++){if(lastclaimtemp.length>=i){temparray.push(lastclaimtemp[i]);}}
$scope.lastclaimtaken=temparray;if($scope.carbreakingexp==1&&$scope.carbreaking==0){$scope.showcarncb=false;}else{$scope.showcarncb=true;}}else{$scope.popcarregerror=true;}}
$scope.getcarquotes=function(){if($scope.newcarshow==false){$scope.carreg=$scope.date.getFullYear();$scope.carclaim="Yes~0";$scope.carbreakingexp=0;$scope.carbreaking=1;}
var flag=0;if($scope.carclaim==undefined&&($scope.carbreakingexp!=1||$scope.carbreaking==1)){$scope.popcarclaimerror=true;flag=1;}else{$scope.popcarclaimerror=false;}
if($scope.carkitstatus==undefined&&$scope.carfuelcontainer==true){$scope.popcarcnglpgerror=true;flag=1;}else{$scope.popcarcnglpgerror=false;}
if($scope.carreg==undefined){$scope.popcarregerror=true;flag=1;}else{$scope.popcarregerror=false;}
if($scope.selectedItem==null){$scope.carerror=true;flag=1;}else{$scope.carerror=false;}
if($scope.selectedItem1==null&&$scope.byreg==false){$scope.cityerror=true;flag=1;}else{$scope.cityerror=false;}
if($scope.$root.entercngkitvalue>=5000&&$scope.$root.entercngkitvalue<=50000){$scope.popcarcnglpgvalueerror=false;}else{$scope.popcarcnglpgvalueerror=true;}
if($scope.usermobile!=undefined&&ValidationFactory.mobilevalidate($scope.usermobile)=="True"){$scope.popmobileerror=false;}else{flag=1;$scope.popmobileerror=true;}
if($scope.$root.carfuelcontainervalue==true&&($scope.$root.entercngkitvalue==undefined||$scope.$root.entercngkitvalue>50000||$scope.$root.entercngkitvalue<5000)){flag=1;$scope.popcarcnglpgvalueerror=true;}
if($scope.byreg==true&&$scope.fastlanedata!=undefined){$scope.ProductType="Car";if($scope.selectedItem.ModelName!=$scope.fastlanedata.MakeModel&&parseInt($scope.carreg)!=$scope.fastlanedata.ManufactureYear){$scope.fastlanedata.MakeModel=$scope.selectedItem.ModelName;$scope.fastlanedata.MakeModelIds=$scope.selectedItem.ModelId;$scope.fastlanedata.ManufactureYear=parseInt($scope.carreg);var updatedata=CommonService.UpdateVahicleLookup($scope);updatedata.then(function(pl){updatedata=pl.data;},function(response){ServiceRespnse(response);});}}
if(flag==0&&$scope.popcarregerror1!=true){$scope.showbtncarloader=true;if($scope.byreg!=true){$scope.ncblogic();}else if($scope.carbreakingexp!=1&&$scope.carbreaking!=0){$scope.forcarwidgetpercent=$scope.carclaim;$scope.carclaimedncb=$scope.carclaim.split("~")[1];if($scope.carclaimedncb==0){$scope.carrequiredncb=20;}else if($scope.carclaimedncb==20){$scope.carrequiredncb=25;}else if($scope.carclaimedncb==25){$scope.carrequiredncb=35;}else if($scope.carclaimedncb==35){$scope.carrequiredncb=45;}else if($scope.carclaimedncb==45){$scope.carrequiredncb=50;}
if($scope.fastlaneresult!=undefined){if($scope.fastlaneresult.ManufactureYear!=$scope.carreg){$scope.Registrationdate=undefined;}}}
$scope.checkcarbreaking1();if($scope.carbreaking==0&&$scope.carbreakingexp==1){var breaking=91;}else if($scope.carbreaking==0&&$scope.carbreakingexp==0){var breaking=90;}else{var breaking=0;}
var data={userdetails:{UtmSource:$scope.UtmSource,UtmCompaign:$scope.utmCompaign,UtmTerm:$scope.utmTerm,UtmMedium:$scope.utmMedium,RegistrationNo:$scope.carregnumber,VechileDetails:$scope.selectedItem,CngKitPrice:$scope.$root.entercngkitvalue,ProductName:"Car",CityList:$scope.selectedItem1,ClaimPercent:$scope.carclaim,CngLpgKit:$scope.carkitstatus,RegYear:$scope.carreg,EngineNo:$scope.carengineno,ChasisNo:$scope.carchasisno,UserName:$scope.username,usermobile:$scope.usermobile,UserEmail:$scope.useremail,},};console.log(data);var resultdata=[];resultdata.push(data);var saveRequirementData=CommonService.saveCarRequirementData($scope,globals);$scope.userProduct=4;saveRequirementData.then(function(pl){$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=angular.fromJson(angular.toJson(pl.data.Message));if($scope.IGQuoteId>0){$scope.leadCreationfn(4);}else{$scope.showbtncarloader=false;}},function(response){ServiceRespnse(response);});}};$scope.leadCreationfn=function(id){localStorage.usermobile=$scope.usermobile;if(id==0){$scope.beenhereOTPcheck=true;}
if(id==4||id==8){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="123";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="123";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="123";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="123";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=id;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=id;}else if(id==3){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGTERM2016";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@TERM@2016";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGTERM2016";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@TERM@2016";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=3;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=3;}else if(id==2){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGHEALTH2016";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@HEALTH@2016";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGHEALTH2016";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@HEALTH@2016";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=2;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=2;}else if(id==5){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGINVT17";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@INVT@217";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGINVT17";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@INVT@217";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=5;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=5;}else if(id==6){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGPENSION17";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@IG@PENSION@17@217";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGPENSION17";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@IG@PENSION@17@217";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=6;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=6;}else if(id==7){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGCHILD17";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@INVTIG@CHILD@17217";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGCHILD17";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@INVTIG@CHILD@17217";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=7;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=7;}else if(id==1){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGTRAVEL";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@TRAVEL";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGTRAVEL";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@TRAVEL";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=1;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=1;}
$scope.redirectID=id;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.leads.lead[0].leadId=$scope.IGQuoteId;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.MobileNo=$scope.usermobile;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.Name="user";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.EmailId="2018@xyz.com";$scope.otpFn(1,id);};$scope.otpBack=function(fl){$scope.showotpbox=false;$scope.showotpboxflag=1;$scope.showbtnchildloader=false;if(fl==undefined){$location.search("OTP",null);window.history.back();}
if($scope.showotpboxbybeenhere==true){$scope.showotpboxbybeenhere=false;$scope.beenHereBtnLoader=false;$scope.getmobileno=true;$interval.cancel($scope.time);}
if($scope.userProduct==1){$rootScope.travelsecondpop=true;$rootScope.productpop="bounceInRight display-visible";}else if($scope.userProduct==2){$rootScope.popuphealthpage=true;$rootScope.productpop="bounceInRight display-visible";}else if($scope.userProduct==3){$rootScope.popuptermpage=true;$rootScope.productpop="bounceInRight display-visible";}else if($scope.userProduct==4){$rootScope.popupcarpage=true;$rootScope.productpop="bounceInRight display-visible";}else if($scope.userProduct==5){$rootScope.popupchildpage=true;$rootScope.productpop="bounceInRight display-visible";}else if($scope.userProduct==6){$rootScope.popupinvestmentpage=true;$rootScope.productpop="bounceInRight display-visible";}else if($scope.userProduct==7){$rootScope.popuppensionpage=true;$rootScope.productpop="bounceInRight display-visible";}else if($scope.userProduct==8){$rootScope.popupbikepage=true;$rootScope.productpop="bounceInRight display-visible";}else if($scope.userProduct==9){$rootScope.popupcovidpage=true;$rootScope.productpop="bounceInRight display-visible";}};$scope.otpFn=function(flag,id){if(flag==2){$scope.resendFlag=true;}else{$scope.resendFlag=false;}
$scope.showbtnleadloader=true;var resendFlag=CommonService.SendOTPReboot($scope,globals);resendFlag.then(function(result){console.log(result);var token=result.data.TokenId;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.OTPValidation.Tokenid=token;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.OTPValidation.Mobile=$scope.usermobile;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.OriginPageid=0;$scope.showbtnleadloader=false;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.IsCallBackRequire="false";$scope.wrongMobile=false;$scope.showResend=false;if(result.data.IsVerified==true){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.Tokenid=token;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.MobileNo=$scope.usermobile;$scope.leadcreationfn4(token,id);}else if(result.data.Message=="success"){$scope.OTP0=true;$scope.showotpbox=true;$scope.showmobile=false;$scope.showcity=false;$scope.showform1=false;$scope.showform2=true;$scope.btnnootp=false;$scope.showbtnleadloader=false;stopLoader();$rootScope.popupOTPPage=true;$location.search("OTP");if(result.data.OTPResendTimer!=undefined&&result.data.OTPResendTimer!=""){var otpResendTimer=result.data.OTPResendTimer*1000;}else{var otpResendTimer=10000;}
$scope.resendtime=parseInt(result.data.OTPResendTimer);resendTimer();$timeout(function(){$scope.showResend=true;},otpResendTimer);}else if(result.data.Message=="Proceed to the quotes page without OTP verification"){if(id==1){$window.location.href=QuotePageURL+"Travel?CPID="+btoa($scope.IGQuoteId);$scope.showbtntravelloader=false;}else if(id==2){if($scope.IsRenewal){window.location.href=QuotePageURL+"Renewal/"+btoa($scope.renewalClaimPolicyNo)+"/"+btoa($scope.IGQuoteId);}
else{$scope.showbtnhealthloader=false;$window.location.href=QuotePageURL+"Health?CPID="+btoa($scope.IGQuoteId);}}else if(id==3){if($scope.termshow==true){$scope.showbtntermloader=false;$window.location.href=QuotePageURL+"Term?CPID="+btoa($scope.IGQuoteId);}else{$scope.showbtntermloader=false;$window.location.href=QuotePageURL+"Critical?CPID="+btoa($scope.IGQuoteId);}}else if(id==4){$scope.showbtncarloader=false;$window.location.href=QuotePageURL+"Car?CPID="+btoa($scope.IGQuoteId);}else if(id==5){$scope.showbtninvestloader=false;$window.location.href=QuotePageURL+"Investment?CPID="+btoa($scope.IGQuoteId);}else if(id==6){$scope.showbtnpensionloader=false;$window.location.href=QuotePageURL+"Pension?CPID="+btoa($scope.IGQuoteId);}else if(id==7){$scope.showbtnchildloader=false;$window.location.href=QuotePageURL+"Child?CPID="+btoa($scope.IGQuoteId);}else if(id==8){$scope.showbtnbikeloader=false;$window.location.href=QuotePageURL+"Twowheeler?CPID="+btoa($scope.IGQuoteId);}}else{$scope.wrongMobile=true;$scope.showbtntravelloader=false;$scope.showbtnhealthloader=false;$scope.showbtntermloader=false;$scope.showbtncarloader=false;$scope.showbtnchildloader=false;$scope.showbtnbikeloader=false;$scope.showbtninvestloader=false;$scope.showbtnpensionloader=false;$scope.wrongMobileMsg=result.data.Message;}},function(response){ServiceRespnse(response);});};function stopLoader(){if($scope.userProduct==1){$scope.showbtntravelloader=false;$rootScope.travelsecondpop=false;}else if($scope.userProduct==2){$scope.showbtnhealthloader=false;$rootScope.popuphealthpage=false;}else if($scope.userProduct==3){$scope.showbtntermloader=false;$rootScope.popuptermpage=false;}else if($scope.userProduct==4){$scope.showbtncarloader=false;$rootScope.popupcarpage=false;}else if($scope.userProduct==5){$scope.showbtnchildloader=false;$rootScope.popupchildpage=false;}else if($scope.userProduct==6){$scope.showbtninvestloader=false;$rootScope.popupinvestmentpage=false;}else if($scope.userProduct==7){$scope.showbtnpensionloader=false;$rootScope.popuppensionpage=false;}else if($scope.userProduct==8){$scope.showbtnbikeloader=false;$rootScope.popupbikepage=false;}else if($scope.userProduct==9){$scope.showbtnhealthloader=false;$rootScope.popupcovidpage=false;}}
function resendTimer(){$scope.time=$interval(function(){$scope.resendtime=$scope.resendtime-1;if($scope.resendtime<=0){$interval.cancel($scope.time);}},1000);}
$scope.leadcreationfn4=function(value,id){var id=$scope.redirectID;var response=CommonService.GetMobileVerificationWithOTPRequest1($scope.leadcreaterequestdata);response.then(function(result){console.log(result);result.data=[angular.fromJson(result.data)];$scope.showbtnleadloader=false;if(result.data[0].data.Error.ErrorCode=="0"){$scope.investfirstpop=false;$scope.showotpbox=false;$scope.showmobile=false;$scope.showcity=true;$scope.btnnootp=false;if(id==1){$window.location.href=QuotePageURL+"Travel?CPID="+btoa($scope.IGQuoteId);$scope.showbtntravelloader=false;}else if(id==2){if($scope.IsRenewal){window.location.href=QuotePageURL+"Renewal/"+btoa($scope.renewalClaimPolicyNo)+"/"+btoa($scope.IGQuoteId);}
else{$scope.showbtnhealthloader=false;$window.location.href=QuotePageURL+"Health?CPID="+btoa($scope.IGQuoteId);}}else if(id==3){if($scope.termshow==true){$scope.showbtntermloader=false;$window.location.href=QuotePageURL+"Term?CPID="+btoa($scope.IGQuoteId);}else{$scope.showbtntermloader=false;$window.location.href=QuotePageURL+"Critical?CPID="+btoa($scope.IGQuoteId);}}else if(id==4){$scope.showbtncarloader=false;$window.location.href=QuotePageURL+"Car?CPID="+btoa($scope.IGQuoteId);}else if(id==5){$scope.showbtninvestloader=false;$window.location.href=QuotePageURL+"Investment?CPID="+btoa($scope.IGQuoteId);}else if(id==6){$scope.showbtnpensionloader=false;$window.location.href=QuotePageURL+"Pension?CPID="+btoa($scope.IGQuoteId);}else if(id==7){$scope.showbtnchildloader=false;$window.location.href=QuotePageURL+"Child?CPID="+btoa($scope.IGQuoteId);}else if(id==8){$scope.showbtnbikeloader=false;$window.location.href=QuotePageURL+"Twowheeler?CPID="+btoa($scope.IGQuoteId);}}},function(response){ServiceRespnse(response);});};$scope.otpKey=function(flag,event){if(flag==0&&$scope.userOTP0!=undefined&&$scope.userOTP0!=null&&$scope.userOTP!=""){$scope.OTP1=true;$scope.userOTP01=0;}else if(flag==1&&$scope.userOTP1!=undefined&&$scope.userOTP1!=null&&$scope.userOTP1!=""){$scope.OTP2=true;$scope.userOTP11=0;}else if(flag==2&&$scope.userOTP2!=undefined&&$scope.userOTP2!=null&&$scope.userOTP2!=""){$scope.OTP3=true;$scope.userOTP21=0;}else if(flag==3&&$scope.userOTP3!=undefined&&$scope.userOTP3!=null&&$scope.userOTP3!=""){$scope.userOTP31=0;}else if(flag==1&&event.keyCode===8&&$scope.userOTP1==undefined){if($scope.userOTP11==1){$scope.userOTP11=0;$scope.OTP0=true;}else{$scope.userOTP11=1;}}else if(flag==2&&event.keyCode===8&&$scope.userOTP2==undefined){if($scope.userOTP21==1){$scope.userOTP21=0;$scope.OTP1=true;}else{$scope.userOTP21=1;}}else if(flag==3&&event.keyCode===8&&$scope.userOTP3==undefined){if($scope.userOTP31==1){$scope.userOTP31=0;$scope.OTP2=true;}else{$scope.userOTP31=1;}}};$scope.submitleadform=function(){if($scope.userOTP0!=undefined&&$scope.userOTP1!=undefined&&$scope.userOTP2!=undefined&&$scope.userOTP3!=undefined){$scope.userOTP=$scope.userOTP0.toString()+$scope.userOTP1.toString()+$scope.userOTP2.toString()+$scope.userOTP3.toString();$scope.wrongotpmsgshow=false;}else{$scope.wrongotpmsgshow=true;}
if($scope.userOTP==undefined||$scope.userOTP==""||$scope.userOTP==null){$scope.wrongotpmsgshow=true;}else{$scope.wrongotpmsgshow=false;$scope.showbtnleadloader=true;$scope.leadcreationfn7();}};$scope.UpdateMobileNo=function(){$scope.showotpbox=false;$scope.showbtnchildloader=false;};$scope.leadcreationfn7=function(flag){$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.OTPValidation.OTP=$scope.userOTP;var response=CommonService.GetMobileVerificationWithOTPRequest2($scope.otpcreaterequestdata);response.then(function(result){console.log(result);result.data=[angular.fromJson(result.data)];$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.Tokenid=result.data[0].data.Token.Tokenid;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.MobileNo=$scope.usermobile;if(result.data[0].data.Error.ErrorCode==1){$scope.wrongotpmsg="Enter Correct OTP";$scope.wrongotpmsgshow=true;$scope.showbtnloader=false;$scope.showbtnleadloader=false;$scope.otpcodeerror=true;}else{$scope.wrongotpmsgshow=false;$scope.leadcreationfn4(result.data,flag);}},function(response){ServiceRespnse(response);});};$scope.IGchilddateKey=function(flag,event){if(flag==1&&$scope.IGchilddate!=undefined&&$scope.IGchilddate!=null&&$scope.IGchilddate!=""&&$scope.IGchilddate.length==2){$scope.mm2=true;$scope.usermm01=0;}else if(flag==2&&$scope.IGchildmonth!=undefined&&$scope.IGchildmonth!=null&&$scope.IGchildmonth!=""&&$scope.IGchildmonth.length==2){$scope.mm3=true;$scope.usermm11=0;}else if(flag==3&&$scope.IGchildyear!=undefined&&$scope.IGchildyear!=null&&$scope.IGchildyear!=""&&$scope.IGchildyear.length==4){$scope.usermm21=0;}else if(flag==2&&event.keyCode===8&&$scope.IGchildmonth==undefined){if($scope.usermm11==1){$scope.usermm11=0;$scope.mm1=true;}else{$scope.usermm11=1;}}else if(flag==3&&event.keyCode===8&&$scope.IGchildyear==undefined){if($scope.usermm21==1){$scope.usermm21=0;$scope.mm2=true;}else{$scope.usermm21=1;}}};$scope.IGdateKey=function(flag,event){if(flag==1&&$scope.IGdate!=undefined&&$scope.IGdate!=null&&$scope.IGdate!=""&&$scope.IGdate.length==2){$scope.dd2=true;$scope.userdd01=0;}else if(flag==2&&$scope.IGmonth!=undefined&&$scope.IGmonth!=null&&$scope.IGmonth!=""&&$scope.IGmonth.length==2){$scope.dd3=true;$scope.userdd11=0;}else if(flag==3&&$scope.IGyear!=undefined&&$scope.IGyear!=null&&$scope.IGyear!=""&&$scope.IGyear.length==4){$scope.userdd21=0;}else if(flag==2&&event.keyCode===8&&$scope.IGmonth==undefined){if($scope.userdd11==1){$scope.userdd11=0;$scope.dd1=true;}else{$scope.userdd11=1;}}else if(flag==3&&event.keyCode===8&&$scope.IGyear==undefined){if($scope.userdd21==1){$scope.userdd21=0;$scope.dd2=true;}else{$scope.userdd21=1;}}};$scope.PopulateClaimddl=function(){$scope.popcarregerror=false;$scope.carclaim=undefined;$scope.carclaimtext1=undefined;var d=new Date();var yyyy=d.getFullYear();var nextyy=d.getFullYear()+1;var prevyy=d.getFullYear()-1;var mm=d.getMonth()+1;var dd=d.getDate();var nextdd=d.getDate()+1;if(dd<10){dd='0'+dd}
if(mm<10){mm='0'+mm}
if($scope.byreg==true){if($scope.claimtaken=="No~50"){var ncbyear=$scope.year-$scope.carreg;if(ncbyear>6){ncbyear=6;}
$scope.carclaim=$scope.lastclaimlist[ncbyear-1].value;$scope.carclaimtext=$scope.lastclaimlist[ncbyear-1].text;$scope.forcarwidgetpercent=$scope.carclaim;}else if($scope.claimtaken=="Yes~0"){$scope.carclaim=$scope.lastclaimlist[0].value;$scope.forcarwidgetpercent=$scope.carclaim;$scope.carclaimtext=$scope.lastclaimlist[0].text;}else if($scope.claimtaken=="No~20"){$scope.carclaim=$scope.lastclaimlist[0].value;$scope.forcarwidgetpercent=$scope.carclaim;$scope.carclaimtext=$scope.lastclaimlist[0].text;}else if($scope.claimtaken=="No~25"){$scope.carclaim=$scope.lastclaimlist[1].value;$scope.forcarwidgetpercent=$scope.carclaim;$scope.carclaimtext=$scope.lastclaimlist[1].text;}else if($scope.claimtaken=="No~35"){$scope.carclaim=$scope.lastclaimlist[2].value;$scope.forcarwidgetpercent=$scope.carclaim;$scope.carclaimtext=$scope.lastclaimlist[2].text;}else if($scope.claimtaken=="No~45"){$scope.carclaim=$scope.lastclaimlist[3].value;$scope.forcarwidgetpercent=$scope.carclaim;$scope.carclaimtext=$scope.lastclaimlist[3].text;}
if($scope.forcarwidgetpercent=="Yes~0"&&$scope.claimtaken=="No~50"){$scope.forcarwidgetpercent="No~0"}}}
$scope.PopulateNCB=function(){if($scope.claimtaken!=undefined){$scope.regerror=false;}else{$scope.regerror=true;}};$scope.checkageerror=function(flag){if($scope.dt==undefined){$scope.ageerror=true;flag=1;$scope.ageerrortext="Enter Age Between 18 - 100";}else if($scope.dt<18||$scope.dt>100){$scope.ageerror=true;flag=1;$scope.ageerrortext="Age should be between 18 - 100";}else{$scope.ageerror=false;$scope.ageerrortext="";}};$scope.checkadulterror=function(flag){if($scope.selectedadult==undefined||$scope.selectedadult==""||parseInt($scope.selectedadult)>2||$scope.selectedadult=="0"){$scope.adulterror=true;flag=1;$scope.adulterrortext="Enter no of adult between 1 or 2";}else{$scope.adulterror=false;$scope.adulterrortext="";}};$scope.checkchilderror=function(flag){if($scope.selectedchild==undefined||$scope.selectedchild==""||parseInt($scope.selectedchild)>4){$scope.childerror=true;flag=1;$scope.childerrortext="Enter no of child (0 - 4)";}else{$scope.childerror=false;$scope.childerrortext="";}};$scope.checkcityerrors=function(flag){$scope.cityerror=false;$scope.citylabel=true;if($scope.selectedItem2==null){$scope.cityerror=true;flag=1;}else{$scope.cityerror=false;$scope.formcity=$scope.selectedItem2.cityname;$scope.cityid=$scope.selectedItem2.cityid.split(",")[0].toString();if($scope.cityid!=undefined){$scope.PincodeArray=[];var pincode=CommonService.GetPincodeList($scope.cityid);pincode.then(function(result){$scope.PincodeArray=angular.fromJson(result.data);$scope.pincode=undefined;$scope.PincodeText=undefined;});}}};$scope.checkbikertoerror=function(flag){console.log($scope.selectedbikerto);$scope.bikertoerror=false;if(($scope.selectedbikerto==null||$scope.selectedbikerto==""||$scope.selectedbikerto==undefined)&&errorflag1==0){$scope.bikertoerror=true;}else{errorflag1=0;$scope.bikertoerror=false;$scope.formbikerto=$scope.selectedbikerto.cityname;}};$scope.checkbikelisterror=function(flag){console.log($scope.selectedbikemmv);if($scope.fastlaneflag!=true){if(($scope.selectedbikemmv==null||$scope.selectedbikemmv==undefined||$scope.selectedbikemmv=="")&&errorflag==0){$scope.biketexterror=true;}else{errorflag=0;$scope.biketexterror=false;$scope.formbikewidget=$scope.selectedbikemmv.bikename;}}};$scope.bikeregyear=function(flag){console.log($scope.bikereg);if($scope.bikereg==undefined){$scope.popbikeregerror=true;}else{$scope.popbikeregerror=false;$scope.formbikereg=$scope.bikereg;var regyeartemp=$scope.regyear1;var temparray=[];var yeargap=$scope.year-$scope.bikereg;for(var i=0;i<=yeargap;i++){if(regyeartemp.length>=i){temparray.push(regyeartemp[i]);}}
$scope.regyear=temparray;$scope.showbikelastclaim=true;if(flag!=1){$scope.bikelastclaim=undefined;}}};$scope.bikepolicyexp=function(){if($scope.bikeexpiredpol==undefined){$scope.popbikepolexperror=true;$scope.showbikelastclaim=false;}else{$scope.popbikepolexperror=false;$scope.formbikelblpolexp=$scope.bikeexpiredpol;if($scope.bikeexpiredpol==0||$scope.bikeexpiredpol==90){$scope.showbikelastclaim=true;}else{$scope.showbikelastclaim=false;}}};$scope.bikelastclaimfn=function(){if($scope.bikelastclaim==undefined){$scope.popbikelastclaimerror=true;}else{$scope.popbikelastclaimerror=false;$scope.formbikewidgetpercent=$scope.bikelastclaim;if($scope.bikelastclaim=="No~50"){var ncbyear=$scope.year-$scope.bikereg;if(ncbyear>6){ncbyear=6;}
$scope.formbikewidgetpercent=$scope.lastclaimlist[ncbyear-1].value;if(ncbyear==6){var nextncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];}else{var nextncb=$scope.lastclaimlist[ncbyear].value.split("~")[1];}
var ncbclaimtaken="false";}else if($scope.bikelastclaim=="Yes~0"){$scope.formbikewidgetpercent=$scope.lastclaimlist[0].value;var nextncb=$scope.lastclaimlist[0].value.split("~")[1];var ncbclaimtaken="true";}else if($scope.bikelastclaim=="No~20"){$scope.formbikewidgetpercent=$scope.lastclaimlist[0].value;var nextncb=$scope.lastclaimlist[1].value.split("~")[1];var ncbclaimtaken="true";}else if($scope.bikelastclaim=="No~25"){$scope.formbikewidgetpercent=$scope.lastclaimlist[1].value;var nextncb=$scope.lastclaimlist[2].value.split("~")[1];var ncbclaimtaken="true";}else if($scope.bikelastclaim=="No~35"){$scope.formbikewidgetpercent=$scope.lastclaimlist[2].value;var nextncb=$scope.lastclaimlist[3].value.split("~")[1];var ncbclaimtaken="true";}else if($scope.bikelastclaim=="No~45"){$scope.formbikewidgetpercent=$scope.lastclaimlist[3].value;var nextncb=$scope.lastclaimlist[4].value.split("~")[1];var ncbclaimtaken="true";}
if($scope.formbikewidgetpercent=="Yes~0"&&$scope.bikelastclaim=="No~50"){$scope.formbikewidgetpercent="No~0";}}};function getlinkbikepop(){$scope.showbikepolicyexpired=true;$scope.$root.popupbikepage=true;$scope.$root.scrollhide="scrollhides";}
$scope.checkgender=function(gen){if(gen==0){$scope.maleclass="lmbutton activebt";$scope.femaleclass="lmbutton";$scope.gender="M";$scope.formgender="M";}else if(gen==1){$scope.maleclass="lmbutton";$scope.femaleclass="lmbutton  activebt";$scope.gender="F";$scope.formgender="F";}};$scope.checksmoker=function(gen){if(gen==0){$scope.nosmokeclass="lmbutton activebt";$scope.smokeclass="lmbutton";$scope.smoker="no";$scope.formtobacco="False";}else if(gen==1){$scope.nosmokeclass="lmbutton";$scope.smokeclass="lmbutton activebt";$scope.smoker="yes";$scope.formtobacco="True";}};$scope.localStorage=function(flag,item){var revisitflag=CommonService.revisit($scope,globals,item.IGQuoteId);revisitflag.then(function(data){$window.location.href=globals.RedirectURL+"/?CPID="+btoa(item.IGQuoteId);},function(response){ServiceRespnse(response);});};function AllDestinationlist(){var DestinationCountries=CommonService.getCountrylist();DestinationCountries.then(function(data){var TravelDestination=angular.fromJson(data.data);$scope.TravelCountryListtime=1;for(var i=0;i<TravelDestination.length;i++){var temp={destinationId:TravelDestination[i].CountryId,destinationName:TravelDestination[i].Country};$scope.travelDestinations.push(temp);}},function(response){ServiceRespnse(response);});}
$scope.checkNoOfTravellerError=function(flag){$scope.TotalMembers=[];if($scope.selectedTravellers==undefined||$scope.selectedTravellers<1||$scope.selectedTravellers==null||$scope.selectedTravellers==""||$scope.selectedTravellers>6){$scope.travellerError=true;flag=1;$scope.travellerErrortext="Enter No of Travellers 1 to 6";}else{$scope.travellerError=false;$scope.travellerErrortext="";for(var i=1;i<=$scope.selectedTravellers;i++){$scope.TotalMembers.push({id:i});}}};$scope.removeMember=function(memberid){var val=$filter("filter")($scope.TotalMembers,function(d){return d.id==memberid;});var idx=$scope.TotalMembers.indexOf(val[0]);if(idx>-1){$scope.selectedTravellers=parseInt($scope.selectedTravellers)-1;$scope.dataValue.splice(idx+1,1);$scope.TotalMembers.splice($scope.selectedTravellers,1);for(i=1;i<=$scope.selectedTravellers;i++){if(!$scope.dataValue[i]){$scope.ageError[i]=true;}else{$scope.ageError[i]=false;}}}};$scope.addMember=function(){$scope.selectedTravellers=parseInt($scope.selectedTravellers);$scope.selectedTravellers=$scope.selectedTravellers+1;$scope.TotalMembers.push({id:$scope.selectedTravellers});$scope.dataValue[$scope.selectedTravellers]="";};$scope.gettravelquotespop=function(){let flg=0;$scope.formtravellerages="";if($scope.travelValidation($scope.destinationList,'destination'))
flg=1;if($scope.travelValidation($scope.travelStartDate,'startdate'))
flg=1;if($scope.travelValidation($scope.travelEndDate,'enddate'))
flg=1;if($scope.travelValidation($scope.usermobile,'mobile'))
flg=1;for(let i=1;i<=$scope.TotalMembers.length;i++){if(!$scope.formtravellerages&&$scope.dataValue[i]){$scope.formtravellerages=$scope.dataValue[i];}
else if($scope.formtravellerages&&$scope.dataValue[i]){$scope.formtravellerages=$scope.formtravellerages+","+$scope.dataValue[i];}
if($scope.travelValidation($scope.dataValue[i],'age',i))
flg=1;}
if(flg==0){$scope.formtraveldestinations=undefined;$scope.formtravelstartdate=undefined;$scope.formtravelenddate=undefined;for(i=0;i<$scope.destinationList.length;i++){if($scope.formtraveldestinations==undefined){$scope.formtraveldestinations=$scope.destinationList[i].destinationId;$scope.formtraveldestinationsName=$scope.destinationList[i].destinationName;}else{$scope.formtraveldestinations=$scope.formtraveldestinations+","+$scope.destinationList[i].destinationId;$scope.formtraveldestinationsName=$scope.formtraveldestinationsName+", "+$scope.destinationList[i].destinationName;}}
$scope.formtravelstartdate=$scope.travelStartDate.getMonth()+1+"/"+$scope.travelStartDate.getDate()+"/"+$scope.travelStartDate.getFullYear();$scope.formtravelenddate=($scope.travelEndDate.getMonth()+1)+"/"+$scope.travelEndDate.getDate()+"/"+$scope.travelEndDate.getFullYear();validatecontrols();}};function validatecontrols(){$scope.showbtntravelloader=true;var currentPage=$location.absUrl();$scope.utm_source="";$scope.utm_campaign="";$scope.utm_term="";$scope.utm_medium="";if(currentPage.indexOf("utm_source")!=-1){$scope.utm_source=currentPage.slice(currentPage.indexOf("utm_source=")+11).split("&")[0];}
if(currentPage.indexOf("utm_campaign")!=-1){$scope.utm_campaign=currentPage.slice(currentPage.indexOf("utm_campaign=")+13).split("&")[0];}
if(currentPage.indexOf("utm_term")!=-1){$scope.utm_term=currentPage.slice(currentPage.indexOf("utm_term=")+9).split("&")[0];}
if(currentPage.indexOf("utm_medium")!=-1){$scope.utm_medium=currentPage.slice(currentPage.indexOf("utm_medium=")+11).split("&")[0];}
$scope.selectedtravelerDOBArray=[];var data={userdetails:{Destination:$scope.formtraveldestinations,DestinationName:$scope.formtraveldestinationsName,StartDate:$scope.formtravelstartdate,EndDate:$scope.formtravelenddate,TravellerAges:$scope.formtravellerages,Product:"Travel",Username:$scope.username,usermobile:$scope.usermobile,Useremail:$scope.useremail,UtmSource:$scope.utm_source,UtmCampaign:$scope.utm_campaign,UtmTerm:$scope.utm_term,UtmMedium:$scope.utm_medium,},};$scope.selectedtravelerAgeArray=$scope.formtravellerages.toString().split(",");for(i=0;i<$scope.selectedtravelerAgeArray.length;i++){var d=new Date();var dobs=d.setFullYear(d.getFullYear()-parseInt($scope.selectedtravelerAgeArray[i]));$scope.selectedtravelerDOBArray.push(dobs);}
$scope.DOBArray=DataFactory.stringifyallDobs($scope.selectedtravelerDOBArray);localStorage.destinationList=$scope.destinationList;$scope.userProduct=1;var saveRequirementData=CommonService.saveTravelRequirementData($scope,globals);saveRequirementData.then(function(pl){$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=angular.fromJson(angular.toJson(pl.data.Message));if($scope.IGQuoteId>0){$scope.leadCreationfn(1);}else{$scope.showbtntravelloader=false;}},function(response){ServiceRespnse(response);});return true;}
$scope.gettermquotes=function(){var flag=1;var datemessage=ValidationFactory.onlynumber($scope.IGdate);var monthmessage=ValidationFactory.onlynumber($scope.IGmonth);var yearmessage=ValidationFactory.onlynumber($scope.IGyear);if(!$scope.selectedItem2){flag=0;$scope.cityerror=true;}else{$scope.cityerror=false;}
if($scope.usermobile!=undefined&&ValidationFactory.mobilevalidate($scope.usermobile)=="True"){$scope.popmobileerror=false;}else{flag=0;$scope.popmobileerror=true;}
if(!$scope.txtActualIncome){flag=0;$scope.annualerror=true;}else{$scope.incomeerror=false;$scope.annualerror=false;validatedot($scope.txtActualIncome.value)}
if(!$scope.IGdate||!$scope.IGmonth||!$scope.IGyear||datemessage=="False"||monthmessage=="False"||yearmessage=="False"||$scope.age<18||$scope.age>=66){flag=0;$scope.dateerror=true;}
if($scope.checkdate==1||$scope.checkdate==undefined){flag=0;$scope.dateerror=true;}else{$scope.dateerror=false;}
if($scope.datespecificmsg!=""&&$scope.datespecificmsg!=undefined){$scope.dateerror=false;}
if(flag==1&&($scope.datespecificmsg==""||$scope.datespecificmsg==undefined)){$scope.formdob=$scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear;$scope.showbtntermloader=true;$scope.dateofbirth=$scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear;$scope.formdob=$scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear;$scope.PolicyTerm=75-$scope.age;if($scope.PolicyTerm<5){$scope.PolicyTerm=0;}
$scope.CityID=$scope.selectedItem2.cityid.split(",")[0];$scope.$root.scrollhide="whitebg";$scope.AgeInYears=$scope.age;var userincomeinlacs=parseFloat(($scope.txtActualIncome.value/100000).toFixed(0)*100000);if(userincomeinlacs>2500000){$scope.SumAssured=50000000;}
else if(userincomeinlacs<=100000){if($scope.AgeInYears<=55){$scope.PolicyTerm=60;}
else if($scope.AgeInYears>55){$scope.PolicyTerm=70;}
$scope.SumAssured=userincomeinlacs*10;}
else{if($scope.AgeInYears<=35){$scope.SumAssured=userincomeinlacs*25;}else if($scope.AgeInYears>=36&&$scope.AgeInYears<=40){$scope.SumAssured=userincomeinlacs*20;}else if($scope.AgeInYears>=41&&$scope.AgeInYears<=50){$scope.SumAssured=userincomeinlacs*15;}else if($scope.AgeInYears>=51&&$scope.AgeInYears<=60){$scope.SumAssured=userincomeinlacs*10;}else{$scope.SumAssured=userincomeinlacs*5;}}
if($scope.SumAssured>=10000000){$scope.SumAssured=10000000;}
$scope.userProduct=3;if($scope.criticalshow==true){var saveRequirementData=CommonService.saveCriticalRequirementData($scope,globals);saveRequirementData.then(function(pl){$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=angular.fromJson(angular.toJson(pl.data.Message));if($scope.IGQuoteId>0){$scope.leadCreationfn(3);}else{$scope.showbtntermloader=false;}},function(response){ServiceRespnse(response);});}else if($scope.termshow==true){var data={userdetails:{gender:$scope.gender,istobacco:$scope.formtobacco,productname:"Term",city:$scope.selectedItem2,dateofbirth:$scope.dateofbirth,actualincome:$scope.txtActualIncome.value,incomerange:$scope.minincome+"-"+$scope.maxincome+" lacs",PayingMode:"Yearly",SelectedRiders:"",PolicyTerm:$scope.PolicyTerm,userMaxAnnualIncomeRange:$scope.maxincome,userMinAnnualIncomeRange:$scope.minincome,Username:$scope.username,usermobile:$scope.usermobile,Useremail:$scope.useremail,},};var saveRequirementData=CommonService.saveTermRequirementData($scope,globals);saveRequirementData.then(function(pl){$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=angular.fromJson(angular.toJson(pl.data.Message));if($scope.IGQuoteId>0){$scope.leadCreationfn(3);}else{$scope.showbtntermloader=false;}},function(response){ServiceRespnse(response);});}}};function validatedot(value){$scope=DataFactory.calculateSumAssuredRange($scope,value);}
$scope.CheckNCBError=function(item,flag){if(flag==1){if(item==undefined||item==""||item==null){$scope.regerror=true;}else{$scope.regerror=false;}}else if(flag==2){if(item==undefined||item==""||item==null){$scope.popcarclaimerror=true;}else{$scope.popcarclaimerror=false;}}else if(flag==3){if(item==undefined||item==""||item==null){$scope.popcarcnglpgerror=true;}else{$scope.popcarcnglpgerror=false;}}else if(flag==4){if(item==undefined||item==""||item==null){$scope.popbikepolexperror=true;}else{$scope.popbikepolexperror=false;}}else if(flag==5){if(item==undefined||item==""||item==null){$scope.popbikelastclaimerror=true;}else{$scope.popbikelastclaimerror=false;}}else if(flag==6){if(item==undefined||item==""||item==null){$scope.popbikepolexperror=true;}else{$scope.popbikepolexperror=false;}}};$scope.nonTermvalidate=function(value,flag){if(flag=="child"){if(value){if((parseInt(value)<10000||parseInt(value)>500000)&&$scope.childincometype=='Y'){$scope.annualError=true;$scope.annualErrorMessage="Enter value from 10k to 5L";}
else if((parseInt(value)<850||parseInt(value)>41666)&&$scope.childincometype=='M'){$scope.annualError=true;$scope.annualErrorMessage="Enter value from 850 to 41,666";}
else{$scope.annualError=false;}}
else{$scope.annualError=true;$scope.annualErrorMessage="Investment Amount is required";}
return $scope.annualError;}
else if(flag=="pension"){if(value){if((parseInt(value)<10000||parseInt(value)>500000)&&$scope.payMode=='Y'){$scope.annualError=true;$scope.annualErrorMessage="Enter value from 10k to 5L";}
else if((parseInt(value)<850||parseInt(value)>41666)&&$scope.payMode=='M'){$scope.annualError=true;$scope.annualErrorMessage="Enter value from 850 to 41,666";}
else{$scope.annualError=false;}}
else{$scope.annualError=true;$scope.annualErrorMessage="Investment Amount is required";}
return $scope.annualError;}
else if(flag=='invest'){if(value){if((parseInt(value)<5000||parseInt(value)>5000000)&&$scope.selectedincome=='Y'){$scope.annualError=true;$scope.annualErrorMessage="Enter value from 5k to 50L";}
else if((parseInt(value)<500||parseInt(value)>416666)&&$scope.selectedincome=='M'){$scope.annualError=true;$scope.annualErrorMessage="Enter value from 500 to 4,16,666";}
else{$scope.annualError=false;}}
else{$scope.annualError=true;$scope.annualErrorMessage="Investment Amount is required";}
return $scope.annualError;}};$scope.submitlodgeclaim=function(id){$scope.lodgeaclaimHistoryback=id;$scope.claimBtnLoader=true;var msgName=ValidationFactory.namevalidate($scope.userName);var msgEmail=ValidationFactory.emailvalidate($scope.userEmail);var msgMobile=ValidationFactory.mobilevalidate($scope.userNumber);var flag=1;if($scope.productType==""||$scope.productType==undefined){var flag=0;$scope.error=true;$scope.producterror=true;$scope.successmsg=false;$scope.lodgeclaimpopaftersubmit=false;$scope.successmsg1=false;$scope.emergencycontact=false;$scope.claimBtnLoader=false;}else{$scope.error=false;$scope.producterror=false;}
if($scope.insuranceCompany==""||$scope.insuranceCompany==undefined){var flag=0;$scope.error=true;$scope.insuranceCompanyerror=true;$scope.successmsg=false;$scope.lodgeclaimpopaftersubmit=false;$scope.successmsg1=false;$scope.emergencycontact=false;$scope.claimBtnLoader=false;}else{$scope.error=false;$scope.insuranceCompanyerror=false;}
if($scope.claimPolicyNo==""||$scope.claimPolicyNo==undefined){var flag=0;$scope.error=true;$scope.policyerror=true;$scope.policylengtherror=false;$scope.successmsg=false;$scope.lodgeclaimpopaftersubmit=false;$scope.successmsg1=false;$scope.emergencycontact=false;$scope.claimBtnLoader=false;}else{$scope.error=false;$scope.policyerror=false;}
if(msgName=="False"){var flag=0;$scope.error=true;$scope.nameerror=true;$scope.successmsg=false;$scope.lodgeclaimpopaftersubmit=false;$scope.successmsg1=false;$scope.emergencycontact=false;$scope.claimBtnLoader=false;}else{$scope.error=false;$scope.nameerror=false;}
if(msgEmail=="False"){var flag=0;$scope.error=true;$scope.emailerror=true;$scope.successmsg=false;$scope.lodgeclaimpopaftersubmit=false;$scope.successmsg1=false;$scope.emergencycontact=false;$scope.claimBtnLoader=false;}else{$scope.error=false;$scope.emailerror=false;}
if(msgMobile=="False"){var flag=0;$scope.error=true;$scope.numbererror=true;$scope.successmsg=false;$scope.lodgeclaimpopaftersubmit=false;$scope.successmsg1=false;$scope.emergencycontact=false;$scope.claimBtnLoader=false;}else{$scope.error=false;$scope.numbererror=false;}
if($scope.description==""||$scope.description==undefined){var flag=0;$scope.error=true;$scope.descriptionerror=true;$scope.descriptionLengthError=false;$scope.successmsg=false;$scope.lodgeclaimpopaftersubmit=false;$scope.successmsg1=false;$scope.emergencycontact=false;$scope.claimBtnLoader=false;}else if($scope.description.length>0&&$scope.description.length<10){var flag=0;$scope.error=true;$scope.descriptionLengthError=true;$scope.descriptionerror=false;$scope.successmsg=false;$scope.lodgeclaimpopaftersubmit=false;$scope.successmsg1=false;$scope.emergencycontact=false;$scope.claimBtnLoader=false;}else{$scope.descriptionerror=false;$scope.descriptionLengthError=false;}
if(flag==1){$scope.lodgeclaimarea=false;$scope.claimBtnLoader=true;$scope.successmsg=false;$scope.successmsg1=false;$scope.emergencycontact=false;$scope.id=""
$scope.errorMessge="";$scope.lodgeaclaim=CommonService.Claim($scope);$scope.lodgeaclaim.then(function(result){result.data=angular.fromJson(result.data);if(result.data.Status){console.log(result);$scope.ShowClaimsectionpopup=false;$scope.claimBtnLoader=false;$scope.disableBtn=false;$scope.id=result.data.ReferenceId;$scope.lodgeClaimBtn=true;var today=new Date().getHours();if(today>=10&&today<18){$scope.id1="within an hour.";}else if(today>=18&&today<=23){$scope.id1="tomorrow, before 11:00 AM.";}else{$scope.id1="before 11:00 AM today.";}
$scope.lodgeclaimpop=false;$scope.claimBtnLoader=false;$scope.successmsg=true;$scope.successmsg1=true;$scope.emergencycontact=true;$scope.error=false;$scope.producterror=false;$scope.insuranceCompanyerror=false;$scope.policyerror=false;$scope.nameerror=false;$scope.emailerror=false;$scope.disableBtn=false;$scope.numbererror=false;$scope.descriptionerror=false;$scope.lodgeclaimarea=false;if($scope.lodgeaclaimHistoryback!=true){$scope.lodgeclaimpopaftersubmit=true;if($scope.lodgeclaimAnimation1=="out fadeOutDownBig"||$scope.lodgeclaimAnimation1==""){$scope.lodgeclaimpopaftersubmit=true;$scope.lodgeclaimAnimation1="fadeInUp";}}else{$scope.lodgeclaimpopaftersubmituser=true;}
if($scope.successmsg==true){$scope.lodgeclaimpop=false;$scope.claimBtnLoader=false;$scope.disabled=true;$scope.successmsg=true;$scope.successmsg1=true;if($scope.lodgeaclaimHistoryback!=true){$scope.lodgeclaimpopaftersubmit=true;}else{$scope.lodgeclaimpopaftersubmituser=true;}
$scope.emergencycontact=true;$scope.lodgeclaimarea=false;}
$scope.disableBtn=false;}
else{$scope.claimBtnLoader=false;$scope.errorMessge=result.data.Message;}},function(response){$scope.claimBtnLoader=false;$scope.errorMessge="Some internal error...."
ServiceRespnse(response);});}};$scope.footer=function(flag){};$scope.header=function(flag){};$scope.getIndex=function(flag){localStorage.userpage="Homepage";$scope.UserUrl=undefined;$scope.$root.scollClassjs="";$window.location.href=globals.landingPage;};$scope.showSimpleToast=function(){};$scope.TimeOutService=function(time,urlservice,ServiceName,product,timetaken){var vm=this;vm.allData=JSON.stringify(vm.data,null,2);var TimeOut=CommonService.TimeOutProposalService(0,product,vm.data.browser,vm.data.os_version,urlservice,time,$scope.ip,ServiceName,$scope.device,timetaken);TimeOut.then(function(result){TimeOut=result.data;},function(response){ServiceRespnse(response);});};$scope.leadredirection=function(item){var revisitflag=CommonService.revisit($scope,globals,item.IGQuoteId);revisitflag.then(function(data){$window.location.href=globals.RedirectURL+"/?CPID="+btoa(item.IGQuoteId);},function(response){ServiceRespnse(response);});};$scope.closebeenHerePop=function(flag){$scope.$root.beenHerePopUpAnimation="out fadeOutDownBig";$scope.$root.scrollhide="";$scope.$root.scollClassjs="";$scope.$root.beenHerePopUp=false;$scope.htmlScroll="";$location.search("Searches",null);};function GetLocalStorageData(flag){if(localStorage.usermobile!=undefined)$scope.usermobile=localStorage.usermobile;if(localStorage.IGdate=="undefined"||localStorage.IGmonth=="undefined"||localStorage.IGyear=="undefined"){localStorage.IGdate="";localStorage.IGmonth="";localStorage.IGyear="";}
$scope.IGdate=!localStorage.IGdate?"":localStorage.IGdate;$scope.IGmonth=!localStorage.IGmonth?"":localStorage.IGmonth;$scope.IGyear=!localStorage.IGyear?"":localStorage.IGyear;if($scope.IGdate&&$scope.IGmonth&&$scope.IGyear){$scope.testdate(3,1);}
if(localStorage.formdob)$scope.formdob=localStorage.formdob;if(localStorage.gender){$scope.gender=localStorage.gender;if($scope.gender=="M")$scope.checkgender(0);else $scope.checkgender(1);}
if(localStorage.selectedadult){$scope.selectedadult=localStorage.selectedadult;$scope.checkadult(parseInt($scope.selectedadult));}
if(localStorage.selectedchild){$scope.selectedchild=localStorage.selectedchild;$scope.checkchild(parseInt($scope.selectedchild));}
$scope.formdob=localStorage.formdob;$scope.IGchilddate=!localStorage.IGchilddate?"":localStorage.IGchilddate;$scope.IGchildmonth=!localStorage.IGchildmonth?"":localStorage.IGchildmonth;$scope.IGchildyear=!localStorage.IGchildyear?"":localStorage.IGchildyear;$scope.formchilddob=!localStorage.formchilddob?"":localStorage.formchilddob;$scope.childincome=!localStorage.childincome?"":localStorage.childincome;$scope.selectedincome=!localStorage.selectedincome?"":localStorage.selectedincome;if($scope.IGchilddate&&$scope.IGchildmonth&&$scope.IGchildyear){$scope.childtestdate(3);}
if(localStorage.childincometype!=undefined){$scope.childincometype=localStorage.childincometype;}
if(localStorage.formgender!=undefined)$scope.formgender=localStorage.formgender;$scope.formdob=localStorage.formdob;if(localStorage.txtInvestIncome!=undefined)$scope.txtInvestIncome=localStorage.txtInvestIncome;$scope.formdob=localStorage.formdob;if(localStorage.txtPensionIncome!=undefined)$scope.txtPensionIncome=localStorage.txtPensionIncome;$scope.selectedincome=localStorage.selectedincome1;$scope.payMode=localStorage.payMode;}
$scope.JourneyDate=function(event){var allowedRegex=/[0-9\/]/g;if(!event.key.match(allowedRegex)){event.preventDefault();}};$scope.scrollTo=function(eID){$scope.startY=self.pageYOffset;if($scope.startY<=571){$scope.$root.showHeaderClass="display-visible";}else{$scope.$root.showHeaderClass="display-visible scrollTo";}};function ServiceRespnse(errorRes){console.log(errorRes);}
$scope.testdatespecific=function(id,datevalue,monthvalue,yearvalue){if(yearvalue==undefined||yearvalue==""){yearvalue="1000";}
if(id==1){$scope.datespecificmsg="";if(datevalue<1||datevalue>31){if(yearvalue<1||yearvalue.length<4){if(monthvalue<1||monthvalue>12){$scope.datespecificmsg="Please enter valid date, month and year";}else{$scope.datespecificmsg="Please enter valid date and year";}}else if(monthvalue<1||monthvalue>12){$scope.datespecificmsg="Please enter valid date and month";}else{$scope.datespecificmsg="Please enter valid date";}}else if(yearvalue<1||yearvalue.length<4){if(monthvalue<1||monthvalue>12){$scope.datespecificmsg="Please enter valid month and year";}else{$scope.datespecificmsg="Please enter valid year";}}else if(monthvalue<1||monthvalue>12){$scope.datespecificmsg="Please enter valid month";}}else if(id==2){$scope.datespecificmsg="";if(monthvalue<1||monthvalue>12){if(yearvalue<1||yearvalue.length<4){if(datevalue<1||datevalue>31){$scope.datespecificmsg="Please enter valid date, month and year";}else{$scope.datespecificmsg="Please enter valid month and year";}}else if(datevalue<1||datevalue>31){$scope.datespecificmsg="Please enter valid date and month";}else{$scope.datespecificmsg="Please enter valid month";}}else if(yearvalue<1||yearvalue.length<4){if(datevalue<1||datevalue>31){$scope.datespecificmsg="Please enter valid date and year";}else{$scope.datespecificmsg="Please enter valid year";}}else if(datevalue<1||datevalue>31){$scope.datespecificmsg="Please enter valid date";}}else if(id==3){$scope.datespecificmsg="";if(yearvalue<1||yearvalue.length<4){if(monthvalue<1||monthvalue>12){if(datevalue<1||datevalue>31){$scope.datespecificmsg="Please enter valid date, month and year";}else{$scope.datespecificmsg="Please enter valid month and year";}}else if(datevalue<1||datevalue>31){$scope.datespecificmsg="Please enter valid date and year";}else{$scope.datespecificmsg="Please enter valid year";}}else if(monthvalue<1||monthvalue>12){if(datevalue<1||datevalue>31){$scope.datespecificmsg="Please enter valid date and month";}else{$scope.datespecificmsg="Please enter valid month";}}else if(datevalue<1||datevalue>31){$scope.datespecificmsg="Please enter valid date";}}
if(monthvalue==2&&(datevalue>29||datevalue<1)){$scope.datespecificmsg="Please enter valid date";}
if(datevalue>30&&(monthvalue==4||monthvalue==6||monthvalue==9||monthvalue==11)){$scope.datespecificmsg="Please enter valid date";}};$scope.loginFN=function(id){var resend=false;if(id=="resend"){resend=true;}else{$scope.LoginBtnLoader=true;}
$scope.MobileErrorShow=false;$scope.MobileErrorMsg="";if($rootScope.getmobilenumber!=""&&$rootScope.getmobilenumber!=undefined&&$rootScope.getmobilenumber!=null){var getOTP=CommonService.NewSendOTPReboot($scope,$rootScope.getmobilenumber,resend);getOTP.then(function(result){$scope.captcha_status="";$scope.TokenId=result.data.TokenId;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.OTPValidation.Tokenid=result.data.TokenId;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.OTPValidation.Mobile=$rootScope.getmobilenumber;$scope.LoginBtnLoader=false;$scope.userOTP0=undefined;$scope.userOTP1=undefined;$scope.userOTP2=undefined;$scope.userOTP3=undefined;$scope.loginResend=false;$scope.UserLoginShow=false;if(result.data.Message=="success"||result.data.IsVerified){$scope.loginresendtime=parseInt(result.data.OTPResendTimer);$scope.UserLoginShow=false;$scope.UserLoginOTPShow=true;resendTimer();$timeout(function(){$scope.loginResend=true;},10000);}else{$scope.MobileErrorMsg=result.data.Message;}});}else{$scope.UserLoginOTPShow=false;$scope.LoginBtnLoader=false;$scope.MobileErrorShow=true;$scope.captcha_status="";}};$scope.loginverify=function(id){var otp=$scope.userOTP0+$scope.userOTP1+$scope.userOTP2+$scope.userOTP3;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.OTPValidation.OTP=otp;var response=CommonService.GetMobileVerificationWithOTPRequest2($scope.otpcreaterequestdata);response.then(function(result){result.data=angular.fromJson(result.data);if(result.data.data.Error.ErrorCode==1){$scope.wrongotpmsgshow=true;}else{$scope.UserLoginOTPShow=false;$scope.UserLoginShow=false;$scope.wrongotpmsgshow=false;localStorage.Islogin=true;localStorage.IsDate=new Date().getDate();$scope.Islogin=true;localStorage.Mobile=$rootScope.getmobilenumber;$scope.ShowActivitysection=true;$scope.ShowActivity=true;$scope.UserUrl="Template/UserProfile.html";$scope.$root.scollClassjs="scollClass";$scope.Accountfn();}});};$scope.checkPin=function(){console.log($scope.pinCodeVal);};$scope.loginotpBack=function(){$scope.UserLoginShow=true;$scope.UserLoginOTPShow=false;};$scope.UserLogin=function(){$scope.UserLoginShow=true;};$scope.closelogin=function(){$scope.UserLoginShow=false;};$scope.SaveUserData=function(){var date;$scope.SaveUserDataloader=true;if($scope.IGdate!=undefined&&$scope.IGmonth!=undefined&&$scope.IGyear!=undefined&&$scope.IGdate!=""&&$scope.IGmonth!=""&&$scope.IGyear!=""&&$scope.IGdate!=null&&$scope.IGmonth!=null&&$scope.IGyear!=null){var IGdate=$scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear;date=JSON.parse(CommonService.stringifyWcf(IGdate,1));}
var cityid;if($scope.selectedItem2!=undefined&&$scope.selectedItem2!=null){cityid=$scope.selectedItem2.cityid.split(",")[0];}
var income=0;if($scope.txtActualIncome!=undefined&&$scope.txtActualIncome!=null){income=$scope.txtActualIncome.ActualIncomeValue;}
if($scope.gender=="M"||$scope.gender=="Male"){$scope.UserGender="Male";}else if($scope.gender=="F"||$scope.gender=="Female"){$scope.UserGender="Female";}
var mobile=localStorage.Mobile;if($scope.pinCodeVal!=undefined&&$scope.pinCodeVal!=null){$scope.PinCode=$scope.pinCodeVal.PinCode;}
if($scope.emailerror!=true){var savedata=CommonService.SaveUserProfileDetails($scope,date,cityid,income,mobile);savedata.then(function(result){$scope.Profilefn();$scope.EditProfile=false;$scope.SaveUserDataloader=false;});}else{$scope.SaveUserDataloader=false;}};$scope.checkemail=function(email){if(email!=undefined&&email!=null&&email!=""){if(ValidationFactory.emailvalidate(email)=="True"){$scope.emailerror=false;}else{$scope.emailerror=true;}}else{$scope.emailerror=false;}};$scope.Logoutfn=function(){localStorage.Islogin=false;$scope.Islogin=false;localStorage.UserName=undefined;localStorage.Mobile=undefined;$scope.UserLoginShow=false;$scope.UserUrl=undefined;$scope.$root.scollClassjs="";$scope.UserName=undefined;$scope.userName=undefined;$scope.EmailId=undefined;$scope.userEmail=undefined;$scope.userNumber=undefined;$scope.DOB=undefined;$scope.IGdate=undefined;$scope.IGmonth=undefined;$scope.IGyear=undefined;$scope.UserGender=undefined;$scope.MaritalStatus=undefined;$scope.Qualification=undefined;$scope.Profession=undefined;$scope.Income=undefined;$scope.txtActualIncome=undefined;$scope.selectedItem2=undefined;$scope.City=undefined;$scope.PinCode=undefined;$scope.NoOfChild=undefined;};function GetUserProfileDetails(){var Getdata=CommonService.GetUserProfileDetails(localStorage.Mobile);Getdata.then(function(result){$scope.UserName=result.data[0].Name;$scope.userName=result.data[0].Name;localStorage.UserName=result.data[0].Name;$scope.EmailId=result.data[0].EmailId;$scope.userEmail=result.data[0].EmailId;$scope.userNumber=localStorage.Mobile;});}
$scope.SendMail=function(){if($scope.ReferralEmail!=undefined&&$scope.ReferralEmail!=""&&$scope.ReferralEmail!=null&&ValidationFactory.emailvalidate($scope.ReferralEmail)=="True"){var url="https://www.insurejoy.com/?ref="+$scope.UserRefferalId;$scope.ReferralEmailError=false;$scope.MailContent=document.querySelector(".sendreferralmail").innerHTML;$scope.MailContent=$scope.MailContent.replace("$customer",$scope.UserName);$scope.MailContent=$scope.MailContent.replace("$ReferralUrl",url);$scope.MailContent=$scope.MailContent.replace("$ReferralUrl1",url);$scope.ReferralMailSubject=$scope.UserName+" has referred you to check out insurejoy.com . Referral Code ="+$scope.UserRefferalId;var sendmail=CommonService.SendReferralServiceMails($scope);sendmail.then(function(result){$scope.showreferalmail=false;$scope.thanksemailPopup=true;});}else{$scope.ReferralEmailError=true;}};$scope.Profilefn=function(){$scope.UserUrl="Template/UserProfile.html";$scope.$root.scollClassjs="scollClass";DataFactory.userActualIncome2($scope);var Getdata=CommonService.GetUserProfileDetails(localStorage.Mobile);Getdata.then(function(result){$rootScope.getmobilenumber=localStorage.Mobile;$scope.$root.scollClassjs="scollClass";$scope.Accountclass="";$scope.Profileclass="active";$scope.Claimclass="";$scope.Notificationclass="";$scope.Referclass="";$scope.Helpclass="";$scope.Logoutclass="";$scope.ShowProfilesection=true;$scope.ShowActivitysection=false;$scope.ShowClaimsection=false;$scope.ShowRefersection=false;$scope.ShowHelpsection=false;$scope.ShowNotificationsection=false;var array=result.data[0];$scope.UserName=array.Name;$scope.EmailId=array.EmailId;var date=new Date(parseInt(array.DOB.substring(6,19))).getMonth()+1+"/"+new Date(parseInt(array.DOB.substring(6,19))).getDate()+"/"+new Date(parseInt(array.DOB.substring(6,19))).getFullYear();$scope.DOB=new Date(date);$scope.IGdate=date.split("/")[1];$scope.IGmonth=date.split("/")[0];$scope.IGyear=date.split("/")[2];if(array.Gender=="M"||array.Gender=="Male"){$scope.UserGender="Male";}else if(array.Gender=="F"||array.Gender=="Female"){$scope.UserGender="Female";}
$scope.MaritalStatus=array.MaritalStatus;$scope.Qualification=array.Qualification;$scope.Profession=array.Profession;$scope.Income=array.Income;for(var p=0;p<$scope.NewuserActualIncome.length;p++){if($scope.NewuserActualIncome[p].ActualIncomeValue==array.Income){$scope.txtActualIncome=$scope.NewuserActualIncome[p];}}
var citydata=[];if(array.City!=null&&array.City!=undefined&&array.City!=""){if($scope.commoncitystate!=undefined){var citydata=$filter("filter")($scope.commoncitystate,function(d){return d.cityid.split(",")[0]==array.City;})[0];}
$scope.selectedItem2=citydata;$scope.City=citydata.cityname;}
$scope.PinCode=array.Pincode;$scope.NoOfChild=array.NoOfChild;});};$scope.Accountfn=function(){$scope.UserActivity=0;var Getdetails=CommonService.UserActivityWithPolicyDetails(localStorage.Mobile);Getdetails.then(function(result){localStorage.userpage="UserAccount";$scope.UserUrl="Template/UserProfile.html";$scope.$root.scollClassjs="scollClass";$scope.BookingDetails=result.data.BookingDetails;for(var i=0;i<$scope.BookingDetails.length;i++){$scope.UserRefferalId=result.data.BookingDetails[0].CustomerId;var date=new Date(parseInt($scope.BookingDetails[i].BookingDate.substring(6,19))).getMonth()+
1+
"/"+
new Date(parseInt($scope.BookingDetails[i].BookingDate.substring(6,19))).getDate()+
"/"+
new Date(parseInt($scope.BookingDetails[i].BookingDate.substring(6,19))).getFullYear();$scope.BookingDetails[i].BookDate=new Date(date);if($scope.BookingDetails[i].PolicyIssueDate!=undefined&&$scope.BookingDetails[i].PolicyIssueDate!=null){var date=new Date(parseInt($scope.BookingDetails[i].PolicyIssueDate.substring(6,19))).getMonth()+
1+
"/"+
new Date(parseInt($scope.BookingDetails[i].PolicyIssueDate.substring(6,19))).getDate()+
"/"+
new Date(parseInt($scope.BookingDetails[i].PolicyIssueDate.substring(6,19))).getFullYear();$scope.BookingDetails[i].PolicyDate=new Date(date);}}
$scope.UserVisitDetails=result.data.UserVisitDetails;for(var i=0;i<$scope.UserVisitDetails.length;i++){if($scope.UserVisitDetails[i].createddatetime!=undefined){var datetime=$scope.UserVisitDetails[i].createddatetime;if($scope.UserVisitDetails[i].LastVisit!=undefined&&$scope.UserVisitDetails[i].UserVisitDetails!=null&&$scope.UserVisitDetails[i].UserVisitDetails!=""){datetime=$scope.UserVisitDetails[i].LastVisit;}
var date=new Date(parseInt(datetime.substring(6,19))).getMonth()+1+"/"+new Date(parseInt(datetime.substring(6,19))).getDate()+"/"+new Date(parseInt(datetime.substring(6,19))).getFullYear();$scope.UserVisitDetails[i].day=new Date(date);var time1=new Date(parseInt(datetime.substring(6,19))).getHours();var time2=new Date(parseInt(datetime.substring(6,19))).getMinutes();if(parseInt(time2)<10){time2="0"+parseInt(time2);}
if(parseInt(time1)>12){$scope.UserVisitDetails[i].time=parseInt(time1)-12+":"+time2+" PM";}else if(parseInt(time1)==12&&parseInt(time2)>0){$scope.UserVisitDetails[i].time=time1+":"+time2+" PM";}else{$scope.UserVisitDetails[i].time=time1+":"+time2+" AM";}}}
$scope.Accountclass="active";$scope.Profileclass="";$scope.Claimclass="";$scope.Notificationclass="";$scope.Referclass="";$scope.Helpclass="";$scope.Logoutclass="";$scope.ShowProfilesection=false;$scope.ShowActivitysection=true;$scope.ShowActivity=true;$scope.ShowClaimsection=false;$scope.ShowRefersection=false;$scope.ShowHelpsection=false;$scope.ShowNotificationsection=false;$timeout(function(){$scope.HomeloaderShow=false;},2000);});GetUserProfileDetails();};$scope.Claimfn=function(){$scope.UserUrl="Template/UserProfile.html";$scope.$root.scollClassjs="scollClass";$scope.TicketStatus=[];$scope.TicketArray=[];$scope.Showticketstatus=[];$scope.Claimfn1(true);$scope.ShowClaimsectionpopup=false;$scope.ShowProfilesection=false;$scope.ShowActivitysection=false;$scope.ShowNotificationsection=false;$scope.ShowRefersection=false;$scope.ShowHelpsection=false;$scope.ShowClaimsection=true;$scope.AskClaimemail=true;$scope.Accountclass="";$scope.Profileclass="";$scope.Claimclass="active";$scope.Notificationclass="";$scope.Referclass="";$scope.Helpclass="";$scope.Logoutclass="";};$scope.Claimfn1=function(id){if($scope.userEmail!=undefined&&$scope.userEmail!=null&&$scope.userEmail!=""&&ValidationFactory.emailvalidate($scope.userEmail)=="True"){$scope.TicketStatus=[];$scope.TicketArray=[];$scope.Showticketstatus=[];$scope.emailerror=false;if(id!=true){$scope.showbtnclaimloader=true;}
var ticket=CommonService.helpdeskticketlist($scope.userEmail);ticket.then(function(result){$scope.helpdeskemailmsg="";if(result.data.length>0){for(var i=0;i<result.data.length;i++){$scope.GetTicketStatus(result.data[i].id);}}else{$scope.showbtnclaimloader=false;$scope.AskClaimemail=false;}},function(response){ServiceRespnse(response);$scope.showbtnclaimloader=false;$scope.helpdeskemailmsg=response.data.errors[0].message;});}else{$scope.emailerror=true;}};$scope.GetTicketStatus=function(id){var ticket=CommonService.helpdeskticketview(id);ticket.then(function(result){result.data=angular.fromJson(result.data);var statusText;var priorityText;if(result.data.status==2){statusText="Open";}else if(result.data.status==3){statusText="Pending";}else if(result.data.status==4){statusText="Resolved";}else if(result.data.status==5){statusText="Closed";}
if(result.data.priority==1){priorityText="Low";}else if(result.data.priority==2){priorityText="Medium";}else if(result.data.priority==3){priorityText="High";}else if(result.data.priority==4){priorityText="Urgent";}
var product;if(result.data.subject.indexOf("term")!=-1||result.data.subject.indexOf("Term")!=-1||result.data.subject.indexOf("TERM")!=-1){product="term";}else if(result.data.subject.indexOf("Car")!=-1||result.data.subject.indexOf("car")!=-1||result.data.subject.indexOf("CAR")!=-1){product="car";}else if(result.data.subject.indexOf("health")!=-1||result.data.subject.indexOf("Health")!=-1||result.data.subject.indexOf("HEALTH")!=-1){product="health";}else if(result.data.subject.indexOf("two")!=-1||result.data.subject.indexOf("Two")!=-1||result.data.subject.indexOf("TWO")!=-1){product="twowheeler";}else if(result.data.subject.indexOf("travel")!=-1||result.data.subject.indexOf("Travel")!=-1||result.data.subject.indexOf("TRAVEL")!=-1){product="travel";}else if(result.data.subject.indexOf("investment")!=-1||result.data.subject.indexOf("Investment")!=-1||result.data.subject.indexOf("INVESTMENT")!=-1){product="investment";}else if(result.data.subject.indexOf("pension")!=-1||result.data.subject.indexOf("Pension")!=-1||result.data.subject.indexOf("PENSION")!=-1){product="pension";}else if(result.data.subject.indexOf("child")!=-1||result.data.subject.indexOf("Child")!=-1||result.data.subject.indexOf("CHILD")!=-1){product="child";}else if(result.data.subject.indexOf("critical")!=-1||result.data.subject.indexOf("Critical")!=-1||result.data.subject.indexOf("CRITICAL")!=-1){product="critical";}
$scope.TicketArray.push({id:result.data.id,ProductName:product,subject:result.data.subject,description_text:result.data.description_text,priorityText:priorityText,statusText:statusText});$scope.showbtnclaimloader=false;});};$scope.Referfn=function(){$scope.UserUrl="Template/UserProfile.html";$scope.$root.scollClassjs="scollClass";$scope.CopiedShow=false;$scope.referlink="https://www.insurejoy.com/?ref="+$scope.UserRefferalId;$scope.SendReferralMail="Template/sendreferralmail.html";$scope.ShowProfilesection=false;$scope.ShowActivitysection=false;$scope.ShowNotificationsection=false;$scope.ShowClaimsection=false;$scope.ShowRefersection=true;$scope.ShowHelpsection=false;$scope.Accountclass="";$scope.Profileclass="";$scope.Claimclass="";$scope.Notificationclass="";$scope.Referclass="active";$scope.Helpclass="";$scope.Logoutclass="";};$scope.Helpfn=function(id){$scope.UserUrl="Template/UserProfile.html";$scope.$root.scollClassjs="scollClass";if(id==undefined){$scope.ShowProfilesection=false;$scope.ShowActivitysection=false;$scope.ShowClaimsection=false;$scope.ShowRefersection=false;$scope.ShowNotificationsection=false;$scope.ShowHelpsection=true;$scope.Accountclass="";$scope.Profileclass="";$scope.Claimclass="";$scope.Notificationclass="";$scope.Referclass="";$scope.Helpclass="active";$scope.Logoutclass="";}else if(id==1){if($scope.FAQ1!=true){$scope.FAQ1=true;}else{$scope.FAQ1=false;}}else if(id==2){if($scope.FAQ2!=true){$scope.FAQ2=true;}else{$scope.FAQ2=false;}}else if(id==3){if($scope.FAQ3!=true){$scope.FAQ3=true;}else{$scope.FAQ3=false;}}else if(id==4){if($scope.FAQ4!=true){$scope.FAQ4=true;}else{$scope.FAQ4=false;}}else if(id==5){if($scope.FAQ5!=true){$scope.FAQ5=true;}else{$scope.FAQ5=false;}}else if(id==6){if($scope.FAQ6!=true){$scope.FAQ6=true;}else{$scope.FAQ6=false;}}};$scope.Notificationfn=function(){$scope.UserUrl="Template/UserProfile.html";$scope.$root.scollClassjs="scollClass";$scope.ShowProfilesection=false;$scope.ShowActivitysection=false;$scope.ShowClaimsection=false;$scope.ShowRefersection=false;$scope.ShowHelpsection=false;$scope.ShowNotificationsection=true;$scope.Accountclass="";$scope.Profileclass="";$scope.Claimclass="";$scope.Notificationclass="active";$scope.Referclass="";$scope.Helpclass="";$scope.Logoutclass="";};$scope.ActivityFn=function(id){if(id==1){$scope.ShowActivity=true;$scope.ShowBooking=false;$scope.Showpolicy=false;}else if(id==2){$scope.ShowActivity=false;$scope.ShowBooking=true;$scope.Showpolicy=false;}else if(id==3){$scope.ShowActivity=false;$scope.ShowBooking=false;$scope.Showpolicy=true;}};$scope.RedirectFn=function(IGQuoteId){$window.location.href=globals.RedirectURL+"/?CPID="+btoa(IGQuoteId);};$scope.encryptedData=function(value){if(value){const encrypted=CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(value+globals.staticKey),CryptoJS.enc.Utf8.parse(globals.encryptionKey),{keySize:128/8,iv:CryptoJS.enc.Utf8.parse(globals.encryptionIv),mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7,});return encrypted.toString();}};$scope.checkIGCover=function(){if(!$scope.IGCoverValue){$scope.IGCoverError=true;}else{$scope.IGCoverError=false;}
return $scope.IGCoverError;};$scope.encryptedData=function(value){if(value){const encrypted=CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(value+globals.staticKey),CryptoJS.enc.Utf8.parse(globals.encryptionKey),{keySize:128/8,iv:CryptoJS.enc.Utf8.parse(globals.encryptionIv),mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7,});return encrypted.toString();}};$scope.bikeClickItem=function(item,flag){if(flag=="ppe"){if(item==1){$scope.showPpeList=true;}
else{$scope.bikeexpiredpol=item.value;$scope.ppebikeItem=item.text;$scope.popbikepolexperror=false;$scope.showPpeList=false;$scope.CheckNCBError($scope.bikeexpiredpol,4)
$scope.bikepolicyexp();}}
else if(flag=="model"){if(item==1){$scope.showModelList=true;}
else{$scope.selectedbikemmv=item;$scope.bikeModelItem=item.bikename;$scope.showModelList=false;$scope.checkbikelisterror();}}
else if(flag=="rto"){if(item==1){$scope.showRtoList=true;}
else{$scope.selectedbikerto=item;$scope.bikeRtoItem=item.cityname;$scope.showRtoList=false;$scope.checkbikertoerror();}}
else if(flag=="reg"){if(item==1){$scope.showRegList=true;}
else{$scope.bikereg=item.value;$scope.regItem=item.text;$scope.regYearItem="";$scope.showRegList=false;$scope.bikeregyear();$scope.carregyear();}}
else if(flag=="ppe"){if(item==1){$scope.showPpeList=true;}
else{$scope.bikeexpiredpol=item.value;$scope.ppeItem=item.text;$scope.showPpeList=false;$scope.bikepolicyexp();$scope.CheckNCBError($scope.bikeexpiredpol,4);}}
else if(flag=="regyear"){if(item==1){$scope.showRegyearList=true;}
else{$scope.bikelastclaim=item.value;$scope.regYearItem=item.text;$scope.popbikelastclaimerror=false;$scope.showRegyearList=false;$scope.bikelastclaimfn();$scope.CheckNCBError($scope.bikelastclaim,5);}}
else if(flag=="product"){if(item==1){$scope.showProductList=true;}
else{$scope.productType=item.id;$scope.claimProductItem=item.product;$scope.producterror=false;$scope.showProductList=false;$scope.getinsurer($scope.productType)}}
else if(flag=="insurer"){if(item==1){$scope.showInsurerList=true;}
else{$scope.insuranceCompany=item;$scope.claimInsurer=item.Insurer_Name;$scope.insuranceCompanyerror=false;$scope.showInsurerList=false;}}}
$scope.bikeReturnItem=function(item,flag){$scope.showPpeList=false;$scope.showModelList=false;$scope.showRtoList=false;$scope.showRegList=false;$scope.showPpeList=false;$scope.showRegyearList=false;if((item.length==0||!$scope.ppebikeItem)&&flag=="ppe"){$scope.ppebikeItem="";$scope.bikeexpiredpol="";}
else if((item.length==0||!$scope.bikeModelItem)&&flag=="model"){$scope.bikeModelItem="";$scope.selectedbikemmv="";}
else if((item.length==0||!$scope.bikeRtoItem)&&flag=="rto"){$scope.bikeRtoItem="";$scope.selectedbikerto="";}
else if((item.length==0||!$scope.regItem)&&flag=="reg"){$scope.regItem="";$scope.bikereg="";}
else if((item.length==0||!$scope.ppeItem)&&flag=="ppe"){$scope.ppeItem="";$scope.bikeexpiredpol="";}
else if((item.length==0||!$scope.regYearItem)&&flag=="regyear"){$scope.regYearItem="";$scope.bikelastclaim="";}
else if((item.length==0||!$scope.claimProductItem)&&flag=="product"){$scope.claimProductItem="";$scope.productType="";}
else if((item.length==0||!$scope.claimInsurer)&&flag=="insurer"){$scope.claimInsurer="";$scope.insuranceCompany="";}}
$scope.clickItem=function(item,flag){if(flag=="income"){if(item==1){$scope.showIncomeList=true;}
else{$scope.txtActualIncome=item;$scope.incomeItem=item.text;$scope.annualerror=false;$scope.showIncomeList=false;}}
else if(flag=="city"){if(item==1){$scope.showCityList=true;}
else{$scope.selectedItem2=item;$scope.cityItem=item.cityname;$scope.cityerror=false;$scope.showCityList=false;}}
else if(flag=="model"){if(item==1){$scope.showModelList=true;}
else{$scope.selectedItem=item;$scope.modelItem=item.ModelName;$scope.carerror=false;$scope.showModelList=false;$scope.checkcarerror();}}
else if(flag=="rto"){if(item==1){$scope.showRtoList=true;}
else{$scope.selectedItem1=item;$scope.rtoItem=item.RTOCode;$scope.cityerror=false;$scope.showRtoList=false;}}
else if(flag=="regyear"){if(item==1){$scope.showRegList=true;}
else{$scope.carreg=item.value;$scope.regItem=item.text;$scope.popcarregerror=false;$scope.popcarregerror1=false;$scope.showRegList=false;$scope.claimItem="";$scope.PopulateClaimddl();$scope.carregyear();}}
else if(flag=="ppe"){if(item==1){$scope.showPpeList=true;}
else{$scope.carbreakingpol=item.value;$scope.ppeItem=item.text;$scope.popbikepolexperror=false;$scope.showPpeList=false;$scope.checkcarbreaking1();}}
else if(flag=="claim"){if(item==1){$scope.showClaimList=true;}
else{$scope.carclaim=item.value;$scope.claimItem=item.text;$scope.regerror=false;$scope.showClaimList=false;$scope.CheckNCBError(item.value,2)
$scope.carclaimchange();}}
else if(flag=="claimtaken"){if(item==1){$scope.showClaimTakenList=true;}
else{$scope.claimtaken=item.value;$scope.claimTakenItem=item.text;$scope.regerror=false;$scope.showClaimTakenList=false;$scope.PopulateNCB();$scope.CheckNCBError($scope.claimtaken,1);}}
else if(flag=="cng"){if(item==1){$scope.showCngList=true;}
else{$scope.carkitstatus=item.value;$scope.cngItem=item.text;$scope.popcarcnglpgerror=false;$scope.showCngList=false;$scope.carkitchange();$scope.CheckNCBError($scope.carkitstatus,3);}}
else if(flag=="paymode"){if(item==1){$scope.showPaymodeList=true;}
else{$scope.selectedincome=item.value;$scope.payItem=item.text;$scope.showPaymodeList=false;$scope.nonTermvalidate($scope.txtInvestIncome,'invest');}}
else if(flag=="childpaymode"){if(item==1){$scope.showPaymodeList=true;}
else{$scope.childincometype=item.value;$scope.childpayItem=item.text;$scope.showPaymodeList=false;$scope.nonTermvalidate($scope.childincome,'child');}}
else if(flag=="pensionpaymode"){if(item==1){$scope.showPaymodeList=true;}
else{$scope.payMode=item.value;$scope.pensionpayItem=item.text;$scope.showPaymodeList=false;$scope.nonTermvalidate($scope.txtPensionIncome,'pension');}}
if(flag=="dst"){if(item==1){$scope.showDestinationList=true;}
else{$scope.DestinationError=false;$scope.showDestinationList=false;destinationList(item)}}}
$scope.returnItem=function(item,flag){$scope.showIncomeList=false;$scope.showDestinationList=false;$scope.showCityList=false;$scope.showPayList=false;$scope.showModelList=false;$scope.showRtoList=false;$scope.showRegList=false;$scope.showPpeList=false;$scope.showClaimList=false;$scope.showClaimTakenList=false;$scope.showCngList=false;$scope.showPaymodeList=false;if((item.length==0||!$scope.incomeItem)&&flag=="income"){$scope.incomeItem="";$scope.txtActualIncome="";}
else if((item.length==0||!$scope.destinationItem)&&flag=="dst"){$scope.destinationItem="";$scope.selectedDestinationItem="";}
else if((item.length==0||!$scope.cityItem)&&flag=="city"){$scope.cityItem="";$scope.selectedItem2="";}
else if((item.length==0||!$scope.modelItem)&&flag=="model"){$scope.modelItem="";$scope.selectedItem="";}
else if((item.length==0||!$scope.rtoItem)&&flag=="rto"){$scope.rtoItem="";$scope.selectedItem1="";}
else if((item.length==0||!$scope.regItem)&&flag=="regyear"){$scope.regItem="";$scope.carreg="";}
else if((item.length==0||!$scope.ppeItem)&&flag=="ppe"){$scope.ppeItem="";$scope.carbreakingpol="";}
else if((item.length==0||!$scope.claimItem)&&flag=="claim"){$scope.claimItem="";$scope.carclaim="";}
else if((item.length==0||!$scope.claimItem)&&flag=="claimtaken"){$scope.claimTakenItem="";$scope.claimtaken="";}
else if((item.length==0||!$scope.claimItem)&&flag=="cng"){$scope.cngItem="";$scope.carkitstatus="";}
else if((item.length==0||!$scope.selectedincome)&&flag=="paymode"){$scope.payItem="";$scope.selectedincome="";}
else if((item.length==0||!$scope.childincometype)&&flag=="childpaymode"){$scope.childpayItem="";$scope.childincometype="";}
else if((item.length==0||!$scope.childincometype)&&flag=="pensionpaymode"){$scope.pensionpayItem="";$scope.payMode="";}}
function destinationList(item){if(item&&$scope.destinationList.length<10){let isMatch=0;for(let i=0;i<$scope.destinationList.length;i++){if($scope.destinationList[i].destinationName==item.destinationName){isMatch=1;break;}}
if(isMatch==0){$scope.destinationList.push(item)}}
else{$scope.DestinationError=true;$scope.dstErrorMessage="You can select maximum of 10 countries.";}}
$scope.removeChips=function(item){if(item){$scope.DestinationError=false;$scope.destinationList.splice($scope.destinationList.findIndex(a=>a.destinationName===item.destinationName),1)}}
$scope.commoncity1=function(flag){if($scope.commoncitystate.length==0){$scope.CityValue=false;$scope.citylisttemp=CommonService.citylist($scope);$scope.citylisttemp.then(function(result){result.data=angular.fromJson(result.data);var commoncitylist11=result.data;for(var i=0;i<commoncitylist11.length;i++){var temp={cityid:commoncitylist11[i].CityId+", "+commoncitylist11[i].StateId,cityname:commoncitylist11[i].City+", "+commoncitylist11[i].State,cityCategory:commoncitylist11[i].CityCategory};$scope.commoncitystate.push(temp);}});}};function crouselItems(){$scope.crouselList=[{id:0,name:"Priya Sharma",address:"Hyderabad",description:"I would like to appreciate all the efforts made for getting my claim   processed by insurejoy.com team. The support I received tremendous, Your team ensured that everything is done with utmost  care. Extremely appreciated!",class:"carousel-item active",cls:"active",img:"tm1"},{id:1,name:"Shreepad Parkhe",address:"Mumbai",description:"We feel extremely happy to have purchased the health insurance policy from insurejoy.com and are very thankful to the team for rendering their continuous support to us during the time of Claim of our Policy. Thanks insurejoy.com team",class:"carousel-item ",cls:"",img:"tm2"},{id:2,name:"Guru Bharadwaja",address:"Hyderabad",description:"My local agent was scaring and discouraging me from buying the policy online. But my claim was duly taken care by the insurejoy.com team for consecutive 2 years. I am extremely satisfied by the post issuance services of insurejoy.com.",class:"carousel-item",cls:"",img:"tm3"},{id:3,name:"Rakesh Nainiwal",address:"Delhi",description:"I was in flux when my insurer rejected my cashless claim due to hospital's negligence. insurejoy.com team, took me out from this situation and fought for my case and finally I got my claim amount from the insurer. I am really thankful!",class:"carousel-item",cls:"",img:"tm4"},{id:4,name:"Tejas Pratap",address:"Delhi",description:"I am very thankful to insurejoy.com team who gave me wonderful support  beyond my imagination. I am able to erase bad & formal image of a mediator due to my experience with insurejoy.com team. Feels like they are just a call away.",class:"carousel-item",cls:"",img:"tm5"}];}
$scope.slideCrosel=function(id){$scope.crouselList=[{id:0,name:"Priya Sharma",address:"Hyderabad",description:"I would like to appreciate all the efforts made for getting my claim   processed by insurejoy.com team. The support I received tremendous, Your team ensured that everything is done with utmost  care. Extremely appreciated!",class:"carousel-item active",cls:"active",img:"tm1"},{id:1,name:"Shreepad Parkhe",address:"Mumbai",description:"We feel extremely happy to have purchased the health insurance policy from insurejoy.com and are very thankful to the team for rendering their continuous support to us during the time of Claim of our Policy. Thanks insurejoy.com team",class:"carousel-item ",cls:"",img:"tm2"},{id:2,name:"Guru Bharadwaja",address:"Hyderabad",description:"My local agent was scaring and discouraging me from buying the policy online. But my claim was duly taken care by the insurejoy.com team for consecutive 2 years. I am extremely satisfied by the post issuance services of insurejoy.com.",class:"carousel-item",cls:"",img:"tm3"},{id:3,name:"Rakesh Nainiwal",address:"Delhi",description:"I was in flux when my insurer rejected my cashless claim due to hospital's negligence. insurejoy.com team, took me out from this situation and fought for my case and finally I got my claim amount from the insurer. I am really thankful!",class:"carousel-item",cls:"",img:"tm4"},{id:4,name:"Tejas Pratap",address:"Delhi",description:"I am very thankful to insurejoy.com team who gave me wonderful support  beyond my imagination. I am able to erase bad & formal image of a mediator due to my experience with insurejoy.com team. Feels like they are just a call away.",class:"carousel-item",cls:"",img:"tm5"}];let i;for(i=0;i<$scope.crouselList.length;i++){if(id==$scope.crouselList[i].id){$scope.crouselList[i].cls="active";$scope.crouselList[i].class="cr-item cr-active";}
else{$scope.crouselList[i].cls="";$scope.crouselList[i].class="cr-item";}}
if(id>=4){$scope.crouseltime=5;$scope.intervalpro=$interval($scope.slideCrosel,9000,$scope.crouseltime);}}
$scope.curssorEnter=function(){$interval.cancel($scope.intervalpro);}
$scope.curssorLeave=function(){$scope.crouseltime=5;$scope.intervalpro=$interval($scope.slideCrosel,3000,$scope.crouseltime);}
$scope.travelValidation=function(item,id,idx){if(id=="destination"){if(!item){$scope.DestinationError=true;$scope.dstErrorMessage="Country name is required.";}
else if(item.length==0){$scope.DestinationError=true;$scope.dstErrorMessage="Please select countries name from list.";}
else if(item.length>10){$scope.DestinationError=true;$scope.dstErrorMessage="You can select maximum of 10 countries.";}
else{$scope.DestinationError=false;}
return $scope.DestinationError;}
else if(id=="startdate"){if(!item){$scope.startdateError=true;}
else{$scope.startdateError=false;}
return $scope.startdateError;}
else if(id=="enddate"){if(!item){$scope.enddateError=true;}
else{$scope.enddateError=false;}
return $scope.enddateError;}
else if(id=="mobile"){if(!item){$scope.wrongMobile=true;$scope.wrongMobileMsg="Mobile no. is required.";}
else if(item.length<10){$scope.wrongMobile=true;$scope.wrongMobileMsg="Mobile no. must be 10 digit";}
else if(ValidationFactory.mobilevalidate(item)!="True"){$scope.wrongMobile=true;$scope.wrongMobileMsg="Invalid mobile no.";}
else{$scope.wrongMobile=false;}
return $scope.wrongMobile;}
else if(id=="age"){if(!item){$scope.ageError[idx]=true;}
else if(parseInt(item)==0){$scope.ageError[idx]=true;}
else{$scope.ageError[idx]=false;}
return $scope.ageError[idx];}}
$scope.renewalClickItem=function(item,flag){if(flag=="product"){if(item==1){$scope.showProductList=true;}
else{$scope.renewalProductType=item.id;$scope.renewalClaimProductItem=item.product;$scope.renewalProducterror=false;$scope.showProductList=false;$scope.renewalInsuranceCompany="";$scope.renewalClaimInsurer="";$scope.renewalInsuranceCompanyerror=false;$scope.insurerDisabled=false;$scope.getinsurer($scope.renewalProductType)}}
else if(flag=="insurer"){if(item==1){$scope.showInsurerList=true;}
else{$scope.renewalInsuranceCompany=item;$scope.renewalClaimInsurer=item.Insurer_Name;$scope.renewalInsuranceCompanyerror=false;$scope.showInsurerList=false;}}}
$scope.getPolicyDetails=function(){let flag=0;$scope.policyError="";if(!$scope.renewalProductType){$scope.renewalProducterror=true;flag=1;}
if(!$scope.renewalInsuranceCompany){$scope.renewalInsuranceCompanyerror=true;flag=1;}
else{if(($scope.datespecificmsg||$scope.dateerror||!$scope.IGdate||!$scope.IGmonth||!$scope.IGyear)&&$scope.renewalInsuranceCompany.InsurerId==4){flag=1;$scope.dateerror=true;}}
if(!$scope.renewalClaimPolicyNo){$scope.renewalPolicyerror=true;flag=1;}
else{$scope.renewalPolicyerror=false;}
if(flag==0){$scope.policyLoader=true;CommonService.GetRenewalPolicyBasicDetail($scope.renewalClaimPolicyNo,$scope.renewalProductType,$scope.renewalInsuranceCompany.InsurerId).then(function(result){if(result.data){if(!result.data.ErrorMessage){$scope.customerDetails=result.data.CustomerDetail;$scope.productId=parseInt($scope.renewalProductType);$scope.usermobile=$scope.customerDetails.MobileNumber.toString();$scope.IGQuoteId=$scope.customerDetails.LeadId;$scope.leadCreationfn($scope.productId);}
else{$scope.policyError=result.data.ErrorMessage;$scope.policyLoader=false;}}},function(rej){$scope.policyLoader=false;})}}
$scope.disableInput=function(e){e.preventDefault();}
$scope.renewalClosemblpop=function(item,flag){if(item==1){$scope.renewalMobilepop=false;$scope.productmblpop=false;$scope.insurermblpop=false;}
if(flag==1){if(item==2){$scope.renewalMobilepop=true;$scope.productmblpop=true;$scope.myInputFocus=true;}
else{$scope.renewalMobilepop=false;$scope.productmblpop=false;$scope.selectedProduct=item.product;$scope.renewalProductType=item.id;$scope.renewalInsuranceCompany="";$scope.renewalClaimInsurer="";$scope.selectedInsurer="";$scope.renewalInsuranceCompanyerror=false;$scope.insurerDisabled=false;$scope.getinsurer($scope.renewalProductType);}}
else if(flag==2){if(item==2){$scope.renewalMobilepop=true;$scope.insurermblpop=true;$scope.myInsurerInputFocus=true;}
else{$scope.renewalMobilepop=false;$scope.insurermblpop=false;$scope.renewalInsuranceCompany=item;$scope.selectedInsurer=item.Insurer_Name;$scope.renewalInsuranceCompanyerror=false;}}}
$scope.crouseltime=5;$scope.intervalpro=$interval($scope.slideCrosel,3000,$scope.crouseltime);},]);