var app=angular.module('App',['ngMaterial','ngAnimate','daterangepicker','analytics.mixpanel','ng.deviceDetector','ngStorage','ngBrowserInfo','pikaday']);app.constant('globals',{api:'Pankaj',fershDeskURL:'https://insurejoy.freshdesk.com/helpdesk/tickets.json',RedirectURL:"https://qa.indiacover360.com/Application/",ServiceURL:"https://apiqa.indiacover360.com",IGwServiceURL:"https://apiqa.indiacover360.com",UIURL:"https://qa.indiacover360.com/HomePage",landingPage:"https://qa.indiacover360.com",mainPage:"https://qa.indiacover360.com/Application/?CPID=",encryptionKey:'9080706050403020',encryptionIv:'1020304080706050',staticKey:'IG006072021'});app.config(['$locationProvider',function($locationProvider){$locationProvider.html5Mode({enabled:true,requireBase:false,rewriteLinks:false});}]);app.run(function($window,$rootScope){$rootScope.online=navigator.onLine;$window.addEventListener("offline",function(){$rootScope.$apply(function(){$rootScope.online=false;});},false);$rootScope.$on('$locationChangeSuccess',function(event,absNewUrl,absOldUrl){if(absOldUrl!=absNewUrl){if(absNewUrl.indexOf("BeenHerePop")!=-1){$rootScope.popredirect(1);}
else if(absNewUrl.indexOf("Searches")!=-1){$rootScope.popredirect(2);}
else if(absNewUrl.indexOf("NewCar")!=-1){$rootScope.popredirect(4);}
else if(absNewUrl.indexOf("NotRegistrationNo")!=-1){$rootScope.popredirect(5);}
else if(absNewUrl.indexOf("NewBike")!=-1){$rootScope.popredirect(6);}
else if(absNewUrl.indexOf("NoRegistrationNo")!=-1){$rootScope.popredirect(7);}
else if(absNewUrl.indexOf("CarMakeModel")!=-1){$rootScope.popredirect(8);}
else if(absNewUrl.indexOf("CarRto")!=-1){$rootScope.popredirect(9);}
else if(absNewUrl.indexOf("BikeMakeModel")!=-1){$rootScope.popredirect(10);}
else if(absNewUrl.indexOf("BikeRto")!=-1){$rootScope.popredirect(11);}
else if(absNewUrl.indexOf("CityPop")!=-1){$rootScope.popredirect(12);}
else if(absNewUrl.indexOf("AnnualIncomePop")!=-1){$rootScope.popredirect(13);}
else if(absNewUrl.indexOf("DestinationPop")!=-1){$rootScope.popredirect(14);}
else if(absNewUrl.indexOf("TravellerAge")!=-1){$rootScope.popredirect(15);}
else if(absNewUrl.indexOf("OTP")!=-1){$rootScope.popredirect(16);}
else if(absNewUrl.indexOf("Lastclaim")!=-1){$rootScope.popredirect(17);}
else{$rootScope.popredirect(3);}}});});angular.module('analytics.mixpanel').config(['$mixpanelProvider',function($mixpanelProvider){$mixpanelProvider.apiKey('33e718373fc7bd0a232caf1f745fa69e');}]);app.controller('MainController',["$scope","$rootScope","$mdToast","globals","$http","CommonService","DataFactory","$document","$location","$timeout","$window","TermFactory","$anchorScroll","$sce","$filter","$mixpanel","ValidationFactory","deviceDetector","$localStorage","$interval","browserInfo",function($scope,$rootScope,$mdToast,globals,$http,CommonService,DataFactory,$document,$location,$timeout,$window,TermFactory,$anchorScroll,$sce,$filter,$mixpanel,ValidationFactory,deviceDetector,$localStorage,$interval,browserInfo){if(window.innerWidth>=850){$scope.device="Desktop";}
else{$scope.device="Mobile";}
$scope.typeOfIssue=[{issue:"Payment Issue"},{issue:"Policy Related issue"},{issue:"Calling Support Issue (Misselling)"},{issue:"Website content issue"},{issue:"General Feedback"},{issue:"Other"}];$scope.complainBtn=true;var preprodnewepwservices='https://preprodnewepwservices.insurejoy.com';$scope.UtmSource="";$scope.carbreakingexp=0;$scope.$root.showmainloader=false;$scope.$root.scrollhide="home-bg bodymain";$scope.utmsourcedata="direct";$scope.utmcampaigndata="direct";$scope.utmCompaign="";$scope.$root.showonproposal=false;$scope.cityplaceholder="Loading Cities..";$scope.carpolicyexpdropdown=true;$scope.disablecity=true;$scope.showfastlaneclaimlast=true;$scope.appinitializedata=0;$scope.$root.mastercontent=false;$scope.$root.productBox="display-visible";$scope.$root.popupbikepage=false;$scope.utmTerm="";$scope.utmMedium="";$scope.$root.showloader=true;$scope.date=new Date();$scope.texttitleindex=0;$scope.showadultmess=false;$scope.year=$scope.date.getFullYear();;$scope.carregno=true;$scope.showmobileheader=true;$scope.bikeNo={};$scope.showmainform=false;$scope.$root.closepop=false;$scope.$root.backpop=false;$scope.$root.travelsecondpop=false;$scope.$root.showTopHeading=true;$scope.$root.showLogos=true;$scope.$root.CheckForNewQuotes=true;$scope.$root.travelfirstpop=true;$scope.commoncitystate1=[];$scope.HealthSavetime=0;$scope.BikeSavetime=0;$scope.ChildSavetime=0;$scope.InvestmentSavetime=0;$scope.PensionSavetime=0;$scope.CarMakeModeltime=0;$scope.BikeMakeModeltime=0;$scope.BikeRTOtime=0;$scope.CityListtime=0;$scope.CarSavetime=0;$scope.TravelSavetime=0;$scope.TermSavetime=0;$scope.TravelCountryListtime=0;$scope.childincometype="M";$scope.DobMessage="Parent's age should be (Min. 18 yrs & Max. 65 yrs)";$scope.carformfastlane="wow slideInRight";$scope.carformfastlane="wow slideInRight";$scope.termIncome=[{value:100000,text:"Below 3 lacs"},{value:300000,text:"3-4 lacs"},{value:400000,text:"4-7 lacs"},{value:700000,text:"7-10 lacs"},{value:1000000,text:"10-15 lacs"},{value:1500000,text:"15 and above"}];$scope.income=[{value:300000,text:"Below 3 lacs"},{value:400000,text:"3-4 lacs"},{value:700000,text:"4-7 lacs"},{value:1000000,text:"7-10 lacs"},{value:1500000,text:"10-15 lacs"},{value:2000000,text:"15 and above"}];$scope.investincome=[{value:"M",text:"Monthly"},{value:"Y",text:"Yearly"}];$scope.selectedincome=$scope.investincome[0].value;$scope.payMode=$scope.investincome[0].value;$scope.childincome=[{value:10000,text:"Below 3 lacs"},{value:20000,text:"3-4 lacs"},{value:50000,text:"4-7 lacs"},{value:75000,text:"7-10 lacs"},{value:100000,text:"10 Lacs and Above"}];$scope.carpoppetrol=[{value:"Kit1",text:"Don't have CNG/LPG Kit"},{value:"Kit2",text:"Have Company Fitted"},{value:"Kit3",text:"Have Externally Fitted"}];$scope.carpopcng=[{value:"Kit2",text:"Have Company Fitted"},{value:"Kit3",text:"Have Externally Fitted"}];$scope.carpoplpg=[{value:"Kit2",text:"Have Company Fitted"},{value:"Kit3",text:"Have Externally Fitted"}];var month=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var d=new Date();d.setDate(d.getDate()-88);var afterDATE=d.getDate();var afterMONTH=month[d.getMonth()];var afterYEAR=d.getFullYear();var beforeexpirydate=new Date();beforeexpirydate.setDate(beforeexpirydate.getDate()-87);var beforeDATE=beforeexpirydate.getDate();var beforeMONTH=month[beforeexpirydate.getMonth()];var beforeYEAR=beforeexpirydate.getFullYear();$scope.bikeexpired=[{value:0,text:"Not Yet Expired"},{value:90,text:"Expired after "+afterDATE+"-"+afterMONTH+"-"+afterYEAR},{value:91,text:"Expired before "+beforeDATE+"-"+beforeMONTH+"-"+beforeYEAR}];$scope.citylists=[{id:1,cityname:"Delhi"},{id:2,cityname:"Jaipur"}];$scope.maleclass="lmbutton activebt";$scope.femaleclass="lmbutton";$scope.a1class="lmbutton activebt";$scope.a2class="lmbutton";$scope.nosmokeclass="lmbutton activebt";$scope.smokeclass="lmbutton";$scope.formbikeproduct="Bike";$scope.bikeexpiredpol=0;$scope.chatagentname=["Himanshu","Tabish","Neeraj"];$scope.message='false';$scope.gender="M";$scope.showbikelastclaim=false;$scope.message='false';$scope.showrtofield=true;$scope.maincarpage=true;$scope.nClaim='';$scope.$root.popupcarpage=false;$scope.Year_Of_manufacturer='';$scope.result=[];$scope.result[2015]=0;$scope.result[2014]=20;$scope.result[2013]=25;$scope.result[2012]=35;$scope.result[2011]=45;$scope.result[2010]=50;$scope.message='false';$scope.bodyscroll="";$scope.showrtocity=false;$scope.carlabel=false;$scope.citylabel=false;$scope.carNo={};$scope.carNo.carRegNo='';$scope.selectedchild='0';$scope.selectedadult='1';$scope.tab=1;$scope.mainform_animation="to-animate intro-animate-66";$scope.$root.popuptravelpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popupchildpage=false;$scope.$root.popuptermpage=false;$scope.$root.popuphealthpage=false;$scope.$root.popupcarpage=false;$scope.carbreaking=1;$scope.healthfirstpop=true;$scope.bikefirstpop=true;$scope.termfirstpop=true;$scope.childfirstpop=true;$scope.investfirstpop=true;$scope.pensionfirstpop=true;$scope.healthformproname="Health";$scope.formgender="M";$scope.pensionformproname="Pension";$scope.investmentformproname="Investment";$scope.childformproname="Investment";$scope.formtobacco="False";$scope.formmarital="Married";$scope.termproductname="Term";$scope.formpolicyterm=50;$scope.chclass=["childbt activebt","childbt ","childbt ","childbt","childbt"];$scope.$root.sideNavShow=false;$scope.showheader=true;$scope.formproposer="abc@ig.com";$scope.forcarproduct="Car";$scope.carfuelcontainer=false;$scope.formddlkit="Kit0";$scope.formcarbtn="Get Live Quotes";$scope.ncbdisabled=true;$scope.bikemodellist=[];$scope.chatflag="car";$scope.messages=[];$scope.messages[0]={Id:1,msg:"Hi, there! What type of plan you are looking for?"};$scope.showplan=true;$scope.chatmainclass="chatbot-box-hidden";$scope.showchat1=false;$scope.showbeenhere=true;$scope.clientmsgid=1001;$scope.carbreakingpol=0;$scope.automsgid=2;$scope.carflag=false;$scope.chatageflag=false;$scope.chatchildageflag=false;$scope.prefilledcarflag=false;$scope.carpopup=false;$scope.carmaindetails=true;$scope.bikepopup=false;$scope.bikemaindetails=true;$scope.showQuotesButton=true;$scope.destinationList=[];$scope.bool=false;$scope.comparebuypop=false;$scope.ShowAgeSection=false;$scope.TotalMembers=[];$scope.dataValue=[];$scope.travelDestinations=[];$scope.DestinationError=false;$scope.todayDate=new Date();$scope.previousSearchShow=false;$scope.IsBeenHereBefore=false;$scope.DownloadApp=false;$scope.thanksMobilelink=false;$scope.ChildDetails=[];$scope.IsNewRequestFlag=0;$scope.txtCityStateForTerm=true;$scope.txtCityStateForHealth=true;$scope.ngCarcity=true;$scope.ngBikeRto=true;$scope.ngbiketype=true;$scope.showrtiomobile=true;$scope.termpopup=true;$scope.pensionpopup=true;$scope.investpopup=true;$scope.childpopup=true;$scope.showrtocity=true;$scope.showotpbox=false;$scope.carquotesleadrequest=ValidationFactory.GetEncryptedString();$scope.leadcreaterequestdata=ValidationFactory.GetLeadCreationEncryptedString();$scope.otpcreaterequestdata=ValidationFactory.GetOTPString1();$scope.minstartdatetravel=new Date().getMonth()+1+"/"+new Date().getDate()+"/"+new Date().getFullYear();var date1=new Date();date1.setDate(date1.getDate()+180);$scope.maxenddatetravel=date1.getMonth()+1+"/"+date1.getDate()+"/"+date1.getFullYear();var date2=new Date();date2.setDate(date2.getDate()+1);$scope.minenddatetravel=date2.getMonth()+1+"/"+date2.getDate()+"/"+date2.getFullYear();$scope.openmaintabform="in fadeInUp";$scope.PrevoiusPopUpAnimation="";if(window.innerWidth>=850){$scope.device="Desktop";}
else{$scope.device="Mobile";}
$scope.goToTop=function(){$location.hash('top');$anchorScroll();}
$scope.showPrevoiusPop=function(){$scope.$root.scrollhide="scrollhides";$scope.PrevoiusPop=true;if(($scope.PrevoiusPopUpAnimation=="out fadeOutDownBig")||($scope.PrevoiusPopUpAnimation=="")||($scope.PrevoiusPopShow=="bounceOut bounceOutLeft")){$scope.PrevoiusPopUp=true;$scope.PrevoiusPopUpAnimation="in fadeInUp";$scope.PrevoiusPopShow="in fadeInUp";}
else{$scope.PrevoiusPopUpAnimation="out fadeOutDownBig";}}
$scope.closePrevoiusPopUp=function(){$scope.PrevoiusPopUpAnimation="out fadeOutDownBig";$scope.$root.scrollhide="";}
$scope.checktermincomeerror=function(){if($scope.txtActualIncome!=undefined&&$scope.txtActualIncome!=null){$scope.annualerror=false;var arr=$scope.txtActualIncome.ActualIncomeText.split(" ");$scope.txtActualIncome.ActualIncomeValue=parseFloat(arr[0])*100000;$scope.validatedot($scope.txtActualIncome.ActualIncomeValue);}
else{$scope.annualerror=true;}}
$scope.mixpanelsidelink=function(product,category,section){$mixpanel.track('sidepanel',{"product":product,"category":category,"data":section});}
$scope.mixpanelet=function(et,section){$mixpanel.track(section,{"Property":et});}
$scope.footer=function(flag){$mixpanel.track('Footer Links',{"Property":flag});};$scope.opencomparebuypop=function(){$scope.IsNewRequestFlag=1;$scope.$root.showNavbar=false;$scope.$root.scrollhide="scrollhides";$scope.$root.planpop=true;if(($scope.comparebuypopAnimation=="out fadeOutDownBig")||($scope.comparebuypopAnimation=="")||($scope.planpopshow=="bounceOut bounceOutLeft")){$scope.$root.comparebuypop=true;$scope.comparebuypopAnimation="in fadeInUp";$scope.openmaintabform="in fadeInUp";$scope.$root.productBox="display-visible";$scope.planpopshow="in fadeInUp";}
else{$scope.comparebuypopAnimation="out fadeOutDownBig";$scope.openmaintabform="out fadeOutDownBig";}}
$scope.SetMaxTravelEndDate=function(){if($scope.travelStartDate!=undefined){$scope.travelEndDate='';$scope.datedifferror=false;var date3=new Date($scope.travelStartDate);date3.setDate(date3.getDate()+1);$scope.minenddatetravel=date3.getMonth()+1+"/"+date3.getDate()+"/"+date3.getFullYear();var maxdate=new Date($scope.minenddatetravel);maxdate.setDate(maxdate.getDate()+180);$scope.maxenddatetravel=maxdate.getMonth()+1+"/"+maxdate.getDate()+"/"+maxdate.getFullYear();$scope.travelEndDate1.setMinDate(new Date($scope.minenddatetravel));$scope.travelEndDate1.setMaxDate(new Date($scope.maxenddatetravel));if($scope.travelStartDate!=undefined){$scope.startdateError=false;}
else{$scope.startdateError=true;}}}
$scope.geticon=function(flag){if(flag==1){if($scope.mobileicontab[0].id>1){$scope.mobileicontab.splice(3,1);$scope.mobileicontab.splice(0,0,$scope.mobileicontab1[$scope.mobileicontab[0].id-2]);}}
else{if($scope.mobileicontab[3].id<7){$scope.mobileicontab.splice(0,1);$scope.mobileicontab.push($scope.mobileicontab1[$scope.mobileicontab[2].id]);}}}
$scope.makeauto=function(){$scope.popupautocomplete=true;}
$scope.hidescroll=function(){$scope.$root.scrollhide="scrollhides";}
$scope.showscroll=function(){$scope.$root.scrollhide="";}
$scope.getcarcityauto=function(item){$scope.selectedItem=item;$scope.popupautocomplete=false;}
$scope.testdate=function(flag,diff){var check=0;if($scope.IGdate==undefined&&flag==1){$scope.dateerror=true;check=1;}
else if($scope.IGmonth==undefined&&flag==2){$scope.dateerror=true;check=1;}
else if($scope.IGyear==undefined&&flag==3){$scope.dateerror=true;check=1;}
else{$scope.dateerror=false;}
if($scope.IGdate!=undefined&&$scope.IGmonth!=undefined&&$scope.IGyear!=undefined){if($scope.IGdate.length>=1&&$scope.IGmonth.length>=1&&$scope.IGyear.length==4){var d=new Date();var n=d.getFullYear();var m=d.getMonth();var yy=$scope.IGmonth+'-'+$scope.IGdate+'-'+$scope.IGyear;if(diff==1){$scope.age=$scope.getAge(yy);}
if(isNaN($scope.age)==true||isNaN(parseInt($scope.IGmonth))==true||isNaN(parseInt($scope.IGdate))==true||isNaN(parseInt($scope.IGyear))==true){check=1;$scope.age=undefined;}
if($scope.age<18){$scope.dateerror=true;check=1;}
if((ValidationFactory.onlynumber($scope.IGmonth)=="False")||(ValidationFactory.onlynumber($scope.IGdate)=="False")||(ValidationFactory.onlynumber($scope.IGyear)=="False")){$scope.dateerror=true;check=1;}
else if($scope.age>65&&$scope.product!="Health"){$scope.dateerror=true;check=1;}
else if($scope.age>100&&$scope.product=="Health"){$scope.dateerror=true;check=1;}
else if($scope.IGyear%4!=0&&$scope.IGyear%100!=0&&($scope.IGmonth==2||$scope.IGmonth==02)&&$scope.IGdate>28){$scope.dateerror=true;check=1;}
else if($scope.IGyear%400!=0&&$scope.IGyear%100==0&&($scope.IGmonth==2||$scope.IGmonth==02)&&$scope.IGdate>28){$scope.dateerror=true;check=1;}
if($scope.IGmonth>12||$scope.IGmonth<=0){$scope.dateerror=true;check=1;}
else if(($scope.IGmonth==2||$scope.IGmonth==02)&&$scope.IGdate>29){$scope.dateerror=true;check=1;}
else if(($scope.IGmonth==4||$scope.IGmonth==6||$scope.IGmonth==9||$scope.IGmonth==11)&&$scope.IGdate>30){$scope.dateerror=true;check=1;}
if($scope.IGdate>31||$scope.IGdate<=0){$scope.dateerror=true;check=1;}}
else{check=1;}}
if($scope.product=="Child"){if($scope.age<18||$scope.age>65){$scope.DobMessage="Parent's age should be (Min. 18 yrs & Max. 65 yrs)";$scope.dateerror=true;check=1;}}
if(check==1){$scope.formdob=undefined;$scope.dateerror=true;$scope.chatageflag=false;}
if(check==0&&$scope.IGdate!=undefined&&$scope.IGmonth!=undefined&&$scope.IGyear!=undefined){$scope.dateerror=false;$scope.chatageflag=true;$scope.agemonth=$scope.getmonth(yy);console.log($scope.agemonth);$scope.formdob=$scope.IGdate+'-'+$scope.IGmonth+'-'+$scope.IGyear;}
$scope.checkdate=check;}
$scope.childtestdate=function(flag,diff){var childcheck=0;if($scope.IGchilddate==undefined&&flag==1){$scope.datechilderror=true;childcheck=1;}
else if($scope.IGchildmonth==undefined&&flag==2){$scope.datechilderror=true;childcheck=1;}
else if($scope.IGchildyear==undefined&&flag==3){$scope.datechilderror=true;childcheck=1;}
else if(parseInt($scope.IGchilddate)==0||parseInt($scope.IGchildmonth)==0||parseInt($scope.IGchildyear)==0){$scope.datechilderror=true;childcheck=1;}
else{$scope.datechilderror=false;}
if($scope.IGchildmonth!=undefined&&$scope.IGchilddate!=undefined&&$scope.IGchildyear!=undefined){var d=new Date();var n=d.getFullYear();var m=d.getMonth();var yy=$scope.IGchildmonth+'-'+$scope.IGchilddate+'-'+$scope.IGchildyear;$scope.child_age=$scope.getAge(yy);if(isNaN($scope.child_age)==true||isNaN(parseInt($scope.IGchildmonth))==true||isNaN(parseInt($scope.IGchilddate))==true||isNaN(parseInt($scope.IGchildyear))==true){childcheck=1;$scope.child_age=undefined;}
if($scope.child_age>=18){$scope.datechilderror=true;childcheck=1;}
if(isNaN($scope.datechilderror)==true){check=1;}
if((ValidationFactory.onlynumber($scope.IGchildmonth)=="False")||(ValidationFactory.onlynumber($scope.IGchilddate)=="False")||(ValidationFactory.onlynumber($scope.IGchildyear)=="False")){$scope.datechilderror=true;childcheck=1;}
else if($scope.child_age<0){$scope.datechilderror=true;childcheck=1;}
else if($scope.IGchildyear%4!=0&&$scope.IGchildyear%100!=0&&($scope.IGchildmonth==2||$scope.IGchildmonth==02)&&$scope.IGchilddate>28){$scope.datechilderror=true;childcheck=1;}
else if($scope.IGchildyear%400!=0&&$scope.IGchildyear%100==0&&($scope.IGchildmonth==2||$scope.IGchildmonth==02)&&$scope.IGchilddate>29){$scope.datechilderror=true;childcheck=1;}
if($scope.IGchildmonth>12||$scope.IGchildmonth<=0){$scope.datechilderror=true;childcheck=1;}
else if(($scope.IGchildmonth==2||$scope.IGchildmonth==02)&&$scope.IGchilddate>29){$scope.datechilderror=true;childcheck=1;}
else if(($scope.IGchildmonth==4||$scope.IGchildmonth==6||$scope.IGchildmonth==9||$scope.IGchildmonth==11)&&$scope.IGchilddate>30){$scope.datechilderror=true;childcheck=1;}
if($scope.IGchilddate>31||$scope.IGchilddate<=0){$scope.datechilderror=true;childcheck=1;}}
if(childcheck==1){$scope.datechilderror=true;$scope.formchilddob=undefined;$scope.chatchildageflag=false;}
if(childcheck==0&&$scope.IGchilddate!=undefined&&$scope.IGchildmonth!=undefined&&$scope.IGchildyear!=undefined){if($scope.IGchildyear.length<4){$scope.datechilderror=true;childcheck=1;}
else{$scope.datechilderror=false;$scope.chatchildageflag=true;$scope.formchilddob=$scope.IGchilddate+'-'+$scope.IGchildmonth+'-'+$scope.IGchildyear;}}
$scope.checkchilddate=childcheck;}
$scope.getAge=function(dateString){var today=new Date();var tempage=dateString.split("-");var birthDate=new Date(parseInt(tempage[2]),(parseInt(tempage[0])-1),parseInt(tempage[1]));var age=today.getFullYear()-birthDate.getFullYear();var m=today.getMonth()-birthDate.getMonth();if(m<0||(m===0&&today.getDate()<birthDate.getDate())){age--;}
return age;}
$scope.getmonth=function(dateString){var tempage=dateString.split("-");var past_date=new Date(tempage[2],tempage[1],tempage[0]);var current_date=new Date();var difference=(current_date.getFullYear()*12+current_date.getMonth())-(past_date.getFullYear()*12+past_date.getMonth());return difference;}
$scope.checkincomeerror=function(flag){if($scope.selectedincome==undefined||$scope.selectedincome==null||$scope.selectedincome=='Y'){$scope.incomeerror=true;flag=1;}
else{$scope.incomeerror=false;$scope.forminvestamtvalue=$scope.selectedincome;$scope.formsuminsured=$scope.selectedincome;}}
$scope.nonTermvalidate=function(value,flag){if(flag=='pension'){$scope.selectedincome=$scope.payMode;}
var income=parseInt(value);if(flag=='child'){$scope.incomeerror=false;if(value==undefined||value==''||value==null||isNaN(value)){$scope.incomeerror=true;}
if($scope.childincometype=='M'&&income<850||$scope.childincometype=='Y'&&income<10000){flag=0;$scope.incomeerror=true;}
else if($scope.childincometype=='M'&&income>416666||$scope.childincometype=='Y'&&income>5000000){flag=0;$scope.incomeerror=true;}}
else{if(value){if($scope.selectedincome=='M'&&(income<500||income>416666)){$scope.annualerror=true;$scope.annualErrorMessage="Enter value from 500 to 4,16,666"}
else if($scope.selectedincome=='Y'&&(income<5000||income>5000000)){$scope.annualerror=true;$scope.annualErrorMessage="Enter value from 5k to 50L"}
else{$scope.annualerror=false;}}
else{$scope.annualerror=true;$scope.annualErrorMessage="Investment amount is required."}
return $scope.annualerror;}}
$scope.TimeOutService=function(time,urlservice,ServiceName,product,timetaken){var vm=this;vm.data=deviceDetector;vm.allData=JSON.stringify(vm.data,null,2);var TimeOut=CommonService.TimeOutProposalService(0,product,vm.data.browser,vm.data.os_version,urlservice,time,$scope.ip,ServiceName,$scope.device,timetaken);TimeOut.then(function(result){TimeOut=result.data;});}
$scope.checkforincomeerror=function(flag){if($scope.selectedincome==undefined){flag=1;}
else{$scope.incomeerror=false;var incomearray=$scope.selectedincome.split(',');$scope.formsuminsured=incomearray[1].toString();$scope.txtSumAssuredRange=incomearray[0].toString();}}
$scope.formatReg=function(event,registrationNo,flag){if(event.keyCode!=8){var regNo=registrationNo;if(flag==1){$scope.carregnumber=regNo;$scope.carregnumber=$scope.carregnumber.toUpperCase();}
else{$scope.bikeregnumber=regNo;$scope.bikeregnumber=$scope.bikeregnumber.toUpperCase();}}}
$scope.$watch('online',function(){if(!$rootScope.online){$mdToast.show($mdToast.simple().textContent('Uhoh, we\'ve lost you... Please check your connection.').hideDelay(3000).position('top right'));}});$scope.validate=function(){if($scope.carregnumber!=undefined)
$scope.carregnumber=$scope.carregnumber.replace(/\s/g,"");var patt1=/^[A-Z]{1}[0-9A-Za-z]{4,12}[0-9]{1}$/;if($scope.carregnumber!=undefined&&$scope.carregnumber!=""){var bool=patt1.test($scope.carregnumber.replace(/-/g,"").toUpperCase());}
else{bool=false;}
if($scope.carregnumber!=undefined&&bool==true&&$scope.carregnumber.length>4){$scope.patternFails=false;var temp=$scope.carregnumber.split("-");$scope.carNo.registrationNo=temp[0];for(i=1;i<temp.length;i++){$scope.carNo.registrationNo+=temp[i];}
$scope.CallWEBAPIService();}
else{$scope.patternFails=true;$scope.regnoerrortext="Enter correct car registration no.";}}
$scope.bikevalidate=function(){if($scope.bikeregnumber!=undefined)
$scope.bikeregnumber=$scope.bikeregnumber.replace(/\s/g,"");if($scope.bikeregnumber!=undefined){var patt=/[A-Z]{2}[0-9]{1,2}[A-Z]{1,3}[0-9]{4}$/;var patt1=/^[A-Z]{1}[0-9A-Za-z]{4,12}[0-9]{1}$/;var bool=patt1.test($scope.bikeregnumber.replace(/-/g,"").toUpperCase());if(!bool){$scope.patternFails1=true;$scope.regnoerrortext="Enter correct bike registration no.";}else{$scope.patternFails1=false;var temp=$scope.bikeregnumber.split("-");$scope.bikeNo.registrationNo=temp[0];for(i=1;i<temp.length;i++){$scope.bikeNo.registrationNo+=temp[i];}
$scope.CallWEBAPIServicebike(false);}}
else{$scope.patternFails1=true;$scope.regnoerrortext="Enter correct bike registration no.";}}
$scope.CallWEBAPIServicebike=function(apiFlag){var temp=$scope.bikeregnumber+"|false";var timeoutvar=0;var time="2000";var urlservice=globals.IGwServiceURL+"/VehicleLookupService.svc/web/GetVehicleLookup";var ServiceName="VehicleLookupService";$scope.bikenoresult=undefined;$scope.fastlanebikeresult=CommonService.fastlane(temp,$scope);$timeout(function(){if(timeoutvar==0){$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[1].product);timeoutvar=2;}
else{timeoutvar=0;}},2000);$scope.fastlanebikeresult.then(function(result){if(timeoutvar==2){var timeoutvar=new Date().getTime();var dvar=(timeoutvar-$scope.timeoutarray['fastlane']);$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[1].product,dvar);}
console.log(result);timeoutvar=1;if(result.data=="Registration number belongs to a  CAR"){$scope.regnoerrortext=result.data;$scope.patternFails1=true;}
else{result.data=angular.fromJson(result.data);console.log(result.data);if(result.data.length==0){$scope.selectedbikemmv=null;$scope.searchText101=undefined;$scope.bikenoresult=!0;$scope.selectedbikerto=null;$scope.searchText10=undefined;$scope.selectedbikemakepop=undefined;$scope.selectedbikertopop=undefined;$localStorage.searchText10=null;$localStorage.selectedbikemakepop==null;$localStorage.selectedbikertopop==null;$localStorage.searchText101==null;$localStorage.selectedbikemmv==null;}
else{$scope.bikenoresult=false;$scope.patternFails1=false;$scope.fastlaneresultbike=result.data[0];if($scope.fastlaneresultbike.RegistrationDate!=undefined){var dateObj=new Date($scope.fastlaneresultbike.RegistrationDate);var month=dateObj.getMonth()+1;var day=dateObj.getDate();var year=dateObj.getFullYear();var date=day+"-"+month+"-"+year;$scope.Registrationdate=JSON.parse(CommonService.stringifyWcf(date,1))}
$scope.carflag=true;var Fuel_Type=$scope.fastlaneresultbike.MakeModel.split(',')[1];var CC=$scope.fastlaneresultbike.MakeModel.split(',')[3];var Year_Of_manufacturer=$scope.fastlaneresultbike.ManufactureYear;var Seating_Capacity=$scope.fastlaneresultbike.MakeModel.split(',')[2];var series=$scope.fastlaneresultbike.MakeModel;var ChasisNo=$scope.fastlaneresultbike.ChassisNumber;var EngineNo=$scope.fastlaneresultbike.EngineNumber;var Reg_no=$scope.fastlaneresultbike.RegistrationNumber;var regyeartemp=$scope.regyear1;$scope.bikeengineno=EngineNo;$scope.bikechasisno=ChasisNo;$scope.bikeregnofastlane="";for(i=4;i<Reg_no.length;i++){$scope.bikeregnofastlane=$scope.bikeregnofastlane+Reg_no[i]}
console.log($scope.bikeregnofastlane);$scope.selectedbikemmv={bikename:series,makeid:$scope.fastlaneresultbike.MakeModelIds.split(",")[0],modelid:$scope.fastlaneresultbike.MakeModelIds.split(",")[1]};$scope.checkbikelisterror();$scope.bikereg=Year_Of_manufacturer;$scope.selectedbikemakepop=series;$scope.bikechasisno=ChasisNo;$scope.bikeengineno=EngineNo;$scope.txtbiketype=$scope.selectedbikemmv.bikename;var rtocodeforapi=$scope.fastlaneresultbike.RTOCode;$scope.updatedbikerto=CommonService.bikertoservice("",rtocodeforapi);$scope.updatedbikerto.then(function(result){result.data=angular.fromJson(result.data);$scope.selectedbikerto={cityid:result.data[0].CityCode,stateid:result.data[0].StateCode,RTOCode:$scope.fastlaneresultbike.RTOCode,cityname:result.data[0].CityName};$scope.checkbikertoerror();$scope.bikeregyear();$scope.bikepolicyexp();$scope.txtbikerto=$scope.selectedbikerto.cityname;console.log("car");console.log(result)},function(response){ServiceRespnse(response);});}}},function(response){ServiceRespnse(response);});}
$scope.CallWEBAPIService=function(){var temp=$scope.carregnumber+"|true";$scope.fastlanecarresult=CommonService.fastlane(temp);var timeoutvar=0;var time="2000";var urlservice=globals.IGwServiceURL+"/VehicleLookupService.svc/web/GetVehicleLookup";var ServiceName="VehicleLookupService";$timeout(function(){if(timeoutvar==0){$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[0].product);timeoutvar=2;}
else{timeoutvar=0;}},2000);$scope.selectedItem=null;$scope.selectedItem1=null;$scope.carreg=undefined;$scope.carclaim=undefined;$scope.carkitstatus=undefined;$scope.searchText2=undefined;$scope.fastlanecarresult.then(function(result){console.log(result);if(result.data=="Registration number belongs to a  TwoWheeler"){$scope.regnoerrortext=result.data;$scope.patternFails=true;}
else{result.data=angular.fromJson(result.data);console.log(result.data);if(timeoutvar==2){var timeoutvar=new Date().getTime();var dvar=(timeoutvar-$scope.timeoutarray['fastlane']);$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[0].product,dvar);}
timeoutvar=1;$scope.fastlaneresult=result.data[0];if(result.data.length==0){$scope.fastlanenohit=true;$scope.selectedItem=undefined;$scope.selectedItem1=undefined;$scope.searchText1=undefined;$scope.carreg=undefined;$localStorage.carkitstatus=null;$localStorage.selectedItem=null;$localStorage.selectedItem1=null;$localStorage.searchText1=null;$localStorage.carreg=null;$localStorage.carkitstatus=null;}
else{$scope.fastlanenohit=false;$scope.patternFails=false;console.log("yes");$scope.carflag=true;if($scope.fastlaneresult.RegistrationDate!=undefined){var dateObj=new Date($scope.fastlaneresult.RegistrationDate);var month=dateObj.getMonth()+1;var day=dateObj.getDate();var year=dateObj.getFullYear();var date=day+"-"+month+"-"+year;$scope.Registrationdate=JSON.parse(CommonService.stringifyWcf(date,1));}
var Fuel_Type=$scope.fastlaneresult.MakeModel.split(',')[1];var CC=$scope.fastlaneresult.MakeModel.split(',')[3];var Year_Of_manufacturer=$scope.fastlaneresult.ManufactureYear;var Seating_Capacity=$scope.fastlaneresult.MakeModel.split(',')[2];var series=$scope.fastlaneresult.MakeModel;var ChasisNo=$scope.fastlaneresult.ChassisNumber;var EngineNo=$scope.fastlaneresult.EngineNumber;var Reg_no=$scope.fastlaneresult.RegistrationNumber;$scope.carengineno=EngineNo;$scope.carchasisno=ChasisNo;var regyeartemp=$scope.regyear1;var temparray=[];var yeargap=$scope.year-Year_Of_manufacturer;for(var i=0;i<=yeargap;i++){if(regyeartemp.length>=i){temparray.push(regyeartemp[i]);}}
$scope.regyear=temparray;$scope.showcarncb=true;$scope.claimtaken=undefined;$scope.selectedcarmakepop=series;if(Fuel_Type.trim()=="DIESEL"){$scope.carkitstatus=undefined;$scope.formddlkit="Kit0";$scope.carfuelcontainer=false;}
else if(Fuel_Type.trim()=="CNG"){$scope.carkitstatus=undefined;$scope.formddlkit="Kit0";$scope.carfuelcontainer=false;}
else if(Fuel_Type.trim()=="LPG"){$scope.carkitstatus=undefined;$scope.carcnglpg=$scope.carpoplpg;$scope.carfuelcontainer=true;}
else if(Fuel_Type.trim()=="PETROL"){$scope.carkitstatus=undefined;$scope.carcnglpg=$scope.carpoppetrol;$scope.carfuelcontainer=true;}
$scope.formcarwidget=series;$scope.selectedItem={};$scope.selectedItem1={};$scope.selectedItem.ModelName=series;$scope.selectedItem.MakeId=$scope.fastlaneresult.MakeModelIds.split(",")[0].trim();$scope.selectedItem.ModelId=$scope.fastlaneresult.MakeModelIds.split(",")[1].trim();$scope.yearOfRegistration=Year_Of_manufacturer;$scope.forcarreg=Year_Of_manufacturer;$scope.carreg=Year_Of_manufacturer;$scope.formlblregno=$scope.carregnumber.toUpperCase();$scope.formchasisno=ChasisNo;$scope.formengineno=EngineNo;var regcode=$scope.fastlaneresult.RTOCode;regcode=regcode.toUpperCase();$scope.selectedItem1.CityName="("+regcode+") "+result.data[0].CityName+","+result.data[0].StateName;$scope.selectedItem1.RTOCode=regcode;$scope.selectedItem1.StateCode=result.data[0].StateId;$scope.selectedItem1.CityCode=result.data[0].CityId;$scope.txtcarvariant=$scope.selectedItem.ModelName;$scope.txtCarcity=$scope.selectedItem1.CityName;$scope.PopulateClaimddl();}}});}
$scope.closepop1=function(){$scope.claimtaken=undefined;$scope.$root.comparebuypop=false;$scope.$root.popupcarpage=false;$scope.$root.scrollhide="";if($scope.productpop=="bounceInDown"){$scope.productpop="out fadeOutDownBig";}
else{$scope.productpop="bounceInD bounceInDown";}
$scope.showchat1=false;$scope.showchatmsg=true;$scope.showheader=true;$scope.showmobileheader=true;}
$scope.backpop1=function(){if($scope.carpopup==true){$scope.carProceedBtnLoader=false;$scope.carNo.registrationNo=undefined;$scope.carmaindetails=true;$scope.carpopup=false;$scope.carregnumber=undefined;$scope.carengineno=undefined;$scope.carchasisno=undefined;$scope.claimtaken=undefined;if($scope.userdata!=undefined){if($scope.userdata.length>0){if($scope.userdata[0].Product=="Car"&&$scope.$root.planpop==false){$scope.$root.backpop=false;}}}}
else if($scope.carmaindetails==true){$scope.productpop="bounceOut bounceOutLeft";$scope.planpopshow="bounceInRight";$scope.$root.comparebuypop=true;$scope.$root.scrollhide="scrollhides";}}
$scope.backpop2=function(){if($scope.bikepopup==true){$scope.bikeProceedBtnLoader=false;$scope.bikeNo.registrationNo=undefined;$scope.bikemaindetails=true;$scope.bikepopup=false;$scope.$root.bikeregno=true;f($scope.userdata!=undefined)
{if($scope.userdata.length>0){if($scope.userdata[0].Product=="Twowheeler"&&$scope.$root.planpop==false){$scope.$root.backpop=false;}}}}
else if($scope.bikemaindetails==true){$scope.productpop="bounceOut bounceOutLeft";$scope.planpopshow="bounceInRight";$scope.$root.comparebuypop=true;$scope.$root.scrollhide="scrollhides";}}
$scope.backpop3=function(){$scope.productpop="bounceOut bounceOutLeft";$scope.planpopshow="bounceInRight";$scope.$root.comparebuypop=true;$scope.$root.scrollhide="scrollhides";$scope.$root.travelfirstpop=false;$scope.$root.travelsecondpop=false;}
$scope.backpop4=function(){if($scope.$root.travelsecondpop==true){$scope.travelProceedBtnLoader=false;$scope.$root.travelfirstpop=true;$scope.$root.travelsecondpop=false;$scope.travelpopSecond="display-none";$scope.travelpopFirst="display-visible";if($scope.userdata!=undefined){if($scope.userdata.length>0){if($scope.userdata[0].Product=="Travel"&&$scope.$root.planpop==false){$scope.$root.backpop=false;}}}}
else if($scope.$root.travelfirstpop==true){$scope.productpop="bounceOut bounceOutLeft";$scope.planpopshow="bounceInRight";$scope.$root.comparebuypop=true;$scope.$root.scrollhide="scrollhides";}}
$scope.closepop=function(){$scope.$root.popupcarpage1=false;$scope.bodyscroll="";$scope.$root.popupcarpage=false
$scope.showchat1=false;$scope.showchatmsg=true;}
$scope.closepopall=function(flag){$scope.showchat1=false;$scope.showchatmsg=true;$scope.showheader=true;if($scope.userdata[0]!=undefined&&$scope.userdata[0].EditFlag==true){}
else{if(flag==2){$scope.$root.comparebuypop=false;$scope.$root.popupbikepage=false;$scope.$root.scrollhide="";if($scope.productpop=="bounceInDown"){$scope.productpop="out fadeOutDownBig";}
else{$scope.productpop="bounceInD bounceInDown";}}
else if(flag==3){$scope.$root.comparebuypop=false;$scope.$root.popuphealthpage=false;$scope.$root.scrollhide="";if($scope.productpop=="bounceInDown"){$scope.productpop="out fadeOutDownBig";}
else{$scope.productpop="bounceInD bounceInDown";}
$scope.healthsecondpop=false;$scope.healththirdpop=false;$scope.healthfirstpop=true;}
else if(flag==4){$scope.$root.comparebuypop=false;$scope.$root.popuptermpage=false;$scope.$root.scrollhide="";if($scope.productpop=="bounceInDown"){$scope.productpop="out bounceOutDown";}
else{$scope.productpop="bounceInD bounceInDown";}
$scope.termsecondpop=false;$scope.termthirdpop=false;$scope.termfirstpop=true;}
else if(flag==5){$scope.$root.comparebuypop=false;$scope.$root.popupchildpage=false;$scope.$root.scrollhide="";if($scope.productpop=="bounceInDown"){$scope.productpop="out bounceOutDown";}
else{$scope.productpop="bounceInD bounceInDown";}
$scope.childthirdpop=false;$scope.childsecondpop=false;$scope.childfirstpop=true;}
else if(flag==6){$scope.$root.comparebuypop=false;$scope.$root.popupinvestmentpage=false;$scope.$root.scrollhide="";if($scope.productpop=="bounceInDown"){$scope.productpop="out bounceOutDown";}
else{$scope.productpop="bounceInD bounceInDown";}
$scope.investsecondpop=false;$scope.investfirstpop=true;}
else if(flag==7){$scope.$root.comparebuypop=false;$scope.$root.popuppensionpage=false;$scope.$root.scrollhide="";if($scope.productpop=="bounceInDown"){$scope.productpop="out bounceOutDown";}
else{$scope.productpop="bounceInD bounceInDown";}
$scope.pensionsecondpop=false;$scope.pensionfirstpop=true;}
else if(flag==8){$scope.$root.comparebuypop=false;$scope.$root.popuptravelpage=false;$scope.$root.scrollhide="";if($scope.productpop=="bounceInDown"){$scope.productpop="out bounceOutDown";}
else{$scope.productpop="bounceInD bounceInDown";}
$scope.$root.travelfirstpop=true;$scope.$root.travelsecondpop=false;}}}
console.log=function(){}
$scope.maintabform=function(newTab){$scope.showheader=false;if(newTab==1){$mixpanel.track('Product Page',{"Product":"Car"});$scope.$root.popuphealthpage=false;$scope.$root.popuptermpage=false;$scope.$root.popupchildpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popupbikepage=false;$scope.$root.popupcarpage=true;$scope.$root.scrollhide="scrollhides";$scope.$root.closepop=false;$scope.$root.backpop=true;$scope.carpopup=false;$scope.carmaindetails=true;$scope.bikeregno=false;$scope.carregno=true;$scope.cartab="active cartab";$scope.biketab="biketab";$scope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";$scope.regerror=false;$scope.regnoerrortext="";}
if(newTab==2){$mixpanel.track('Product Page',{"Product":"'Two Wheeler"});$scope.carformfastlane="";$scope.$root.popuphealthpage=false;$scope.$root.popuptermpage=false;$scope.$root.popupchildpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=true;$scope.$root.scrollhide="scrollhides";$scope.$root.closepop=false;$scope.$root.backpop=true;$scope.bikepopup=false;$scope.bikemaindetails=true;$scope.carregno=false;$scope.$root.bikeregno=true;$scope.biketab="active biketab";$scope.cartab="cartab";$scope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";$scope.regnoerrortext="";$scope.getlinkbikepop();}
else if(newTab==3){$mixpanel.track('Product Page',{"Product":"Health"});$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popuptermpage=false;$scope.$root.popupchildpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popuphealthpage=true;$scope.$root.scrollhide="scrollhides";$scope.$root.closepop=false;$scope.$root.backpop=true;$scope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";}
else if(newTab==4){$mixpanel.track('Product Page',{"Product":"Term"});$scope.$root.popuphealthpage=false;$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popupchildpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popuptermpage=true;$scope.$root.scrollhide="scrollhides";$scope.$root.closepop=false;$scope.$root.backpop=true;$scope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";}
else if(newTab==5){$mixpanel.track('Product Page',{"Product":"Child"});$scope.$root.popuptermpage=false;$scope.$root.popuphealthpage=false;$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popupchildpage=true;$scope.$root.scrollhide="scrollhides";$scope.$root.closepop=false;$scope.$root.backpop=true;$scope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";}
else if(newTab==6){$mixpanel.track('Product Page',{"Product":"Investment"});$scope.refreshSlider();$scope.annualerror=false;$scope.incomeerror=false;$scope.dateerror=false;$scope.paymenterror=false;$scope.$root.popupchildpage=false;$scope.$root.popuptermpage=false;$scope.$root.popuphealthpage=false;$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popupinvestmentpage=true;$scope.payMode=$scope.investincome[1].value;$scope.$root.scrollhide="scrollhides";$scope.$root.closepop=false;$scope.$root.backpop=true;$scope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";$scope.selectedincome=$scope.investincome[1].value;}
else if(newTab==7){$mixpanel.track('Product Page',{"Product":"Pension"});$scope.annualerror=false;$scope.incomeerror=false;$scope.dateerror=false;$scope.paymenterror=false;$scope.$root.popupchildpage=false;$scope.$root.popuptermpage=false;$scope.$root.popuphealthpage=false;$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popuppensionpage=true;$scope.$root.scrollhide="scrollhides";$scope.$root.closepop=false;$scope.$root.backpop=true;$scope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";$scope.payMode=$scope.investincome[1].value;$scope.annuity='self';}
else if(newTab==8){$mixpanel.track('Product Page',{"Product":"Travel"});$scope.$root.popupchildpage=false;$scope.$root.popuptermpage=false;$scope.$root.popuphealthpage=false;$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=true;$scope.$root.scrollhide="scrollhides";$scope.$root.travelfirstpop=true;$scope.$root.travelsecondpop=false;$scope.$root.closepop=false;$scope.$root.backpop=true;$scope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";$scope.$root.productBox="display-visible";$scope.travelpopFirst="display-visible";if($scope.selectedTravellers!=undefined&&$scope.selectedTravellers!=null){$scope.checkNoOfTravellerError();}}
$scope.mainform_animation="";if($scope.tab<newTab){$scope.mainform_animation="to-animate intro-animate-66";}
else{$scope.mainform_animation="to-animate intro-animate-66";}}
$scope.isSet=function(tabNum){$scope.$root.popupcarpage1=true;$scope.$root.scrollhide="scrollhides";return $scope.tab===tabNum;};$scope.getpensionquote=function(){$scope.wrongotpmsgshow=false;$scope.userOTP=undefined;$scope.errorId="";var productid=6;$scope.dateerror=false;var flag=1;var income=parseInt($scope.txtActualIncome);if($scope.txtActualIncome==''||$scope.txtActualIncome==undefined||isNaN($scope.txtActualIncome)){flag=0;$scope.annualerror=true;}
else{$scope.annualerror=false;}
if($scope.payMode==undefined||$scope.payMode==''){flag=0;$scope.errorId="error-outline";}
if($scope.formdob==undefined||$scope.IGdate==undefined||$scope.IGmonth==undefined||$scope.IGyear==undefined){flag=0;$scope.dateerror=true;}
else{$scope.dateerror=false;}
if($scope.payMode=='M'&&income<850||$scope.payMode=='Y'&&income<10000){flag=0;$scope.annualerror=true;}
else if($scope.payMode=='M'&&income>41666||$scope.payMode=='Y'&&income>500000){flag=0;$scope.annualerror=true;}
else{$scope.annualerror=false;}
if(isNaN(income)){flag=0;$scope.annualerror=true;}
var DateDiff=(ValidationFactory.AgeGroup($scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear)/12);if(DateDiff<18||DateDiff>60){$scope.dateerror=true;flag=0;}
if($scope.userMobile==undefined||$scope.userMobile==null||isNaN($scope.userMobile)==true||$scope.userMobile.toString().length<10||$scope.userMobile.toString().length>10){$scope.mobileerror=true;flag=0;}
if(flag==1){$localStorage.maleclass=$scope.maleclass;$localStorage.femaleclass=$scope.femaleclass;$localStorage.gender=$scope.gender;$localStorage.formgender=$scope.formgender;$localStorage.IGdate=$scope.IGdate;$localStorage.IGmonth=$scope.IGmonth;$localStorage.IGyear=$scope.IGyear;$localStorage.formdob=$scope.formdob;$localStorage.txtActualIncome1=$scope.txtActualIncome;$localStorage.payMode=$scope.payMode;$localStorage.userMobile=$scope.userMobile;$scope.showbtnpensionloader=true;var currentPage=$location.absUrl();$scope.utm_source="";$scope.utm_campaign="";$scope.utm_term="";$scope.utm_medium="";$scope.insDOB=$scope.IGdate+'-'+$scope.IGmonth+'-'+$scope.IGyear;var today=new Date();if(flag==1){if(currentPage.indexOf("utm_source")!=-1){$scope.utm_source=currentPage.slice(currentPage.indexOf("utm_source=")+11).split("&")[0];}
if(currentPage.indexOf("utm_campaign")!=-1){$scope.utm_campaign=currentPage.slice(currentPage.indexOf("utm_campaign=")+13).split("&")[0];}
if(currentPage.indexOf("utm_term")!=-1){$scope.utm_term=currentPage.slice(currentPage.indexOf("utm_term=")+9).split("&")[0];}
if(currentPage.indexOf("utm_medium")!=-1){$scope.utm_medium=currentPage.slice(currentPage.indexOf("utm_medium=")+11).split("&")[0];}
$mixpanel.track("Form Submitted",{'Product':$scope.products[6].product,"UtmSource":$scope.utm_source,"DOB":$scope.formdob,"Gender":$scope.formgender,"Amount":income,"PayingMode":$scope.payMode});$scope.nontermdata={"userdetails":{"IGQuoteId":0,"PartnerAgentId":"String content","PartnerLeadId":"String content","RequestType":"String content","Requests":[{"__type":"NonTermRequest:#ServiceEntities","DOBs":[$scope.insDOB],"Features":[{"__type":"BooleanFeature:#ServiceEntities","Name":"ReturnOfPurchasePrice"},{"__type":"BooleanFeature:#ServiceEntities","Name":"LumpSumOnRetirement"}],"Amount":$scope.txtActualIncome+","+$scope.payMode,"MaturityTerm":0,"Gender":$scope.gender,"CityId":3502,"ProductId":6,"MinRisk":0,"MaxRisk":0,"PensionFor":$scope.annuity,"PaymentDuration":$scope.PaymentDuration,"PensionTill":$scope.PensionTill}],"ServiceTimeOut":2147483647,"utmCompaign":$scope.utm_campaign,"utmMedium":$scope.utm_medium,"utmSource":$scope.utm_source,"utmTerm":$scope.utm_term}};var saveRequirementData=CommonService.savePensionRequirementData($scope,globals);var time="3000";var urlservice=globals.ServiceURL+"/QuoteService.svc/web/Save";var ServiceName="QuoteService";$timeout(function(){if($scope.PensionSavetime==0){$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[6].product)
$scope.PensionSavetime=2;}
else{$scope.PensionSavetime=0;}},3000);saveRequirementData.then(function(pl){if($scope.PensionSavetime==2){var timeoutvar=new Date().getTime();var dvar=(timeoutvar-$scope.timeoutarray['saveservice']);$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[6].product,dvar);}
$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=JSON.parse(angular.toJson(pl.data.Message));$scope.PensionSavetime=1;if($scope.IGQuoteId>0){$scope.otpFn(1,productid);}
else{$scope.showbtnpensionloader=false;}},function(response){ServiceRespnse(response);});}}}
$scope.getinvestquotes=function(){$scope.wrongotpmsgshow=false;$scope.userOTP=undefined;$scope.errorId="";var productid=5;var flag=1;if($scope.formdob==undefined||$scope.IGdate==undefined||$scope.IGmonth==undefined||$scope.IGyear==undefined){flag=0;$scope.dateerror=true;}
else{var d=new Date();var age=(ValidationFactory.AgeGroup($scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear)/12);if(age<18||age>65||age==NaN){$scope.dateerror=true;flag=0;}
else{$scope.dateerror=false;}}
if($scope.nonTermvalidate($scope.txtActualIncome)){flag=0;}
if($scope.userMobile==undefined||$scope.userMobile==null||isNaN($scope.userMobile)==true||$scope.userMobile.toString().length<10||$scope.userMobile.toString().length>10){$scope.mobileerror=true;flag=0;}
if(flag==1){var income=parseInt($scope.txtActualIncome);$localStorage.maleclass=$scope.maleclass;$localStorage.femaleclass=$scope.femaleclass;$localStorage.gender=$scope.gender;$localStorage.formgender=$scope.formgender;$localStorage.IGdate=$scope.IGdate;$localStorage.IGmonth=$scope.IGmonth;$localStorage.IGyear=$scope.IGyear;$localStorage.formdob=$scope.formdob;$localStorage.txtActualIncome1=$scope.txtActualIncome;$localStorage.selectedincome1=$scope.selectedincome;$scope.showbtninvestloader=true;$localStorage.userMobile=$scope.userMobile;var currentPage=$location.absUrl();$scope.utm_source="";$scope.utm_campaign="";$scope.utm_term="";$scope.utm_medium="";$scope.insDOB=$scope.IGdate+'-'+$scope.IGmonth+'-'+$scope.IGyear;if(currentPage.indexOf("utm_source")!=-1){$scope.utm_source=currentPage.slice(currentPage.indexOf("utm_source=")+11).split("&")[0];}
if(currentPage.indexOf("utm_campaign")!=-1){$scope.utm_campaign=currentPage.slice(currentPage.indexOf("utm_campaign=")+13).split("&")[0];}
if(currentPage.indexOf("utm_term")!=-1){$scope.utm_term=currentPage.slice(currentPage.indexOf("utm_term=")+9).split("&")[0];}
if(currentPage.indexOf("utm_medium")!=-1){$scope.utm_medium=currentPage.slice(currentPage.indexOf("utm_medium=")+11).split("&")[0];}
$mixpanel.track("Form Submitted",{'Product':$scope.products[5].product,"UtmSource":$scope.utm_source,"DOB":$scope.formdob,"Gender":$scope.formgender,"Amount":income,"PayingMode":$scope.selectedincome});var data={"userdetails":{"IGQuoteId":0,"PartnerAgentId":"","PartnerLeadId":"","RequestType":"","Requests":[{"__type":"NonTermRequest:#ServiceEntities","DOBs":[$scope.insDOB],"Features":[{"__type":"BooleanFeature:#ServiceEntities","Id":$scope.AllowPartialWithdrawNameAmount,"Name":""},{"__type":"CustomFeature:#ServiceEntities","Id":$scope.TermBenefitAmount,"Name":"","Value":0},{"__type":"CustomFeature:#ServiceEntities","Id":$scope.AccidentalDisabilityAmount,"Name":"","Value":0},{"__type":"CustomFeature:#ServiceEntities","Id":$scope.AccidentalDeathAmount,"Name":"","Value":0},{"__type":"CustomFeature:#ServiceEntities","Id":$scope.CriticalIllnessAmount,"Name":"","Value":0},],"Amount":$scope.txtActualIncome+","+$scope.selectedincome,"MaturityTerm":0,"Gender":$scope.gender,"CityId":3502,"MinRisk":0,"MaxRisk":0,"ProductId":5,"MaturityType":"HistoricalGrowth","PaymentDuration":""}],"ServiceTimeOut":"2147483647","utmCompaign":$scope.utm_campaign,"utmMedium":$scope.utm_medium,"utmSource":$scope.utm_source,"utmTerm":$scope.utm_term}};var resultdata=[];resultdata.push(data);var saveRequirementData=CommonService.saveInvestmentRequirementData($scope,globals);var time="3000";var urlservice=globals.ServiceURL+"/QuoteService.svc/web/Save";var ServiceName="QuoteService";$timeout(function(){if($scope.InvestmentSavetime==0){$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[5].product);$scope.InvestmentSavetime=2;}
else{$scope.InvestmentSavetime=0;}},3000);saveRequirementData.then(function(pl){if($scope.InvestmentSavetime==2){var timeoutvar=new Date().getTime();var dvar=(timeoutvar-$scope.timeoutarray['saveservice']);$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[5].product,dvar);}
$scope.InvestmentSavetime=1;$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=JSON.parse(angular.toJson(pl.data.Message));if($scope.IGQuoteId>0){$scope.otpFn(1,productid);}
else{$scope.showbtninvestloader=false;}},function(response){ServiceRespnse(response);});$scope.$root.showHome=false;$scope.$root.showmainloader=true;$scope.comparebuypopAnimation="display-none";$scope.$root.showloader=true;$scope.$root.popupbikepage=false;$scope.$root.showLoaderClass="display-visible";$scope.$root.productBox="display-none";$scope.showHeader="hide";$scope.$root.comparebuypop=false;$scope.$root.quotesheader=true;$scope.$root.Hi=true;$scope.$root.firstpageillusion=false;}}
$scope.IGchilddateKey=function(flag,event){if(flag==1&&$scope.IGchilddate!=undefined&&$scope.IGchilddate!=null&&$scope.IGchilddate!=""&&$scope.IGchilddate.length==2){$scope.mm2=true;$scope.usermm01=0;}
else if(flag==2&&$scope.IGchildmonth!=undefined&&$scope.IGchildmonth!=null&&$scope.IGchildmonth!=""&&$scope.IGchildmonth.length==2){$scope.mm3=true;$scope.usermm11=0;}
else if(flag==3&&$scope.IGchildyear!=undefined&&$scope.IGchildyear!=null&&$scope.IGchildyear!=""&&$scope.IGchildyear.length==4){$scope.usermm21=0;}
else if(flag==2&&event.keyCode===8&&$scope.IGchildmonth==undefined){if($scope.usermm11==1){$scope.usermm11=0;$scope.mm1=true;}
else{$scope.usermm11=1;}}
else if(flag==3&&event.keyCode===8&&$scope.IGchildyear==undefined){if($scope.usermm21==1){$scope.usermm21=0;$scope.mm2=true;}
else{$scope.usermm21=1;}}}
$scope.IGdateKey=function(flag,event){if(flag==1&&$scope.IGdate!=undefined&&$scope.IGdate!=null&&$scope.IGdate!=""&&$scope.IGdate.length==2){$scope.dd2=true;$scope.userdd01=0;}
else if(flag==2&&$scope.IGmonth!=undefined&&$scope.IGmonth!=null&&$scope.IGmonth!=""&&$scope.IGmonth.length==2){$scope.dd3=true;$scope.userdd11=0;}
else if(flag==3&&$scope.IGyear!=undefined&&$scope.IGyear!=null&&$scope.IGyear!=""&&$scope.IGyear.length==4){$scope.userdd21=0;}
else if(flag==2&&event.keyCode===8&&$scope.IGmonth==undefined){if($scope.userdd11==1){$scope.userdd11=0;$scope.dd1=true;}
else{$scope.userdd11=1;}}
else if(flag==3&&event.keyCode===8&&$scope.IGyear==undefined){if($scope.userdd21==1){$scope.userdd21=0;$scope.dd2=true;}
else{$scope.userdd21=1;}}}
$scope.otpKey=function(flag,event){if(flag==0&&$scope.userOTP0!=undefined&&$scope.userOTP0!=null&&$scope.userOTP!=""){$scope.OTP1=true;$scope.userOTP01=0;}
else if(flag==1&&$scope.userOTP1!=undefined&&$scope.userOTP1!=null&&$scope.userOTP1!=""){$scope.OTP2=true;$scope.userOTP11=0;}
else if(flag==2&&$scope.userOTP2!=undefined&&$scope.userOTP2!=null&&$scope.userOTP2!=""){$scope.OTP3=true;$scope.userOTP21=0;}
else if(flag==3&&$scope.userOTP3!=undefined&&$scope.userOTP3!=null&&$scope.userOTP3!=""){$scope.userOTP31=0;}
else if(flag==1&&event.keyCode===8&&$scope.userOTP1==undefined){if($scope.userOTP11==1){$scope.userOTP11=0;$scope.OTP0=true;}
else{$scope.userOTP11=1;}}
else if(flag==2&&event.keyCode===8&&$scope.userOTP2==undefined){if($scope.userOTP21==1){$scope.userOTP21=0;$scope.OTP1=true;}
else{$scope.userOTP21=1;}}
else if(flag==3&&event.keyCode===8&&$scope.userOTP3==undefined){if($scope.userOTP31==1){$scope.userOTP31=0;$scope.OTP2=true;}
else{$scope.userOTP31=1;}}}
$scope.otpBack=function(){$scope.showotpbox=false;if($scope.showotpboxbybeenhere==true){$scope.showotpboxbybeenhere=false;$scope.beenHereBtnLoader=false;$scope.getmobileno=true;$interval.cancel($scope.time);}}
$scope.otpFn=function(flag,productId){if(flag==2){$scope.resendFlag=true;}
else{$scope.resendFlag=false;}
$scope.showbtnleadloader=true;if(productId==4||productId==8||productId==9){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="123";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="123";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="123";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="123";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=productId;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=productId;}
else if(productId==3){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGTERM2016";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@TERM@2016";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGTERM2016";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@TERM@2016";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=productId;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=productId;}
else if(productId==2){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGHEALTH2016";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@HEALTH@2016";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGHEALTH2016";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@HEALTH@2016";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=productId;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=productId;}
else if(productId==5){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGINVT17";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@INVT@217";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGINVT17";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@INVT@217";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=productId;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=productId;}
else if(productId==6){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGPENSION17";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@IG@PENSION@17@217";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGPENSION17";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@IG@PENSION@17@217";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=productId;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=productId;}
else if(productId==7){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGCHILD17";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@INVTIG@CHILD@17217";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGCHILD17";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@INVTIG@CHILD@17217";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=productId;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=productId;}
else if(productId==1){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGTRAVEL";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@TRAVEL";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGTRAVEL";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@TRAVEL";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=productId;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=productId;}
else if(productId==9){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="123";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="123";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="123";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="123";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=productId;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=productId;}
$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.leads.lead[0].leadId=$scope.IGQuoteId;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.Name="user";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.EmailId="2018@xyz.com";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.MobileNo=$scope.userMobile;var resendFlag=CommonService.SendOTPReboot($scope,globals);resendFlag.then(function(result){console.log(result);var token=result.data.TokenId;$scope.wrongMobile=false;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.OTPValidation.Tokenid=token;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.OTPValidation.Mobile=$scope.userMobile;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.OriginPageid=0;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.IsCallBackRequire="false";$scope.mobileerror=false;$scope.showResend=false;$scope.showbtnleadloader=false;if(result.data.IsVerified==true){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.Tokenid=token;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.MobileNo=$scope.userMobile;$scope.leadcreationfn4(token,0,productId);}
else if(result.data.Message=="success"){$scope.carmaindetails=false;$scope.carpopup=false;$scope.OTP0=true;$scope.showotpbox=true;$scope.btnnootp=false;$scope.showbtnleadloader=false;$location.search("OTP");if(result.data.OTPResendTimer!=undefined&&result.data.OTPResendTimer!=""){var otpResendTimer=result.data.OTPResendTimer*1000;}
else{var otpResendTimer=10000;}
$scope.resendtime=parseInt(result.data.OTPResendTimer);resendTimer();$timeout(function(){$scope.showResend=true;},otpResendTimer);}
else if(result.data.Message=="Proceed to the quotes page without OTP verification"){if(productId==4){$window.location.href=QuotePageURL+"Car?CPID="+btoa($scope.IGQuoteId);}
else if(productId==8){$window.location.href=QuotePageURL+"Twowheeler?CPID="+btoa($scope.IGQuoteId);}
else if(productId==2){$window.location.href=QuotePageURL+"Health?CPID="+btoa($scope.IGQuoteId);}
else if(productId==3){$window.location.href=QuotePageURL+"Term?CPID="+btoa($scope.IGQuoteId);}
else if(productId==9){$window.location.href=QuotePageURL+"Critical?CPID="+btoa($scope.IGQuoteId);}
else if(productId==5){$window.location.href=QuotePageURL+"Investment?CPID="+btoa($scope.IGQuoteId);}
else if(productId==6){$window.location.href=QuotePageURL+"Pension?CPID="+btoa($scope.IGQuoteId);}
else if(productId==7){$window.location.href=QuotePageURL+"Child?CPID="+btoa($scope.IGQuoteId);}
else if(productId==1){$window.location.href=QuotePageURL+"Travel?CPID="+btoa($scope.IGQuoteId);}}
else{$scope.wrongMobile=true;$scope.wrongMobilemsg=result.data.Message;$scope.showbtntravelloader=false;$scope.showbtnhealthloader=false;$scope.showbtntermloader=false;$scope.showbtncarloader=false;$scope.showbtnchildloader=false;$scope.showbtninvestloader=false;$scope.showbtnpensionloader=false;$scope.showbtnbikeloader=false;}},function(response){ServiceRespnse(response);});}
function resendTimer(){$scope.time=$interval(function(){$scope.resendtime=$scope.resendtime-1;if($scope.resendtime<=0){$interval.cancel($scope.time);}},1000);}
$scope.leadcreationfn7=function(productId,flag){$mixpanel.track('OTP entered',{"OTP":$scope.userOTP,"Mobile":$scope.userMobile,"leadid":$scope.IGQuoteId});$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.OTPValidation.OTP=$scope.userOTP;var response=CommonService.GetMobileVerificationWithOTPRequest2($scope.otpcreaterequestdata);response.then(function(result){console.log(result);result.data=[angular.fromJson(result.data)];$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.Tokenid=result.data[0].data.Token.Tokenid;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.MobileNo=$scope.userMobile;if(result.data[0].data.Error.ErrorCode==1){$scope.wrongotpmsg="Enter Correct OTP";$scope.wrongotpmsgshow=true;$scope.showbtnloader=false;$scope.showbtnleadloader=false;$scope.otpcodeerror=true;}
else{$scope.wrongotpmsgshow=false;$scope.leadcreationfn4(result.data,flag,productId);}},function(response){ServiceRespnse(response);});}
$scope.leadcreationfn1=function(flag,productId){if(productId==4||productId==8){$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserName="123";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserPassword="123";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="123";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="123";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="123";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="123";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.Productid=productId;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=productId;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=productId;}
else if(productId==3){$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserName="IGTERM2016";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserPassword="IG@TERM@2016";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGTERM2016";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@TERM@2016";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGTERM2016";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@TERM@2016";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.Productid=3;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=3;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=3;}
else if(productId==2){$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserName="IGHEALTH2016";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserPassword="IG@HEALTH@2016";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGHEALTH2016";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@HEALTH@2016";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGHEALTH2016";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@HEALTH@2016";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.Productid=2;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=2;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=2;}
else if(productId==5){$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserName="IGINVT17";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserPassword="IG@INVT@217";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGINVT17";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@INVT@217";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGINVT17";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@INVT@217";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.Productid=5;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=5;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=5;}
else if(productId==6){$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserName="IGPENSION17";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserPassword="IG@IG@PENSION@17@217";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGPENSION17";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@IG@PENSION@17@217";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGPENSION17";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@IG@PENSION@17@217";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.Productid=6;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=6;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=6;}
else if(productId==7){$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserName="IGCHILD17";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserPassword="IG@INVTIG@CHILD@17217";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGCHILD17";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@INVTIG@CHILD@17217";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGCHILD17";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@INVTIG@CHILD@17217";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.Productid=7;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=7;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=7;}
else if(productId==1){$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserName="IGTRAVEL";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserPassword="IG@TRAVEL";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGTRAVEL";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@TRAVEL";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGTRAVEL";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@TRAVEL";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.Productid=1;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=1;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=1;}
else if(productId==9){$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserName="123";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserPassword="123";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="123";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="123";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="123";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="123";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.Productid=productId;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=productId;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=productId;}
$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.leads.lead[0].leadId=$scope.IGQuoteId;$scope.carquotesleadrequest.RequestString.MobileValidationRequest.MobileValidation.isOTPRequire="No";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.MobileValidation.Mobile=$scope.userMobile;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.MobileNo=$scope.userMobile;var response=CommonService.GetMobileVerificationWithOTPRequest($scope.carquotesleadrequest);response.then(function(result){console.log(result);result.data=[angular.fromJson(result.data)];$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.OTPValidation.Tokenid=result.data[0].data.MobileValidationResponse.Tokenid;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.OTPValidation.Mobile=$scope.userMobile;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.OriginPageid=0;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.Tokenid=result.data[0].data.MobileValidationResponse.Tokenid;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.IsCallBackRequire="false";if(result.data[0].data.MobileValidationResponse.Meassage=="OK"&&result.data[0].data.MobileValidationResponse.Valid=="Yes"){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.Tokenid=result.data[0].data.MobileValidationResponse.Tokenid;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.MobileNo=$scope.userMobile;$scope.leadcreationfn4($scope.leadcreaterequestdata,flag,productId);}
else{$scope.leadcreationfn4($scope.leadcreaterequestdata,flag,productId);}});}
$scope.leadcreationfn4=function(value,flag,productId){var response=CommonService.GetMobileVerificationWithOTPRequest1($scope.leadcreaterequestdata);response.then(function(result){console.log(result);result.data=[angular.fromJson(result.data)];if(result.data[0].data.Error.ErrorCode=="0"){if(productId==4){$window.location.href=QuotePageURL+"Car?CPID="+btoa($scope.IGQuoteId);}
else if(productId==8){$window.location.href=QuotePageURL+"Twowheeler?CPID="+btoa($scope.IGQuoteId);}
else if(productId==2){$window.location.href=QuotePageURL+"Health?CPID="+btoa($scope.IGQuoteId);}
else if(productId==3){$window.location.href=QuotePageURL+"Term?CPID="+btoa($scope.IGQuoteId);}
else if(productId==9){$window.location.href=QuotePageURL+"Critical?CPID="+btoa($scope.IGQuoteId);}
else if(productId==5){$window.location.href=QuotePageURL+"Investment?CPID="+btoa($scope.IGQuoteId);}
else if(productId==6){$window.location.href=QuotePageURL+"Pension?CPID="+btoa($scope.IGQuoteId);}
else if(productId==7){$window.location.href=QuotePageURL+"Child?CPID="+btoa($scope.IGQuoteId);}
else if(productId==1){$window.location.href=QuotePageURL+"Travel?CPID="+btoa($scope.IGQuoteId);}}},function(response){ServiceRespnse(response);});}
$scope.refreshSlider=function(){$timeout(function(){$scope.$broadcast('rzSliderForceRender');});}
$scope.calculateAgeInYear=function(insDOB,childDOB){var date1=new Date(insDOB);var date2=new Date(childDOB);var diffDays=parseInt((date2-date1)/(1000*60*60*24)/365);return Math.abs(diffDays);}
$scope.getchildquotes=function(){$scope.wrongotpmsgshow=false;$scope.userOTP=undefined;var flag=1;var productid=7;if($scope.selectedincome==undefined||$scope.selectedincome==''||$scope.selectedincome==null||isNaN($scope.selectedincome)){flag=0;$scope.incomeerror=true;}
else{$scope.nonTermvalidate($scope.selectedincome,'child');if($scope.incomeerror==true){flag=0;}}
if($scope.formdob==undefined||$scope.IGdate==undefined||$scope.IGmonth==undefined||$scope.IGyear==undefined){flag=0;$scope.DobMessage="Parent's age should be (Min. 18 yrs & Max. 65 yrs)";$scope.dateerror=true;}
else{$scope.dateerror=false;}
if($scope.IGchilddate==undefined||$scope.IGchildmonth==undefined||$scope.IGchildyear==undefined){flag=0;$scope.datechilderror=true;}
else{$scope.datechilderror=false;}
var ParentAge=parseInt((ValidationFactory.AgeGroup($scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear)/12).toFixed(0));var ChildAge=parseInt((ValidationFactory.AgeGroup($scope.IGchilddate+"-"+$scope.IGchildmonth+"-"+$scope.IGchildyear)/12).toFixed(0));if(ParentAge<18||isNaN(ParentAge)||ParentAge>65){$scope.DobMessage="Parent's age should be (Min. 18 yrs & Max. 65 yrs)";$scope.dateerror=true;flag=0;}
else{$scope.dateerror=false;}
if(ChildAge>17||isNaN(ChildAge)){$scope.datechilderror=true;flag=0;}
else{$scope.datechilderror=false;}
var AgeDiff=ParentAge-ChildAge;if(isNaN(AgeDiff)){$scope.age=0;}
if($scope.age>=18&&$scope.age<=65){if(AgeDiff<18){$scope.DobMessage="Parent's & child age difference should be 18 yrs";$scope.dateerror=true;flag=0;}
else{$scope.dateerror=false;}}
else{$scope.DobMessage="Parent's age should be (Min. 18 yrs & Max. 65 yrs)";$scope.dateerror=true;flag=0;}
if(isNaN(ChildAge)){$scope.dateerror=false;if(isNaN(ParentAge)){$scope.dateerror=true;}}
if($scope.IGyear!=undefined){if($scope.IGyear.length<4){$scope.DobMessage="Parent's age should be (Min. 18 yrs & Max. 65 yrs)";$scope.dateerror=true;flag=0;}}
if($scope.checkchilddate==1||$scope.checkchilddate==undefined){flag=0;$scope.datechilderror=true;}
else{$scope.datechilderror=false;}
if($scope.userMobile==undefined||$scope.userMobile==null||isNaN($scope.userMobile)==true||$scope.userMobile.toString().length<10||$scope.userMobile.toString().length>10){$scope.mobileerror=true;flag=0;}
if(flag==1){$localStorage.maleclass=$scope.maleclass;$localStorage.femaleclass=$scope.femaleclass;$localStorage.gender=$scope.gender;$localStorage.IGdate=$scope.IGdate;$localStorage.IGmonth=$scope.IGmonth;$localStorage.IGyear=$scope.IGyear;$localStorage.IGchilddate=$scope.IGchilddate;$localStorage.IGchildmonth=$scope.IGchildmonth;$localStorage.IGchildyear=$scope.IGchildyear;$localStorage.formchilddob=$scope.formchilddob
$localStorage.selectedincome=$scope.selectedincome;$localStorage.childincometype=$scope.childincometype;$localStorage.formdob=$scope.formdob;$scope.showbtnchildloader=true;$localStorage.userMobile=$scope.userMobile;$scope.insurerDOB=$scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear;$scope.childDOB=$scope.IGchilddate+"-"+$scope.IGchildmonth+"-"+$scope.IGchildyear;var currentPage=$location.absUrl();$scope.utm_source="";$scope.utm_campaign="";$scope.utm_term="";$scope.utm_medium="";$scope.DOBs=[];$scope.DOBs.push($scope.insurerDOB);$scope.DOBs.push($scope.childDOB);if(currentPage.indexOf("utm_source")!=-1){$scope.utm_source=currentPage.slice(currentPage.indexOf("utm_source=")+11).split("&")[0];}
if(currentPage.indexOf("utm_campaign")!=-1){$scope.utm_campaign=currentPage.slice(currentPage.indexOf("utm_campaign=")+13).split("&")[0];}
if(currentPage.indexOf("utm_term")!=-1){$scope.utm_term=currentPage.slice(currentPage.indexOf("utm_term=")+9).split("&")[0];}
if(currentPage.indexOf("utm_medium")!=-1){$scope.utm_medium=currentPage.slice(currentPage.indexOf("utm_medium=")+11).split("&")[0];}
$mixpanel.track("Form Submitted",{'Product':$scope.products[4].product,"UtmSource":$scope.utm_source,"Amount":$scope.selectedincome,"MaturityTerm":$scope.MaturityTerm,"Gender":$scope.formgender,"ChildDOB":$scope.childDOB,"ParentDOB":$scope.formdob});var data={"userdetails":{"IGQuoteId":0,"PartnerAgentId":"","PartnerLeadId":"","RequestType":"","Requests":[{"__type":"NonTermRequest:#ServiceEntities","DOBs":[$scope.DOBs],"Features":[{"__type":"BooleanFeature:#ServiceEntities","Id":$scope.AllowPartialWithdrawNameAmount,"Name":""},{"__type":"CustomFeature:#ServiceEntities","Id":$scope.AllowPartialWithdrawNameAmount,"Name":"","Value":0},],"Amount":$scope.txtActualIncome+","+$scope.selectedincome,"MaturityTerm":0,"Gender":$scope.gender,"MinRisk":1,"MaxRisk":5,"ProductId":7,"MaturityType":"HistoricalGrowth","PaymentDuration":""}],"ServiceTimeOut":"2147483647","utmCompaign":$scope.utm_campaign,"utmMedium":$scope.utm_medium,"utmSource":$scope.utm_source,"utmTerm":$scope.utm_term}};$scope.ChildDetails.push({Gender:$scope.formgender,annualIncome:$scope.selectedincome,insDOB:$scope.insurerDOB,ChildDOB:$scope.childDOB,ActualIncome:$scope.txtActualIncome,income:$scope.selectedincome});$scope.$root.showTopHeading=false;$scope.$root.showLogos=false;$scope.$root.showHome=false;$scope.showHeader="hide";$scope.comparebuypopAnimation="display-none";$scope.$root.showloader=true;var resultdata=[];resultdata.push(data);var saveRequirementData=CommonService.saveChildRequirementData($scope,globals);var time="3000";var urlservice=globals.ServiceURL+"/QuoteService.svc/web/Save";var ServiceName="QuoteService";$timeout(function(){if($scope.ChildSavetime==0){$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[4].product);$scope.ChildSavetime=2;}
else{$scope.ChildSavetime=0;}},3000);saveRequirementData.then(function(pl){if($scope.ChildSavetime==2){var timeoutvar=new Date().getTime();var dvar=(timeoutvar-$scope.timeoutarray['saveservice']);$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[4].product,dvar);}
$scope.ChildSavetime=1;$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=JSON.parse(angular.toJson(pl.data.Message));if($scope.IGQuoteId>0){$scope.otpFn(1,productid);}
else{$scope.showbtnchildloader=false;}},function(response){ServiceRespnse(response);});}}
$scope.getbikequotespop=function(){$scope.wrongotpmsgshow=false;$scope.userOTP=undefined;var productid=8;if($scope.newcarshow==false){$scope.bikereg=$scope.date.getFullYear();$scope.bikelastclaim="Yes~0";$scope.bikeexpiredpol=0;}
var flag=1;if($scope.selectedbikemmv==null){flag=0;$scope.biketexterror=true;}
else{$scope.biketexterror=false;}
if($scope.selectedbikerto==null){flag=0;$scope.bikertoerror=true;}
else{$scope.bikertoerror=false;}
if($scope.bikereg==undefined){flag=0;$scope.popbikeregerror=true;}
else{$scope.popbikeregerror=false;}
if($scope.bikeexpiredpol==undefined){flag=0;$scope.popbikepolexperror=true;}
else{$scope.popbikepolexperror=false;}
if($scope.bikelastclaim==undefined&&$scope.bikeexpiredpol!=91){flag=0;$scope.popbikelastclaimerror=true;}
else{$scope.popbikelastclaimerror=false;}
if($scope.userMobile==undefined||$scope.userMobile==null||isNaN($scope.userMobile)==true||$scope.userMobile.toString().length<10||$scope.userMobile.toString().length>10){$scope.mobileerror=true;flag=0;}
if(flag==1){$localStorage.selectedbikemmv=$scope.selectedbikemmv;$localStorage.selectedbikerto=$scope.selectedbikerto;$localStorage.bikereg=$scope.bikereg;$localStorage.bikeregnumber=$scope.bikeregnumber;$localStorage.bikeexpiredpol=$scope.bikeexpiredpol;$localStorage.selectedbikemakepop=$scope.selectedbikemakepop;$localStorage.selectedbikertopop=$scope.selectedbikertopop;$localStorage.ClaimTaken=$scope.ClaimTaken;$localStorage.ClaimedNCB=$scope.ClaimedNCB;$localStorage.RequiredNCB=$scope.RequiredNCB;$localStorage.userMobile=$scope.userMobile;$localStorage.bikelastclaim=$scope.bikelastclaim;$scope.showbtnbikeloader=true;$scope.carclaim=$scope.bikelastclaim;$scope.carreg=$scope.bikereg;$scope.ncblogic();$scope.$root.scrollhide="whitebg";$mixpanel.track("Form Submitted",{'Product':$scope.products[1].product,"UtmSource":$scope.utm_source,"BreakingDays":$scope.bikeexpiredpol,"ClaimTaken":$scope.ClaimTaken,"ClaimedNCB":$scope.ClaimedNCB,"RequiredNCB":$scope.RequiredNCB,"ModelId":$scope.selectedbikemmv.modelid,"RTOCode":$scope.selectedbikerto.RTOCode,"RegistrationYear":$scope.bikereg});var data={"userdetails":{"UtmSource":$scope.UtmSource,"UtmCompaign":$scope.utmCompaign,"UtmTerm":$scope.utmTerm,"UtmMedium":$scope.utmMedium,"RegistrationNo":$scope.bikeregnumber,"VechileDetails":$scope.selectedbikemmv,"BikeExpiredpol":$scope.bikeexpiredpol,"ProductName":"Bike","CityList":$scope.selectedbikerto,"ClaimPercent":$scope.bikelastclaim,"RegYear":$scope.bikereg,"EngineNo":$scope.bikeengineno,"ChasisNo":$scope.bikechasisno,"UserName":$scope.username,"UserMobile":$scope.usermobile,"UserEmail":$scope.useremail}};console.log(data);var resultdata=[];resultdata.push(data);var saveRequirementData=CommonService.saveBikeRequirementData($scope,globals);var time="3000";var urlservice=globals.ServiceURL+"/QuoteService.svc/web/Save";var ServiceName="QuoteService";$timeout(function(){if($scope.BikeSavetime==0){$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[1].product);$scope.BikeSavetime=2;}
else{$scope.BikeSavetime=0;}},3000);saveRequirementData.then(function(pl){if($scope.BikeSavetime==2){var timeoutvar=new Date().getTime();var dvar=(timeoutvar-$scope.timeoutarray['saveservice']);$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[1].product,dvar);}
$scope.BikeSavetime=1;$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=JSON.parse(angular.toJson(pl.data.Message));if($scope.IGQuoteId>0){$scope.otpFn(1,productid);}
else{$scope.showbtnbikeloader=false;}},function(response){ServiceRespnse(response);});}}
$scope.gethealthquotespop=function(id){$scope.wrongotpmsgshow=false;$scope.userOTP=undefined;var flag=1;var productid=2;if(id==-1&&$scope.deductmodel==undefined){flag=0;$scope.deducterror=true;ga('send','event',{eventCategory:'Super Top Up Landing Page ',eventAction:'Click',eventLabel:'Page Submit'});}
else{$scope.deducterror=false;}
if($scope.selectedItem2==null){flag=0;$scope.cityerror=true;}
else{$scope.cityerror=false;}
if(parseInt($scope.selectedadult)>2||$scope.selectedadult==undefined||parseInt($scope.selectedadult)==0){flag=0;$scope.adulterror=true;$scope.adulterrortext="No of Adult 1 or 2";}
else{$scope.adulterror=false;$scope.adulterrortext="";}
if(parseInt($scope.selectedchild)>4||$scope.selectedchild==undefined||$scope.selectedchild===''){flag=0;$scope.childerror=true;}
else{$scope.childerror=false;}
if($scope.formdob==undefined||$scope.IGdate==undefined||$scope.IGmonth==undefined||$scope.IGyear==undefined){flag=0;$scope.dateerror=true;}
else{$scope.dateerror=false;}
if($scope.userMobile==undefined||$scope.userMobile==null||isNaN($scope.userMobile)==true||$scope.userMobile.toString().length<10||$scope.userMobile.toString().length>10){$scope.mobileerror=true;flag=0;}
if(flag==1){$scope.showbtnhealthloader=true;$scope.$root.scrollhide="whitebg";$localStorage.selectedItem2=$scope.selectedItem2;$localStorage.formdob=$scope.formdob;$localStorage.gender=$scope.gender;$localStorage.selectedadult=$scope.selectedadult;$localStorage.selectedchild=$scope.selectedchild;$localStorage.selectedcitynampop=$scope.selectedcitynampop;$localStorage.IGdate=$scope.IGdate;$localStorage.IGmonth=$scope.IGmonth;$localStorage.IGyear=$scope.IGyear;$localStorage.maleclass=$scope.maleclass;$localStorage.femaleclass=$scope.femaleclass;$localStorage.userMobile=$scope.userMobile;$scope.formdob1=$scope.IGyear+'-'+$scope.IGmonth+'-'+$scope.IGdate;var currentPage=$location.absUrl();$scope.utm_source="";$scope.utm_campaign="";$scope.utm_term="";$scope.utm_medium="";if(currentPage.indexOf("utm_source")!=-1){$scope.utm_source=currentPage.slice(currentPage.indexOf("utm_source=")+11).split("&")[0];}
if(currentPage.indexOf("utm_campaign")!=-1){$scope.utm_campaign=currentPage.slice(currentPage.indexOf("utm_campaign=")+13).split("&")[0];}
if(currentPage.indexOf("utm_term")!=-1){$scope.utm_term=currentPage.slice(currentPage.indexOf("utm_term=")+9).split("&")[0];}
if(currentPage.indexOf("utm_medium")!=-1){$scope.utm_medium=currentPage.slice(currentPage.indexOf("utm_medium=")+11).split("&")[0];}
if(flag==1){$mixpanel.track('Form Submitted',{'Product':$scope.products[2].product,"UtmSource":$scope.utm_source,"CityId":parseInt(($scope.selectedItem2.cityid.split(',')[0]).trim()),"DOB":$scope.formdob,"Gender":$scope.gender,"NumberOfAdults":parseInt($scope.selectedadult),"NumberOfChildren":parseInt($scope.selectedchild)});var data={"userdetails":{"Adult":parseInt($scope.selectedadult),"Child":parseInt($scope.selectedchild),"Gender":$scope.gender,"Birthdate":$scope.formdob,"Citylist":$scope.selectedItem2,"Product":"Health","Username":$scope.username,"Usermobile":$scope.usermobile,"Useremail":$scope.useremail,"UtmSource":$scope.utm_source,"UtmCampaign":$scope.utm_campaign,"UtmTerm":$scope.utm_term,"UtmMedium":$scope.utm_medium}};var resultdata=[];resultdata.push(data);if(id==-1){var saveRequirementData=CommonService.saveHealthRequirementDataEnhance($scope,globals);}
else{var saveRequirementData=CommonService.saveHealthRequirementData($scope,globals);}
var time="3000";var urlservice=globals.ServiceURL+"/QuoteService.svc/web/Save";var ServiceName="QuoteService";$timeout(function(){if($scope.HealthSavetime==0){$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[2].product);$scope.HealthSavetime=2;}
else{$scope.HealthSavetime=0;}},3000);saveRequirementData.then(function(pl){if($scope.HealthSavetime==2){var timeoutvar=new Date().getTime();var dvar=(timeoutvar-$scope.timeoutarray['saveservice']);$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[6].product,dvar);}
$scope.HealthSavetime=1;$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=JSON.parse(angular.toJson(pl.data.Message));if($scope.IGQuoteId>0){$scope.otpFn(1,productid);}
else{$scope.showbtnhealthloader=false;}},function(response){ServiceRespnse(response);});}}}
$scope.getquotespop1=function(flag1){$mixpanel.track('Car Registration No. Submit');if($scope.carNo.registrationNo!=undefined&&$scope.patternFails!=true&&($scope.claimtaken!=undefined||$scope.carbreakingexp==1)){$scope.carProceedBtnLoader=true;if($scope.selectedItem!=null){$scope.lastclaimtaken=$scope.lastclaimlist;$scope.lastclaimtaken1=$scope.lastclaimlist;$scope.carpopncbtag="NCB % in your existing policy?";if($scope.claimtaken=="No~50"){$scope.showcarncb=true;var ncbyear=$scope.year-$scope.yearOfRegistration;if(ncbyear>=6){ncbyear=6;$scope.carrequiredncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];}
else{$scope.carrequiredncb=$scope.lastclaimlist[ncbyear].value.split("~")[1];}
$scope.carclaim=$scope.lastclaimlist[ncbyear-1].value;$scope.carclaimtext=$scope.lastclaimlist[ncbyear-1].text;$scope.carclaimedncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];}
else if($scope.claimtaken=="Yes~0"){$scope.carclaim=$scope.lastclaimlist[0].value;$scope.carclaimtext=$scope.lastclaimlist[0].text;$scope.carclaimedncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.showcarncb=false;}
else if($scope.claimtaken=="No~20"){$scope.showcarncb=true;$scope.carclaim=$scope.lastclaimlist[0].value;$scope.carclaimtext=$scope.lastclaimlist[0].text;$scope.carclaimedncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[1].value.split("~")[1];}
else if($scope.claimtaken=="No~25"){$scope.showcarncb=true;$scope.carclaim=$scope.lastclaimlist[1].value;$scope.carclaimtext=$scope.lastclaimlist[1].text;$scope.carclaimedncb=$scope.lastclaimlist[1].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[2].value.split("~")[1];}
else if($scope.claimtaken=="No~35"){$scope.showcarncb=true;$scope.carclaim=$scope.lastclaimlist[2].value;$scope.carclaimtext=$scope.lastclaimlist[2].text;$scope.carclaimedncb=$scope.lastclaimlist[2].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[3].value.split("~")[1];}
else if($scope.claimtaken=="No~45"){$scope.showcarncb=true;$scope.carclaim=$scope.lastclaimlist[3].value;$scope.carclaimtext=$scope.lastclaimlist[3].text;$scope.carclaimedncb=$scope.lastclaimlist[3].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[4].value.split("~")[1];}
$scope.forcarwidgetpercent=$scope.carclaim;if($scope.forcarwidgetpercent=="Yes~0"&&$scope.claimtaken=="No~50"){$scope.forcarwidgetpercent="No~0"}}
if($scope.carbreakingexp==1){$scope.carrequiredncb=0;$scope.carclaimedncb=0;$scope.showcarncb=false;$scope.$root.showcarncb=false;$scope.ClaimTaken=true;$scope.carclaimedncb=0;}
else{$scope.ClaimTaken=angular.lowercase($scope.claimtaken.split("~")[0].trim())=="no"?"false":"true";}
$scope.carpopheadline="Please Confirm your";$scope.showrtocity=false;$scope.showrtofield=false;$scope.maincarpage=false;$scope.carpolicyexpdropdown=false;$scope.ncbdisabled=false;;$scope.carpopncbtag="NCB % in your existing policy?";$scope.regerror=false;$scope.byreg=true;$scope.carerror=false;$scope.cityerror=false;$scope.popcarregerror=false;$scope.popcarclaimerror=false;$scope.popcarcnglpgerror=false;$scope.popcarcnglpgvalueerror=false;$scope.carpopup=true;$scope.carmaindetails=false;if(flag1==undefined){$scope.$root.popupcarpage=true;}
else{$scope.getlinkpop();}}
else{if($scope.patternFails==true||$scope.regerror==true){$scope.carpopup=false;$scope.carmaindetails=true;flag=1;}}
$scope.carProceedBtnLoader=false;}
$scope.getquotespop=function(flag1){var flag=0;$scope.showrtiomobile=false;if($scope.fastlanenohit==true){$scope.getlinkpop();}
if($scope.carNo.registrationNo==undefined||$scope.patternFails==true){$scope.patternFails=true;$scope.regnoerrortext="Enter correct car registration no.";flag=1;}
else{$scope.patternFails=false;$scope.regnoerrortext="";}
if($scope.claimtaken==undefined&&($scope.carbreakingexp!=1||$scope.carbreaking==1)){$scope.regerror=true;flag=1;}
else{$scope.regerror=false;}
var hit=0;if(flag==0&&$scope.carNo.registrationNo!=undefined&&$scope.patternFails!=true&&($scope.claimtaken!=undefined||$scope.carbreakingexp==1)){if($scope.fastlaneresult!=undefined){hit=1;$scope.fastlaneresult=undefined;$scope.getquotespop1();}
else{$scope.carProceedBtnLoader=true;$timeout(function(){if($scope.fastlaneresult!=undefined){hit=1;$scope.fastlaneresult=undefined;$scope.getquotespop1();}
else{$scope.carProceedBtnLoader=false;if($scope.carNo.registrationNo!=undefined&&$scope.patternFails!=true&&($scope.claimtaken!=undefined||$scope.carbreakingexp==1)){$scope.getlinkpop();}}},3000);}}}
$scope.getformbikequotespop=function(flag1){var flag=0;var flag1=0;$mixpanel.track('Bike Registration No. Submit');$scope.showrtiomobile=false;$scope.showrtocity=false;$scope.bikeProceedBtnLoader=true;if($scope.bikeNo.registrationNo==undefined||$scope.patternFails1==true){$scope.patternFails1=true;$scope.regnoerrortext="Enter correct bike registration no.";flag=1}else{$scope.patternFails1=false;$scope.regnoerrortext=""}
if($scope.bikeNo.registrationNo!=undefined&&$scope.patternFails1!=true&&$scope.bikeexpiredpol!=undefined&&$scope.bikenoresult==false){$scope.showbikepolicyexpired=false;$scope.$root.popupbikepage=true;$scope.bikepopup=true;$scope.bikemaindetails=false;$scope.biketexterror=false;$scope.bikertoerror=false;$scope.showrtocity=false;$scope.popbikeregerror=false;$scope.popbikepolexperror=false;$scope.popbikelastclaimerror=false;$scope.bikeProceedBtnLoader=false;var flag1=1}else{if($scope.patternFails1==true||$scope.popbikelastclaimerror==true){$scope.bikepopup=false;$scope.bikemaindetails=true;$scope.bikeProceedBtnLoader=false;flag=1}}
$timeout(function(){if($scope.bikenoresult==true&&$scope.bikepopup!=true&&flag==0){$scope.showrtocity=true;$scope.bikeProceedBtnLoader=false;$scope.getbikepopup()}else if($scope.bikenoresult==false&&flag1==0&&flag==0){$scope.showbikepolicyexpired=false;$scope.$root.popupbikepage=true;$scope.bikepopup=true;$scope.bikemaindetails=false;$scope.biketexterror=false;$scope.bikertoerror=false;$scope.showrtocity=false;$scope.popbikeregerror=false;$scope.popbikepolexperror=false;$scope.popbikelastclaimerror=false;$scope.bikeProceedBtnLoader=false;}},3000)}
$scope.backtotravel=function(){$scope.travelProceedBtnLoader=false;$scope.$root.travelfirstpop=true;$scope.$root.travelsecondpop=false;$scope.travelpopFirst="display-visible";}
$scope.backtocar=function(){$scope.carProceedBtnLoader=false;$scope.carpopup=false;$scope.carmaindetails=true;$location.search("NotRegistrationNo",null);window.history.back();$mixpanel.track('Remember Reg. No. ?');}
$scope.getcarpopup=function(){$scope.carpopup=true;$scope.carmaindetails=false;}
$scope.getcarlink=function(flag){$scope.ncbdirectlist=[];$scope.showmobileheader=false;$scope.carpopup=true;$scope.carmaindetails=false;for(i=0;i<$scope.regyear.length;i++){$scope.ncbdirectlist.push($scope.regyear[i]);}
$scope.carpopheadline="Please Enter Your";$scope.carpopncbtag="Last Claim Taken";if(flag!=false){$scope.showheader=false;$scope.showrtocity=true;$scope.maincarpage=true;$scope.ncbdisabled=true;$scope.$root.popupcarpage=true;$scope.$root.scrollhide="scrollhides";$scope.showchat=false;$scope.showchat1=true;$scope.showchatmsg=false;$scope.showcarncb=true;}
$scope.lastclaimtaken=$scope.ncbdirectlist;$scope.bodyscroll="noscroll";$scope.byreg=false;}
$scope.getlinkpop=function(flag){$scope.popupformob=false;$scope.ncbdirectlist=[];$scope.carclaim=$scope.claimtaken;for(i=0;i<$scope.regyear.length;i++){$scope.ncbdirectlist.push($scope.regyear[i]);}
$scope.carpopheadline="Please Enter Your";$scope.carpopncbtag="Last Claim Taken";$scope.carpopup=true;$scope.carerror=false;$scope.cityerror=false;$scope.carpolicyexpdropdown=true;$scope.popcarregerror=false;$scope.popcarclaimerror=false;$scope.popcarcnglpgerror=false;$scope.popcarcnglpgvalueerror=false;$scope.carregnumber=undefined;$scope.carengineno=undefined;$scope.carchasisno=undefined;$scope.carmaindetails=false;$location.search("NotRegistrationNo");$scope.newcarSearch=false;if(flag=='new'){$scope.newcarshow=false;$scope.newcarSearch=true;$mixpanel.track('Bought a new car ?');$location.search("NewCar");}
else{$scope.newcarshow=true;$mixpanel.track('Dont Remember');if($scope.carreg==2019){$scope.carreg=undefined;}}
$scope.$root.backpop=true;$scope.showrtocity=true;$scope.showrtiomobile=true;if(flag!=false){$scope.showheader=false;$scope.showrtocity=true;$scope.maincarpage=true;$scope.ncbdisabled=true;$scope.$root.popupcarpage=true;$scope.showchat=false;$scope.showchat1=true;$scope.showchatmsg=false;$scope.showcarncb=true;}
$scope.lastclaimtaken=$scope.ncbdirectlist;$scope.lastclaimtaken1=$scope.ncbdirectlist;$scope.bodyscroll="noscroll";$scope.byreg=false;$scope.carpopup=true;$scope.carmaindetails=false;$scope.checkcarbreaking(2);}
$scope.backtobike=function(){$scope.bikeProceedBtnLoader=false;$scope.bikepopup=false;$scope.bikemaindetails=true;$mixpanel.track('Remember Reg. No. ?');$location.search("NoRegistrationNo",null);window.history.back();}
$scope.getbikelink=function(){$scope.showbikepolicyexpired=true;$scope.$root.popupbikepage=true;$scope.$root.scrollhide="scrollhides";$scope.bikepopup=true;}
$scope.getbikepopup=function(flag){$scope.bikepopup=true;$scope.bikenoresult=true;$scope.bikeregnumber=undefined;$scope.bikeengineno=undefined;$scope.bikechasisno=undefined;$scope.bikemaindetails=false;$scope.$root.backpop=true;$scope.biketexterror=false;$scope.bikertoerror=false;$scope.showrtocity=true;$scope.showrtiomobile=true;$scope.popbikeregerror=false;$scope.popbikepolexperror=false;$scope.popbikelastclaimerror=false;$scope.newcarSearch=false;if(flag=='new'){$scope.newcarshow=false;$scope.newcarSearch=true;$mixpanel.track('Bought a new bike ?');$location.search("NewBike");}
else{$scope.newcarshow=true;$mixpanel.track('Dont Remember');$location.search("NoRegistrationNo");}}
$scope.closereferpop=function(){$scope.showrefferedpop=false;}
$scope.checkadult=function(flag){$scope.selectedadult=flag;if(flag==1){$scope.a1class="lmbutton activebt";$scope.a2class="lmbutton";}
else if(flag==2){$scope.a1class="lmbutton ";$scope.a2class="lmbutton activebt";}
if($scope.selectedadult>1){$scope.showadultmess=true;}
else{if($scope.selectedchild<1&&$scope.selectedadult==1)
$scope.showadultmess=false;}}
$scope.checkchild=function(flag){$scope.selectedchild=flag;$scope.chclass=["childbt ","childbt","childbt","childbt","childbt"];$scope.chclass[flag]=$scope.chclass[flag]+" activebt";if($scope.selectedchild>0){$scope.showadultmess=true;}
else{if($scope.selectedchild<1&&$scope.selectedadult==1)
$scope.showadultmess=false;}}
$scope.init=function(){$scope.leadCreationExceedMsg=null;$scope.webURL=$location.absUrl();$scope.hideepbar=true;$scope.timeoutarray=[];if($scope.webURL.indexOf("enhance")!=-1&&$scope.webURL.indexOf("health")!=-1){ga('send','event',{eventCategory:'Super Top Up Landing Page ',eventAction:'Click',eventLabel:'Page Init'});}
$scope.deductamount=[{value:200000,text:"2 Lac"},{value:300000,text:"3 Lac"},{value:400000,text:"4 Lac"},{value:500000,text:"5 Lac"},{value:600000,text:"6 Lac"},{value:700000,text:"7 Lac"},{value:800000,text:"8 Lac"},{value:900000,text:"9 Lac"},{value:1000000,text:"10 Lac"}]
$scope.newcarshow=true;$scope.browserInfo=browserInfo.giveMeAllYouGot();if($scope.browserInfo!=undefined){$scope.apios=$scope.browserInfo.os.name+"-"+$scope.browserInfo.os.version;$scope.apiBrowser=$scope.browserInfo.browser.name+"-"+$scope.browserInfo.browser.version;$scope.apiBrowserSize=$scope.browserInfo.screenSize.height+"X"+$scope.browserInfo.screenSize.width;if($scope.browserInfo.screenSize.width>=850){$scope.apidevice="Desktop";}
else if($scope.browserInfo.screenSize.width>=520){$scope.apidevice="Tablet";}
else if($scope.browserInfo.screenSize.width<520){$scope.apidevice="Mobile";}}
var currentURL=$location.absUrl();if(currentURL.indexOf("dev.indiacover360.com")!=-1){globals.RedirectURL="https://dev.indiacover360.com/Application/";globals.ServiceURL="https://api.indiacover360.com";globals.IGwServiceURL="https://api.indiacover360.com";globals.UIURL="https://dev.indiacover360.com/HomePage";globals.landingPage="https://dev.indiacover360.com";globals.mainPage="https://dev.indiacover360.com/Application/?CPID=";}
else if(currentURL.indexOf("qa.indiacover360.com")!=-1){globals.RedirectURL="https://qa.indiacover360.com/Application/";globals.ServiceURL="https://apiqa.indiacover360.com";globals.IGwServiceURL="https://apiqa.indiacover360.com";globals.UIURL="https://qa.indiacover360.com/HomePage";globals.landingPage="https://qa.indiacover360.com";globals.mainPage="https://qa.indiacover360.com/Application/?CPID=";}
else if(currentURL.indexOf("insurejoy.com")!=-1){globals.RedirectURL="https://www.insurejoy.com/Application/";globals.ServiceURL="https://api.insurejoy.com";globals.IGwServiceURL="https://api.insurejoy.com";globals.UIURL="https://www.insurejoy.com/HomePage";globals.landingPage="https://www.insurejoy.com";globals.mainPage="https://www.insurejoy.com/Application/?CPID=";}
else{globals.RedirectURL="http://localhost:58324/Application/";globals.ServiceURL="https://apiqa.indiacover360.com";globals.IGwServiceURL="https://apiqa.indiacover360.com";globals.UIURL="http://localhost:58324/HomePage";globals.landingPage="http://localhost:58324";globals.mainPage="http://localhost:58324/Application/?CPID=";}
$scope.templateheader=$sce.trustAsResourceUrl(globals.landingPage+"/header.html");$scope.templatefooter=$sce.trustAsResourceUrl(globals.landingPage+"/footer.html");QuotePageURL=globals.RedirectURL;$scope.homePageUrl=globals.landingPage;$scope.$root.carfuelcontainervalue=false;$scope.$root.entercngkitvalue=0;$scope.$root.showmainloader=false;var sourcevia=document.referrer;if($scope.webURL.indexOf("enhance")!=-1&&$scope.webURL.indexOf("health")!=-1){if(sourcevia.indexOf("google")!=-1||sourcevia.indexOf("yahoo")!=-1||sourcevia.indexOf("bing")!=-1){$scope.utmsourcedata="organic";$scope.utmcampaigndata="organic";}}
$scope.userMobile=$localStorage.userMobile;if(currentURL.indexOf("car")!=-1||currentURL.indexOf("Car")!=-1){$scope.carlist();$scope.citylist();$scope.product="Car";$scope.selectedItem=$localStorage.carname;$scope.selectedItem1=$localStorage.carrto;$scope.carkitstatus=$localStorage.carkitstatus;$scope.carclaim=$localStorage.carclaim;$scope.carreg=$localStorage.carreg;$scope.selectedcarmakepop=$localStorage.selectedcarmakepop;$scope.selectedcarrtopop=$localStorage.selectedcarrtopop;$scope.carclaimedncb=$localStorage.carclaimedncb;$scope.carrequiredncb=$localStorage.carrequiredncb;mixpanel.identify($scope.IGquoteId);mixpanel.people.set({"Product":"Car"});}
else if(currentURL.indexOf("two-wheeler")!=-1||currentURL.indexOf("Twowheeler")!=-1||currentURL.indexOf("Two-wheeler")!=-1||currentURL.indexOf("Two-Wheeler")!=-1||currentURL.indexOf("bike-insurance")!=-1){$scope.bikecitylist();$scope.bikealldatalist();$scope.product="Bike";$scope.selectedbikemmv=$localStorage.selectedbikemmv;$scope.selectedbikerto=$localStorage.selectedbikerto;$scope.bikereg=$localStorage.bikereg;$scope.bikelastclaim=$localStorage.bikelastclaim;$scope.selectedbikemakepop=$localStorage.selectedbikemakepop;$scope.selectedbikertopop=$localStorage.selectedbikertopop;$scope.bikeengineno=$localStorage.bikeengineno;if($localStorage.bikeexpiredpol!=undefined){$scope.bikeexpiredpol=$localStorage.bikeexpiredpol;$scope.bikepolicyexp();}
$scope.ClaimTaken=$localStorage.ClaimTaken;$scope.ClaimedNCB=$localStorage.ClaimedNCB;$scope.RequiredNCB=$localStorage.RequiredNCB;mixpanel.identify($scope.IGquoteId);mixpanel.people.set({"Product":"Bike"});}
else if(currentURL.indexOf("health")!=-1||currentURL.indexOf("Health")!=-1){$scope.commoncity1();$scope.product="Health";$scope.selectedItem2=$localStorage.selectedItem2;if($localStorage.formdob!=undefined)
$scope.formdob=$localStorage.formdob;if($localStorage.gender!=undefined)
$scope.gender=$localStorage.gender;if($localStorage.selectedadult!=undefined)
$scope.selectedadult=$localStorage.selectedadult;if($localStorage.selectedchild!=undefined)
$scope.selectedchild=$localStorage.selectedchild;$scope.IGdate=$localStorage.IGdate;$scope.IGmonth=$localStorage.IGmonth;$scope.IGyear=$localStorage.IGyear;$scope.selectedcitynampop=$localStorage.selectedcitynampop;if($scope.IGdate!=undefined&&$scope.IGmonth!=undefined&&$scope.IGyear!=undefined){$scope.testdate(3,1)}
if($localStorage.maleclass!=undefined)
$scope.maleclass=$localStorage.maleclass;if($localStorage.femaleclass!=undefined)
$scope.femaleclass=$localStorage.femaleclass;if($localStorage.formgender!=undefined)
$scope.formgender=$localStorage.formgender;mixpanel.identify($scope.IGquoteId);$scope.checkadult(parseInt($scope.selectedadult));$scope.checkchild(parseInt($scope.selectedchild));mixpanel.people.set({"Product":"Health"});}
else if(currentURL.indexOf("term")!=-1||currentURL.indexOf("Term")!=-1||currentURL.indexOf("life")!=-1||currentURL.indexOf("life")!=-1){$scope.commoncity1();$scope.termshow=true;$scope.product="Term";$scope.criticalshow=false;if($localStorage.maleclass!=undefined)
$scope.maleclass=$localStorage.maleclass;if($localStorage.femaleclass!=undefined)
$scope.femaleclass=$localStorage.femaleclass;if($localStorage.gender!=undefined)
$scope.gender=$localStorage.gender;if($localStorage.nosmokeclass!=undefined)
$scope.nosmokeclass=$localStorage.nosmokeclass;if($localStorage.smokeclass!=undefined)
$scope.smokeclass=$localStorage.smokeclass;if($localStorage.smoker!=undefined)
$scope.smoker=$localStorage.smoker;if($localStorage.formgender!=undefined)
$scope.formgender=$localStorage.formgender;if($localStorage.formtobacco!=undefined)
$scope.formtobacco=$localStorage.formtobacco;$scope.txtActualIncome=$localStorage.txtActualIncome;$scope.selectedtermincomepop=$localStorage.selectedtermincomepop;$scope.selectedcitynampop=$localStorage.selectedcitynampop;$scope.selectedItem2=$localStorage.selectedItem2;$scope.formdob=$localStorage.formdob;$scope.IGdate=$localStorage.IGdate;$scope.IGmonth=$localStorage.IGmonth;$scope.IGyear=$localStorage.IGyear;if($scope.IGdate!=undefined&&$scope.IGmonth!=undefined&&$scope.IGyear!=undefined){$scope.testdate(3,1)}
mixpanel.identify($scope.IGquoteId);mixpanel.people.set({"Product":"Term"});}
else if(currentURL.indexOf("critical-illness-plan")!=-1||currentURL.indexOf("critical-illness-insurance")!=-1){$scope.commoncity1();$scope.termshow=false;$scope.product="Critical";$scope.criticalshow=true;mixpanel.identify($scope.IGquoteId);mixpanel.people.set({"Product":"Critical Illness"});if($localStorage.maleclass!=undefined)
$scope.maleclass=$localStorage.maleclass;if($localStorage.femaleclass!=undefined)
$scope.femaleclass=$localStorage.femaleclass;if($localStorage.gender!=undefined)
$scope.gender=$localStorage.gender;if($localStorage.nosmokeclass!=undefined)
$scope.nosmokeclass=$localStorage.nosmokeclass;if($localStorage.smokeclass!=undefined)
$scope.smokeclass=$localStorage.smokeclass;if($localStorage.smoker!=undefined)
$scope.smoker=$localStorage.smoker;if($localStorage.formgender!=undefined)
$scope.formgender=$localStorage.formgender;if($localStorage.formtobacco!=undefined)
$scope.formtobacco=$localStorage.formtobacco;$scope.txtActualIncome=$localStorage.txtActualIncome;$scope.selectedtermincomepop=$localStorage.selectedtermincomepop;$scope.selectedcitynampop=$localStorage.selectedcitynampop;$scope.selectedItem2=$localStorage.selectedItem2;$scope.formdob=$localStorage.formdob;$scope.IGdate=$localStorage.IGdate;$scope.IGmonth=$localStorage.IGmonth;$scope.IGyear=$localStorage.IGyear;if($scope.IGdate!=undefined&&$scope.IGmonth!=undefined&&$scope.IGyear!=undefined){$scope.testdate(3,1)}}
else if(currentURL.indexOf("travel")!=-1||currentURL.indexOf("Travel")!=-1){$scope.AllDestinationlist();$scope.product="Travel";mixpanel.identify($scope.IGquoteId);mixpanel.people.set({"Product":"Travel"});if($localStorage.destinationList!=undefined){$scope.destinationList=$localStorage.destinationList;$scope.checkDestinationerror(1);}
if($localStorage.travelStartDate!=undefined&&$localStorage.travelStartDate!=""){if(new Date($localStorage.travelStartDate)<$scope.todayDate){$scope.travelStartDate=($scope.todayDate.getMonth()+1+"/"+$scope.todayDate.getDate()+"/"+$scope.todayDate.getFullYear());}
else{$scope.travelStartDate=$localStorage.travelStartDate;}}
else{$scope.travelStartDate=($scope.todayDate.getMonth()+1+"/"+$scope.todayDate.getDate()+"/"+$scope.todayDate.getFullYear());}
if($localStorage.travelEndDate!=undefined&&$localStorage.travelEndDate!=""){if(new Date($localStorage.travelEndDate)<=new Date($scope.travelStartDate)){$scope.travelEndDate=undefined;}
else{$scope.travelEndDate=$localStorage.travelEndDate;}}
$scope.userMobile=$localStorage.userMobile;if($localStorage.selectedTravellers!=undefined){$scope.selectedTravellers=$localStorage.selectedTravellers;$scope.checkNoOfTravellerError();}
$scope.selectedDestination=$localStorage.selectedDestination;if($localStorage.dataValue!=undefined)
$scope.dataValue=$localStorage.dataValue;$scope.DOBArray=$localStorage.DOBArray;$scope.formtraveldestinations=$localStorage.formtraveldestinations;$scope.formtravelenddate=$localStorage.formtravelenddate;$scope.formtravelstartdate=$localStorage.formtravelstartdate;}
else if(currentURL.indexOf("child")!=-1||currentURL.indexOf("Child")!=-1){$scope.AllDestinationlist();$scope.product="Child";mixpanel.identify($scope.IGquoteId);mixpanel.people.set({"Product":"Child"});if($localStorage.maleclass!=undefined)
$scope.maleclass=$localStorage.maleclass;if($localStorage.femaleclass!=undefined)
$scope.femaleclass=$localStorage.femaleclass;if($localStorage.gender!=undefined)
$scope.gender=$localStorage.gender;if($localStorage.formgender!=undefined)
$scope.formgender=$localStorage.formgender;$scope.IGdate=$localStorage.IGdate;$scope.IGmonth=$localStorage.IGmonth;$scope.IGyear=$localStorage.IGyear;if($scope.IGdate!=undefined&&$scope.IGmonth!=undefined&&$scope.IGyear!=undefined){$scope.testdate(3,1)}
$scope.IGchilddate=$localStorage.IGchilddate;$scope.IGchildmonth=$localStorage.IGchildmonth;$scope.IGchildyear=$localStorage.IGchildyear;if($scope.IGchilddate!=undefined&&$scope.IGchildmonth!=undefined&&$scope.IGchildyear!=undefined){$scope.childtestdate(3);}
$scope.formchilddob=$localStorage.formchilddob
$scope.selectedincome=$localStorage.selectedincome;if($localStorage.childincometype!=undefined){$scope.childincometype=$localStorage.childincometype;}}
else if(currentURL.indexOf("pension")!=-1||currentURL.indexOf("Pension")!=-1){$scope.AllDestinationlist();$scope.product="Pension";mixpanel.identify($scope.IGquoteId);mixpanel.people.set({"Product":"Pension"});if($localStorage.maleclass!=undefined)
$scope.maleclass=$localStorage.maleclass;if($localStorage.femaleclass!=undefined)
$scope.femaleclass=$localStorage.femaleclass;if($localStorage.gender!=undefined)
$scope.gender=$localStorage.gender;if($localStorage.formgender!=undefined)
$scope.formgender=$localStorage.formgender;$scope.IGdate=$localStorage.IGdate;$scope.IGmonth=$localStorage.IGmonth;$scope.IGyear=$localStorage.IGyear;if($scope.IGdate!=undefined&&$scope.IGmonth!=undefined&&$scope.IGyear!=undefined){$scope.testdate(3,1)}
$scope.formdob=$localStorage.formdob;if($localStorage.txtActualIncome1!=undefined)
$scope.txtActualIncome=$localStorage.txtActualIncome1;if($localStorage.payMode!=undefined)
$scope.payMode=$localStorage.payMode;}
else if(currentURL.indexOf("investment")!=-1||currentURL.indexOf("Investment")!=-1){$scope.AllDestinationlist();$scope.product="Investment";mixpanel.identify($scope.IGquoteId);mixpanel.people.set({"Product":"Investment"});if($localStorage.maleclass!=undefined)
$scope.maleclass=$localStorage.maleclass;if($localStorage.femaleclass!=undefined)
$scope.femaleclass=$localStorage.femaleclass;if($localStorage.gender!=undefined)
$scope.gender=$localStorage.gender;if($localStorage.formgender!=undefined)
$scope.formgender=$localStorage.formgender;$scope.IGdate=$localStorage.IGdate;$scope.IGmonth=$localStorage.IGmonth;$scope.IGyear=$localStorage.IGyear;$scope.formdob=$localStorage.formdob;if($scope.IGdate!=undefined&&$scope.IGmonth!=undefined&&$scope.IGyear!=undefined){$scope.testdate(3,1)}
if($localStorage.txtActualIncome1!=undefined)
$scope.txtActualIncome=$localStorage.txtActualIncome1;if($localStorage.selectedincome1!=undefined)
$scope.selectedincome=$localStorage.selectedincome1;}
if(($location.path()=="/"&&currentURL.indexOf("CPID")==-1)||$location.path()=="/Home"){$scope.$root.mastercontent=true;$scope.$root.firstpageillusion=true;$scope.$root.showmainloader=false;$scope.$root.showNavbar=true;$scope.$root.TopHeading=true;$scope.$root.showHome=true;$scope.$root.Logos=true;$scope.$root.showotherpageheader=false;}
$scope.$root.quotesheader=false;$scope.userincomedropdown=TermFactory.userActualIncome($scope);$scope.userincometemp=$scope.userActualIncome;$scope.$root.showHeaderClass="display-visible";$scope.$root.showNavbar=true;$scope.showHeader="show";$scope.$root.scrollhide="home-bg bodymain";$scope.lastclaimlist=[{text:"0 %",value:"Yes~0"},{text:"20 %",value:"No~20"},{text:"25 %",value:"No~25"},{text:"35 %",value:"No~35"},{text:"45 %",value:"No~45"},{text:"50 %",value:"No~50"}];$scope.regyearlist=[];for(i=1;i<=14;i++){$scope.regyearlist.push({value:$scope.year-i,text:$scope.year-i});}
$scope.bikeregyearlist=[{value:"2007",text:"2007"},{value:"2008",text:"2008"},{value:"2009",text:"2009"},{value:"2010",text:"2010"},{value:"2011",text:"2011"},{value:"2012",text:"2012"},{value:"2013",text:"2013"},{value:"2014",text:"2014"},{value:"2015",text:"2015"}];$scope.previoussearchshow=true;$timeout(function(){$scope.showchatmsg=true;},2500);$scope.previoussearchtime=$scope.date.getDate()+"-"+($scope.date.getMonth()+1)+"-"+$scope.date.getFullYear();var temp1=$location.absUrl().split('&');console.log($location.absUrl());console.log(temp1);$scope.$root.showloader=false;for(var i=0;i<temp1.length;i++){if(temp1[i].indexOf("utm_source")!=-1){$scope.utmsourcedata=temp1[i].split('=')[1];if($scope.utmsourcedata!=undefined){if($scope.utmsourcedata=="policymanager"){$scope.hideepbar=false;}}}
if(temp1[i].indexOf("utm_medium")!=-1){$scope.utmmediumdata=temp1[i].split('=')[1];}
if(temp1[i].indexOf("utm_campaign")!=-1){$scope.utmcampaigndata=temp1[i].split('=')[1];}
if(temp1[i].indexOf("utm_term")!=-1){$scope.utmtermdata=temp1[i].split('=')[1];}
if(temp1[i].indexOf("partnerleadid")!=-1){$scope.utmpartnerleadiddata=temp1[i].split('=')[1];}
if(temp1[i].indexOf("partneragentid")!=-1){$scope.utmpartneragentiddata=temp1[i].split('=')[1];}}
var temp1=$location.absUrl().split('?');console.log(temp1);console.log(temp1.length);if(temp1.length==2){if(temp1[1].toLowerCase()=="prod=health"){$scope.maintabform(3);}
else if(temp1[1].toLowerCase()=="prod=healthmvc"){$scope.healthmvc=true;$scope.maintabform(3);}
else if(temp1[1].toLowerCase()=="prod=term"){$scope.maintabform(4);}
else if(temp1[1].toLowerCase()=="prod=child"){$scope.maintabform(5);}
else if(temp1[1].toLowerCase()=="prod=investment"){$scope.maintabform(6);}
else if(temp1[1].toLowerCase()=="prod=pension"){$scope.maintabform(7);}
else if(temp1[1].toLowerCase()=="prod=bike"){$scope.maintabform(2);}
else{console.log($scope.ProposerName);var temp2=temp1[1].split('=');if(temp2[0].toLowerCase()=="shareid"){console.log("yes");$scope.showrefferedpop=true;}}}
$scope.flaclaim($scope.year-6);$location.search("NotRegistrationNo",null);$location.search("NewCar",null);$location.search("NewBike",null);$location.search("BeenHerePop",null);$location.search("Searches",null);$location.search("Details",null);$location.search("CityPop",null);$location.search("CarMakeModel",null);$location.search("CarRto",null);$location.search("BikeMakeModel",null);$location.search("BikeRto",null);$location.search("AnnualIncomePop",null);$location.search("DestinationPop",null);$location.search("TravellerAge",null);$location.search("NoRegistrationNo",null);$location.search("OTP",null);$location.search("Lastclaim",null);}
$scope.commoncity1=function(flag){if(flag==1){$scope.CityValue=false;}
else{$scope.CityValue=true;}
$scope.citylisttemp=CommonService.citylist($scope);var time="2000";var urlservice=globals.ServiceURL+"/MasterService.svc/web/GetCityList";var ServiceName="MasterService";$timeout(function(){if($scope.Citlylisttime==0){$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[2].product);$scope.Citlylisttime=2;}
else{$scope.Citlylisttime=0;}},2000);$scope.citylisttemp.then(function(result){console.log("Cities List");if($scope.Citlylisttime==2){var timeoutvar=new Date().getTime();var dvar=(timeoutvar-$scope.timeoutarray['citylist']);$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[2].product,dvar);}
console.log(result);$scope.Citlylisttime=1;result.data=angular.fromJson(result.data);var commoncitylist11=result.data;$scope.commoncitystate=[];for(var i=0;i<commoncitylist11.length;i++){var temp={cityid:commoncitylist11[i].CityId+", "+commoncitylist11[i].StateId,cityname:commoncitylist11[i].City+", "+commoncitylist11[i].State,cityCategory:commoncitylist11[i].CityCategory};$scope.commoncitystate.push(temp);}
var cities=$filter('orderBy')($scope.commoncitystate,'cityname');$scope.commoncitystate=cities;if(flag==1){var letterMatch=new RegExp($scope.searchText,'i');for(var i=0;i<$scope.commoncitystate.length;i++){if(letterMatch.test($scope.commoncitystate[i].cityname.replace(',','').substring(0,$scope.searchText.length))){commoncitylist11.push($scope.commoncitystate[i]);}}
if(commoncitylist11.length==0){$scope.citymatch="Not match found......";}
else{$scope.citymatch=" We are fetching more cities.Continue Typing your city name...";}}},function(response){ServiceRespnse(response);});$scope.cityplaceholder="Type and select city...";$scope.disablecity=false;}
$scope.updatedallcity=function(){var test=[];var letterMatch=new RegExp($scope.searchText,'i');for(var i=0;i<$scope.commoncitystate.length;i++){if(letterMatch.test($scope.commoncitystate[i].cityname.replace(',','').substring(0,$scope.searchText.length))){test.push($scope.commoncitystate[i]);}}
if(test.length==0&&$scope.CityValue==true){$scope.commoncity1(1);}
else if(test.length==0&&$scope.CityValue==false){$scope.citymatch="Not match found......";}
return test;}
$scope.getAllLead=function(text,flag){$scope.beenHereBtnLoader=false;$scope.DownloadAppBtnLoader=false;$scope.getmobileno=true;$scope.thanksMobilelink=false;$scope.$root.getmobilenumber=null;$scope.$root.scrollhide="scrollhides";$rootScope.openNav();if(text=="getalllead"){$scope.$root.DownloadApp=false;$scope.thanksMobilelink=false;$scope.$root.mobileBlankError=false;$scope.$root.IsBeenHereBefore=true;$mixpanel.track('Been Here Before');$location.search("BeenHerePop");}}
$scope.checkNumber=function(number){if(number==undefined||number==null||number==""){$scope.$root.mobileBlankError=true;}
else{$scope.$root.mobileBlankError=false;}}
$scope.closeGetmobileno=function(){$scope.getmobileno=false;$scope.$root.scrollhide="home-bg";$scope.showbeenhere=true;$location.search("BeenHerePop",null);window.history.back();}
$scope.changeInvestValue=function(flag){if(flag=="child"){if($scope.childincometype=="Y"){var x=$scope.selectedincome*12;$scope.selectedincome=Math.ceil(x/1000.0)*1000;}
else if($scope.childincometype=="M"){var x=$scope.selectedincome/12;$scope.selectedincome=Math.floor(x/100.0)*100;}}
else{if($scope.selectedincome=="Y"){var x=$scope.txtActualIncome*12;$scope.txtActualIncome=Math.ceil(x/1000.0)*1000;}
else if($scope.selectedincome=="M"){var x=$scope.txtActualIncome/12;$scope.txtActualIncome=Math.floor(x/100.0)*100;}}}
$scope.changeInvestValue1=function(){if($scope.payMode=="Y"){var x=$scope.txtActualIncome*12;$scope.txtActualIncome=Math.ceil(x/1000.0)*1000;}
else if($scope.payMode=="M"){var x=$scope.txtActualIncome/12;$scope.txtActualIncome=Math.floor(x/100.0)*100;}}
$scope.getleadbasedonmobile=function(mobilenumber,MethodName,id){var msgMobile=ValidationFactory.mobilevalidate($scope.$root.getmobilenumber);$scope.beenHereBtnLoader=true;var flag=1;if(msgMobile=="False"){flag=0;$scope.$root.mobileBlankError=true;$scope.beenHereBtnLoader=false;}
else{$scope.$root.mobileBlankError=false;$scope.usermobile=parseInt($scope.$root.getmobilenumber);}
$scope.beenhereOTPcheck=true;if(flag==1){if(id!=1){$scope.showbtnleadloader=true;beenbefore(flag,MethodName);}
else{var getOTP=CommonService.NewSendOTPReboot($scope.$root.getmobilenumber);getOTP.then(function(result){$scope.TokenId=result.data.TokenId;$scope.userOTP0=undefined;$scope.userOTP1=undefined;$scope.userOTP2=undefined;$scope.userOTP3=undefined;$scope.showotpboxbybeenhere=true;$scope.getmobileno=false;$scope.showResend=false;$scope.resendtime=parseInt(result.data.OTPResendTimer);resendTimer();$timeout(function(){$scope.showResend=true;},10000);},function(response){ServiceRespnse(response);});}}}
function beenbefore(flag,MethodName){if(flag==1&&MethodName=="getalllead"){$scope.beenHereBtnLoader=true;var otp=$scope.userOTP0+$scope.userOTP1+$scope.userOTP2+$scope.userOTP3;var getalllead=CommonService.getDataByUserVisits(otp,$scope.$root.getmobilenumber,$scope.TokenId);getalllead.then(function(dt){$scope.showsendlink=false;$scope.$root.comparebuypop=false;$scope.alllead=angular.fromJson(dt.data.Visits);$scope.showbtnleadloader=false;if(dt.data.OTPResponse.ErrorCode==0){$scope.wrongotpmsgshow=false;if($scope.alllead.length>0){$scope.showotpboxbybeenhere=false;$scope.mobileBlankError=false;$scope.getmobileno=false;$scope.htmlScroll="scrollhides";$scope.$root.notFoundData=false;$scope.$root.scrollhide="home-bg";if(($scope.getmobileno==false||$scope.$root.beenHerePopUpAnimation=="out fadeOutDownBig")&&($scope.$root.DownloadApp!=true)){$scope.$root.beenHerePopUpAnimation="fadeInUp";$scope.$root.scrollhide="scrollhides";$scope.$root.beenHerePopUp=true;$scope.$root.beenHerePop=true;$location.search('Searches');$scope.beenHereBtnLoader=false;}}
else if($scope.alllead.length==0){$scope.$root.beenHerePopUpAnimation="fadeInUp";$scope.$root.scrollhide="scrollhides";$scope.showotpboxbybeenhere=false;$scope.$root.beenHerePopUp=true;$scope.$root.beenHerePop=true;$scope.$root.notFoundData=true;$scope.getmobileno=false;$scope.DownloadAppBtnLoader=false;}
for(var i=0;i<$scope.alllead.length;i++){if($scope.alllead[i].createddatetime!=undefined){var datetime=$scope.alllead[i].createddatetime;if($scope.alllead[i].LastVisit!=undefined&&$scope.alllead[i].LastVisit!=null&&$scope.alllead[i].LastVisit!=""){datetime=$scope.alllead[i].LastVisit;}
var date=(new Date(parseInt(datetime.substring(6,19))).getMonth()+1)+'/'+new Date(parseInt(datetime.substring(6,19))).getDate()+'/'+
new Date(parseInt(datetime.substring(6,19))).getFullYear();$scope.alllead[i].day=new Date(date);var time1=new Date(parseInt(datetime.substring(6,19))).getHours();var time2=new Date(parseInt(datetime.substring(6,19))).getMinutes();var time3=new Date(parseInt(datetime.substring(6,19))).getSeconds();if(parseInt(time1)<10){time1="0"+parseInt(time1);}
if(parseInt(time2)<10){time2="0"+parseInt(time2);}
if(parseInt(time3)<10){time3="0"+parseInt(time3);}
var time=time1+":"+time2+":"+time3;if(parseInt(time.split(':')[0])>12){$scope.alllead[i].time=time+" PM";}
else if(parseInt(time.split(':')[0])==12&&(parseInt(time.split(':')[1])>0||parseInt(time.split(':')[2])>0)){$scope.alllead[i].time=time+" PM";}
else{$scope.alllead[i].time=time+" AM";}
if($scope.alllead[i].DOB!=undefined){var date=new Date(parseInt($scope.alllead[i].DOB.substring(6,19))).getMonth()+1+'-'+
(new Date(parseInt($scope.alllead[i].DOB.substring(6,19))).getDate())+'-'+
new Date(parseInt($scope.alllead[i].DOB.substring(6,19))).getFullYear();$scope.alllead[i].Age=$scope.getAge(date);}
if($scope.alllead[i].ProductName.toLowerCase()=="car"){$scope.alllead[i].classSource="carico";$scope.UniqueId=$scope.alllead[i].IGQuoteId;}
else if($scope.alllead[i].ProductName.toLowerCase()=="two wheeler"){$scope.alllead[i].classSource="twowheelerico";$scope.alllead[i].ProductName="Bike";$scope.UniqueId=$scope.alllead[i].IGQuoteId;}
else if($scope.alllead[i].ProductName.toLowerCase()=="health"){$scope.alllead[i].classSource="healthico";}
else if($scope.alllead[i].ProductName.toLowerCase()=="term"){$scope.alllead[i].classSource="termico";}
else if($scope.alllead[i].ProductName.toLowerCase()=="travel"){$scope.alllead[i].classSource="travelico";}
else if($scope.alllead[i].ProductName.toLowerCase()=="child"){$scope.alllead[i].classSource="childico";}
else if($scope.alllead[i].ProductName.toLowerCase()=="investment"){$scope.alllead[i].classSource="investmentico";}
else if($scope.alllead[i].ProductName.toLowerCase()=="pension"){$scope.alllead[i].classSource="pensionico";}
else if($scope.alllead[i].ProductName.toLowerCase()=="critical illness"){$scope.alllead[i].classSource="criticalico";}}}}
else{$scope.wrongotpmsgshow=true;}},function(response){ServiceRespnse(response);});}
else if(flag==1&&MethodName=="downloadapp"){$scope.DownloadAppBtnLoader=true;var Message="Please download the app from below link ";var getalllead=CommonService.senddownloadapplink($scope.$root.getmobilenumber,Message);getalllead.then(function(dt){$scope.getmobileno=false;$scope.$root.thanksMobilelink=true;$scope.$root.scrollhide="home-bg";});}}
$scope.localStorage=function(flag,item){$mixpanel.track('Previous Search',{"CPID":item.IGQuoteId});var revisitflag=CommonService.revisit($scope,globals,item.IGQuoteId);revisitflag.then(function(data){$window.location.href=globals.RedirectURL+"/?CPID="+btoa(item.IGQuoteId)},function(response){ServiceRespnse(response);});}
$scope.sideNavClose=function(){$rootScope.openNav();}
$rootScope.openNav=function(){if($scope.$root.sideNavShow==false){$(".sidenav").animate({left:'0px'},200);$(".sideNavFull").fadeIn(100);$scope.$root.sideNavShow=true;$scope.$root.scrollhide="scrollhides";}
else if($scope.$root.sideNavShow==true){$(".sidenav").animate({left:'-210px'},200);$(".sideNavFull").fadeOut(100);$scope.$root.sideNavShow=false;$scope.$root.scrollhide="home-bg";}}
$rootScope.popredirect=function(flag){$scope.showbtncarloader=false;$scope.showbtnbikeloader=false;$scope.travelProceedBtnLoader=false;$scope.showbtntravelloader=false;$scope.showbtntermloader=false;$scope.showbtnhealthloader=false;$scope.showbtnpensionloader=false;$scope.showbtninvestloader=false;$scope.showbtnchildloader=false;if(flag==1){$scope.$root.beenHerePopUpAnimation="out fadeOutDownBig";$scope.showbeenhere=true;$scope.$root.scrollhide="";$scope.getAllLead('getalllead');}
else if(flag==2){$scope.getleadbasedonmobile($scope.$root.getmobilenumber,'getalllead');}
else if(flag==4){$scope.getlinkpop('new');$scope.showcitypop=false;$scope.carmakemblpop=false;$scope.carrtomblpop=false;$scope.showotpbox=false;$scope.getmobileno=false;$scope.$root.beenHerePopUpAnimation="out fadeOutDownBig";$scope.$root.scrollhide="";$scope.$root.beenHerePopUp=false;$scope.showbeenhere=true;$scope.Showlastclaim=false;$location.search("BeenHerePop",null);}
else if(flag==5){$scope.getlinkpop();$scope.showcitypop=false;$scope.carmakemblpop=false;$scope.carrtomblpop=false;$scope.getmobileno=false;$scope.$root.scrollhide="home-bg";$scope.showbeenhere=true;$scope.showotpbox=false;$scope.Showlastclaim=false;$location.search("BeenHerePop",null);}
else if(flag==6){$scope.getbikepopup('new');$scope.showcitypop=false;$scope.citymblpop=false;$scope.bikemakemblpop=false;$scope.bikertomblpop=false;$scope.getmobileno=false;$scope.Showlastclaim=false;$scope.$root.scrollhide="home-bg";$scope.showbeenhere=true;$location.search("BeenHerePop",null);}
else if(flag==7){$scope.getbikepopup();$scope.showcitypop=false;$scope.carmakemblpop=false;$scope.carrtomblpop=false;$scope.getmobileno=false;$scope.$root.scrollhide="home-bg";$scope.showbeenhere=true;$scope.showotpbox=false;$location.search("BeenHerePop",null);}
else if(flag==8){$scope.showcitypop=true;$scope.carmakemblpop=true;$scope.carrtomblpop=false;$scope.Showlastclaim=false;}
else if(flag==9){$scope.showcitypop=true;$scope.carmakemblpop=false;$scope.carrtomblpop=true;$scope.Showlastclaim=false;}
else if(flag==10){$scope.showcitypop=true;$scope.citymblpop=false;$scope.bikemakemblpop=true;$scope.bikertomblpop=false;$scope.Showlastclaim=false;}
else if(flag==11){$scope.showcitypop=true;$scope.citymblpop=false;$scope.bikemakemblpop=false;$scope.bikertomblpop=true;$scope.Showlastclaim=false;}
else if(flag==12){$scope.showcitypop=true;$scope.citymblpop=true;$scope.getmobileno=false;$scope.Showlastclaim=false;}
else if(flag==17){$scope.showcitypop=true;$scope.Showlastclaim=true;$scope.getmobileno=false;}
else if(flag==13){$scope.showcitypop=true;$scope.termannualmblpop=true;$scope.citymblpop=false;$scope.Showlastclaim=false;}
else if(flag==14){$scope.showcitypop=true;$scope.traveldestination=true;$scope.$root.travelfirstpop=false;$scope.Showlastclaim=false;}
else if(flag==15){$scope.$root.travelfirstpop=false;$scope.$root.travelsecondpop=true;$scope.traveldestination=false;$scope.showotpbox=false;$scope.Showlastclaim=false;}
else if(flag==16){$scope.$root.travelfirstpop=false;$scope.$root.travelsecondpop=false;$scope.traveldestination=false;$scope.$root.travelfirstpop=false;$scope.$root.travelsecondpop=false;$scope.traveldestination=false;$scope.travelProceedBtnLoader=false;$scope.termannualmblpop=false;$scope.healthfirstpop=false;$scope.bikepopup=false;$scope.bikemaindetails=false;$scope.citymblpop=false;$scope.bikemakemblpop=false;$scope.Showlastclaim=false;$scope.bikertomblpop=false;$scope.newcarshow=false;$scope.showbeenhere=false;$scope.carpopup=false;$scope.carmaindetails=false;$scope.showcitypop=false;$scope.carmakemblpop=false;$scope.carrtomblpop=false;$scope.getmobileno=false;$scope.termpopup=false;$scope.pensionpopup=false;$scope.investpopup=false;$scope.childpopup=false;$scope.$root.beenHerePopUp=false;$scope.$root.scrollhide="home-bg";$scope.showotpbox=true;$scope.OTP0=true;}
else{$scope.showotpbox=false;$scope.$root.travelfirstpop=true;$scope.$root.travelsecondpop=false;$scope.traveldestination=false;$scope.travelProceedBtnLoader=false;$scope.termannualmblpop=false;$scope.bikepopup=false;$scope.bikemaindetails=true;$scope.citymblpop=false;$scope.bikemakemblpop=false;$scope.bikertomblpop=false;$scope.Showlastclaim=false;$scope.newcarshow=false;$scope.showbeenhere=true;$scope.carpopup=false;$scope.carmaindetails=true;$scope.showcitypop=false;$scope.carmakemblpop=false;$scope.carrtomblpop=false;$scope.termpopup=true;$scope.healthfirstpop=true;$scope.pensionpopup=true;$scope.investpopup=true;$scope.childpopup=true;$scope.getmobileno=false;$scope.$root.beenHerePopUp=false;$scope.$root.scrollhide="home-bg";}}
$scope.closemblpop=function(item,flag){if(item==1){$scope.showcitypop=false;$scope.carmakemblpop=false;$scope.citymblpop=false;$scope.carrtomblpop=false;$scope.bikemakemblpop=false;$scope.bikertomblpop=false;$scope.ShowCarRegistrationyear=false;$scope.Showcarbreak=false;$scope.Showlastclaim=false;$scope.ShowCarCNGKit=false;$scope.ShowBikeRegistrationyear=false;$scope.Showbikepolexp=false;if(flag!=-1){$location.search("Details",null);window.history.back();}}
if(flag==1){if(item==2){$scope.searchText03="";$scope.showcitypop=true;$scope.citymblpop=true;$scope.myInputFocus=true;$scope.termannualmblpop=false;$location.search("CityPop");}
else{$scope.showcitypop=false;$scope.citymblpop=false;$scope.selectedItem2=item;$scope.selectedcitynampop=item.cityname;$scope.checkcityerrors();window.history.back();}}
if(flag==2){if(item==2){$scope.showcitypop=true;$scope.carmakemblpop=true;$scope.myInputFocusCarMake=true;$location.search("CarMakeModel");}
else{$scope.showcitypop=false;$scope.carmakemblpop=false;$scope.selectedItem=item;$scope.selectedcarmakepop=item.ModelName;$scope.checkcarerror();$location.search("CarMakeModel",null);window.history.back();}}
if(flag==3){if(item==2){$scope.showcitypop=true;$scope.carrtomblpop=true;$scope.myInputFocusCarRto=true;$location.search("CarRto");}
else{$scope.showcitypop=false;$scope.carrtomblpop=false;$scope.selectedItem1=item;$scope.selectedcarrtopop=item.RTOCode;$scope.checkcityerror();if($scope.newcarshow==false){$scope.showcitypop=false;$scope.citymblpop=false;$scope.carrtomblpop=false;$scope.ShowCarRegistrationyear=false;if($scope.$root.carfuelcontainer==true||$scope.carfuelcontainer==true){$scope.showcitypop=true;$scope.ShowCarCNGKit=true;}}
$location.search("CarRto");window.history.back();}}
if(flag==4){if(item==2){$scope.showcitypop=true;$scope.bikemakemblpop=true;$scope.myInputFocusBikeMake=true;$location.search("BikeMakeModel");}
else{$scope.showcitypop=false;$scope.bikemakemblpop=false;$scope.selectedbikemmv=item;$scope.selectedbikemakepop=item.bikename;$scope.checkbikelisterror();$location.search("BikeMakeModel",null);window.history.back();}}
if(flag==5){if(item==2){$scope.showcitypop=true;$scope.bikertomblpop=true;$scope.myInputFocusBikeRto=true;$location.search("BikeRto");}
else{$scope.showcitypop=false;$scope.bikertomblpop=false;$scope.selectedbikerto=item;$scope.selectedbikertopop=item.cityname;$scope.checkbikertoerror();$location.search("BikeRto",null);window.history.back();}}
if(flag==6){if(item==2){$scope.showcitypop=true;$scope.termannualmblpop=true;$scope.myInputFocusTermIncome=true;$scope.updateincome();$location.search("AnnualIncomePop");}
else{$scope.showcitypop=false;$scope.termannualmblpop=false;$scope.txtActualIncome=item;$scope.selectedtermincomepop=item.ActualIncomeText;$scope.checktermincomeerror();$location.search("AnnualIncomePop",null);window.history.back();}}
if(flag==7){if(item==2){$scope.showcitypop=true;$scope.traveldestination=true;$scope.myInputFocustravellingdest=true;$location.search("DestinationPop");}
else{$scope.showcitypop=false;$scope.traveldestination=false;$scope.selectedDestinationItem=item;$location.search("DestinationPop",null);window.history.back();$scope.checkDestinationerror();}}
if(flag==9){if(item==2){$scope.showcitypop=true;$scope.Showlastclaim=true;$scope.myInputFocuslastclaim=true;$location.search("Lastclaim");}
else{$scope.showcitypop=false;$scope.Showlastclaim=false;$scope.carclaimtext1=item.text;$scope.carclaim=item.value;$location.search("Lastclaim",null);$scope.carclaimchange();window.history.back();}}}
$scope.carmakename=function(item){$scope.selectedItem=item;$scope.popupformob=false;}
$scope.checkcarbreaking1=function(flag){if($scope.carbreakingpol==0){$scope.carbreaking=1;$scope.carbreakingexp=0;$scope.checkcarbreaking(1);}
else if($scope.carbreakingpol==90){$scope.carbreaking=0;$scope.carbreakingexp=0;$scope.checkcarbreaking(2);}
else{$scope.carbreaking=0;$scope.carbreakingexp=1;$scope.checkcarbreaking(2);}}
$scope.checkcarbreaking=function(flag){if(flag==1||flag==3){if($scope.carbreaking==0){if($scope.carbreakingexp==0){$scope.showcarncb=true;$scope.showfastlaneclaimlast=true;$scope.$root.showcarncb=true;}
else{if($scope.carbreakingexp==undefined){$scope.carbreakingexp="0";$scope.showfastlaneclaimlast=true;}
else{$scope.showcarncb=false;$scope.showfastlaneclaimlast=false;$scope.$root.showcarncb=false;}}
$scope.showcarexpired=true;}
else{$scope.showcarncb=true;$scope.showfastlaneclaimlast=true;$scope.$root.showcarncb=true;$scope.showcarexpired=false;}}
else if(flag==2||flag==4){if($scope.carbreakingexp==0){$scope.showcarncb=true;$scope.showfastlaneclaimlast=true;$scope.$root.showcarncb=true;if(flag==4){$scope.showcarncb=true;$scope.$root.showcarncb=true;}}
else{if(flag==4){$scope.showcarncb=false;$scope.$root.showcarncb=false;}
$scope.showfastlaneclaimlast=false;$scope.$root.showcarncb=false;$scope.showcarncb=false;}}}
$scope.checkcarerror=function(flag){$scope.carlabel=true;if($scope.selectedItem==null||$scope.selectedItem==undefined||$scope.selectedItem==""){flag=1;$scope.carerror=true;$scope.carlabel=false;}
else{$scope.carerror=false;$scope.carlabel=true;$scope.formcarwidget=$scope.selectedItem.ModelName;var temp1=$scope.selectedItem.ModelName.split(",");if(temp1[1].trim()=="DIESEL"){$scope.carkitstatus=undefined;$scope.carfuelcontainer=false;$scope.formddlkit="Kit0";$scope.$root.entercngkitvalue=0;$scope.$root.carfuelcontainervalue=false;}
else if(temp1[1].trim()=="CNG"){$scope.carkitstatus=undefined;$scope.carfuelcontainer=false;$scope.$root.entercngkitvalue=0;$scope.formddlkit="Kit0";}
else if(temp1[1].trim()=="LPG"){$scope.carkitstatus=undefined;$scope.carcnglpg=$scope.carpoplpg;$scope.carfuelcontainer=true;}
else if(temp1[1].trim()=="PETROL"){$scope.carkitstatus=undefined;$scope.carcnglpg=$scope.carpoppetrol;$scope.carfuelcontainer=true;}}}
$scope.checkcityerror=function(flag){$scope.citylabel=true;if($scope.selectedItem1==null||$scope.selectedItem1==''||$scope.selectedItem1==undefined){flag=1;$scope.citylabel=false;$scope.cityerror=true;}
else{$scope.cityerror=false;$scope.citylabel=true;$scope.formcarrto=$scope.selectedItem1.CityName;console.log("carrto");}}
$scope.fnGetregyear=function(){$scope.arrayregyearlist=[{id:"0",value:"Registration Year"},{id:"2015",value:"2015"},{id:"2014",value:"2014"},{id:"2013",value:"2013"},{id:"2012",value:"2012"},{id:"2011",value:"2011"},{id:"2010",value:"2010"},{id:"2009",value:"2009"},{id:"2008",value:"2008"},{id:"2007",value:"2007"}];}
$scope.flaclaim=function(yom,flag){var arrNeverNCB=[50,50,50,50,45,35,25,20,0];var arrYearNCB=[0,20,25,35,45,50,50,50,50];var monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];var bool=true;var year=$scope.year.toString();$scope.regyear=[];var vddlregyear=0;if(yom==year.trim()){var val='No~'+arrNeverNCB[vddlregyear-1];var option={value:val,text:"Never"};$scope.regyear.push(option);}
else if(yom=="0"){var option={value:"Claim Last Taken",text:"Claim Last Taken"};$scope.regyear.push(option);}
else{var findYear=year-yom;var val='No~'+arrNeverNCB[vddlregyear+1];var option={value:val,text:"Never"};$scope.regyear.push(option);var k=2;var s=1;var j=0;for(var i=findYear-1;i>=0;i--){if(bool==true){var val='Yes~'+arrYearNCB[0];var text="Less than"+" "+(findYear-i)+" "+"Year ago";var option={value:val,text:text};$scope.regyear.push(option);bool=false;}
else{var val='No~'+arrYearNCB[k-2];if($scope.date.getMonth()!=0){var text=(monthNames[$scope.date.getMonth()])+" "+(year-(s+1))+" "+"to"+" "+(monthNames[$scope.date.getMonth()-1])+" "+(year-(j+1));}
else{var text=(monthNames[$scope.date.getMonth()])+" "+(year-(s+1))+" "+"to"+" "+(monthNames[11])+" "+(year-(s+1));}
if((year-(s+1))!=year-6){var option={value:val,text:text};$scope.regyear.push(option);}
s++;j++;bool=false;}
k++;}}
$scope.regyear1=$scope.regyear;}
$scope.bikecitylist=function(){$scope.bikertoapilist=CommonService.bikertoservice(undefined,undefined,$scope);var time="2000";var urlservice=globals.ServiceURL+"/MasterService.svc/web/GetTWRTOList";var ServiceName="MasterService";$timeout(function(){if($scope.BikeRTOtime==0){$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[1].product);$scope.BikeRTOtime=2;}
else{$scope.BikeRTOtime=0;}},2000);$scope.bikertoapilist.then(function(result){if($scope.BikeRTOtime==2){var timeoutvar=new Date().getTime();var dvar=(timeoutvar-$scope.timeoutarray['bikerto']);$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[1].product,dvar);}
result.data=angular.fromJson(result.data);$scope.bikertoapidata=result.data;$scope.bikecitystate1=[];$scope.BikeRTOtime=1;for(var i=0;i<$scope.bikertoapidata.length;i++){var temp={cityid:$scope.bikertoapidata[i].CityId,stateid:$scope.bikertoapidata[i].StateId,RTOCode:$scope.bikertoapidata[i].RTOCode,cityname:$scope.bikertoapidata[i].RTOCity};$scope.bikecitystate1.push(temp);}
$scope.bikecitystate=[{cityid:"123",stateid:"10",RTOCode:"DL3S",cityname:"(DL3S) Delhi-Sheikh Sarai,Delhi"},{cityid:"121",stateid:"10",RTOCode:"DL1S",cityname:"(DL1S) Delhi-Mall Road,Delhi"},{cityid:"662",stateid:"34",RTOCode:"UP14",cityname:"(UP14) Ghaziabad,Uttar Pradesh"},{cityid:"192",stateid:"13",RTOCode:"HR26",cityname:"(HR26) Gurgaon,Haryana"},{cityid:"572",stateid:"29",RTOCode:"RJ14",cityname:"(RJ14) Jaipur,Rajasthan"},{cityid:"1046",stateid:"21",RTOCode:"MH47",cityname:"(MH47) Mumbai,Maharashtra"},{cityid:"597",stateid:"31",RTOCode:"TN01",cityname:"(TN01) Chennai,TAMILNADU"},{cityid:"140",stateid:"12",RTOCode:"GJ01",cityname:"(GJ01) Ahmedabad,Gujarat"},{cityid:"730",stateid:"35",RTOCode:"WB02",cityname:"(WB02) Kolkata,West Bengal"},{cityid:"416",stateid:"21",RTOCode:"MH12",cityname:"(MH12) Pune,Maharashtra"},{cityid:"959",stateid:"17",RTOCode:"KA41",cityname:"(KA41) Bangalore,Karnataka"},{cityid:"9",stateid:"2",RTOCode:"AP09",cityname:"(AP09) Hyderabad,Andhra Pradesh"}];});}
$scope.updatedallbikerto=function(){console.log($scope.bikecitystate1);$scope.bikecitystate=$scope.bikecitystate1;}
$scope.bikealldatalist=function(){$scope.bikemakemodelapilist=CommonService.bikemakemodelservice();var time="2000";var urlservice=globals.ServiceURL+"/MasterService.svc/web/GetTWModelList";var ServiceName="InsureJoyServices";$timeout(function(){if($scope.BikeMakeModeltime==0){$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[1].product);$scope.BikeMakeModeltime=2;}
else{$scope.BikeMakeModeltime=0;}},2000);$scope.bikemakemodelapilist.then(function(result){if($scope.BikeMakeModeltime==2){var timeoutvar=new Date().getTime();var dvar=(timeoutvar-$scope.timeoutarray['bikemodel']);$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[1].product,dvar);}
result.data=angular.fromJson(result.data);$scope.bikemakemodelapidata=result.data;console.log("jainbike");$scope.bikecitystates1=[];$scope.BikeMakeModeltime=1;for(var i=0;i<$scope.bikemakemodelapidata.length;i++){var temp={bikename:$scope.bikemakemodelapidata[i].ModelName,makeid:$scope.bikemakemodelapidata[i].MakeId,modelid:$scope.bikemakemodelapidata[i].ModelId};$scope.bikecitystates1.push(temp);}
console.log($scope.bikecitystates1);$scope.bikecitystates=[{bikename:"BAJAJ PULSAR 150 CC, Petrol, 2, 150",makeid:"3",modelid:"84"},{bikename:"ROYAL ENFIELD CLASSIC 500, Petrol, 2, 499",makeid:"10",modelid:"31"},{bikename:"BAJAJ DISCOVER 125 CC, Petrol, 2, 125",makeid:"3",modelid:"57"},{bikename:"BAJAJ AVENGER 200 CC, Petrol, 2, 200",makeid:"3",modelid:"103"},{bikename:"HERO HONDA PASSION PRO KICK, Petrol, 2, 97",makeid:"2",modelid:"376"},{bikename:"HERO HONDA SPLENDOR SP EDITION, Petrol, 2, 125",makeid:"2",modelid:"448"},{bikename:"TVS JUPITER STALLION, Petrol, 2, 110",makeid:"4",modelid:"470"},{bikename:"TVS APACHE RTR 160 CC, Petrol, 2, 160",makeid:"4",modelid:"404"},{bikename:"HERO HONDA CD DELUXE SPOKE, Petrol, 2, 100",makeid:"2",modelid:"452"},{bikename:"YAMAHA FZ V2, Petrol, 2, 153",makeid:"1",modelid:"552"},{bikename:"HONDA CB UNICORN 160 2ID, Petrol, 2, 160",makeid:"11",modelid:"179"},{bikename:"HONDA ACTIVA 110 CC, Petrol, 2, 109",makeid:"11",modelid:"49"},{bikename:"HONDA ACTIVA DISC 125, Petrol, 2, 125",makeid:"11",modelid:"55"}];},function(response){ServiceRespnse(response);});}
$scope.updatedallbikelist=function(){$scope.bikecitystates=$scope.bikecitystates1;}
$scope.citylist=function(){$scope.carupdatedrtoapilist=CommonService.carupdatedrtoservice($scope);var time="2000";var urlservice=globals.ServiceURL+"/MasterService.svc/web/GetCarRTOList";var ServiceName="MasterService";$timeout(function(){if($scope.CityListtime==0){$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[0].product);$scope.CityListtime=2;}
else{$scope.CityListtime=0;}},2000);$scope.carupdatedrtoapilist.then(function(result){if($scope.CityListtime==2){var timeoutvar=new Date().getTime();var dvar=(timeoutvar-$scope.timeoutarray['carrto']);$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[0].product,dvar);}
result.data=angular.fromJson(result.data);console.log("himanshu jain");console.log(result);$scope.citystate1=[];$scope.CityListtime=1;$scope.citystate1=result.data;$scope.citystate=[{CityName:"(DL3C) Delhi-Sheikh Sarai, Delhi",RTOCode:"DL3C",CityCode:123,StateCode:10},{CityName:"(UP16) GAUTAMBUDDH NAGAR, Uttar Pradesh",RTOCode:"UP16",CityCode:664,StateCode:34},{CityName:"(HR55) GURGAON, Haryana",RTOCode:"HR55",CityCode:217,StateCode:13},{CityName:"(UP14) GHAZIABAD, Uttar Pradesh",RTOCode:"UP14",CityCode:662,StateCode:34},{CityName:"(MH47) Mumbai, Maharashtra",RTOCode:"MH47",CityCode:1046,StateCode:21},{CityName:"(MH48) Mumbai, Maharashtra",RTOCode:"MH48",CityCode:1047,StateCode:21},{CityName:"(TN01) CHENNAI, TAMILNADU",RTOCode:"TN01",CityCode:597,StateCode:31},{CityName:"(GJ1) Ahmedabad, Gujarat",RTOCode:"GJ1",CityCode:1387,StateCode:12},{CityName:"(RJ14) JAIPUR, Rajasthan",RTOCode:"RJ14",CityCode:572,StateCode:29},{CityName:"(MH12) PUNE, Maharashtra",RTOCode:"MH12",CityCode:416,StateCode:21},{CityName:"(WB02) KOLKATA, West Bengal",RTOCode:"WB02",CityCode:730,StateCode:35},{CityName:"(KA51) BANGALORE, Karnataka",RTOCode:"KA51",CityCode:349,StateCode:17}];},function(response){ServiceRespnse(response);});}
$scope.updatedallcarrto=function(){$scope.citystate=$scope.citystate1;}
$scope.carlist=function(){$scope.carupdatedmakemodelapilist=CommonService.carupdatedmakemodelservice($scope);var time="2000";var urlservice=globals.ServiceURL+"/MasterService.svc/web/GetCarModelList";var ServiceName="MasterService";$timeout(function(){if($scope.CarMakeModeltime==0){$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[0].product);$scope.CarMakeModeltime=2;}
else{$scope.CarMakeModeltime=0;}},2000);$scope.carupdatedmakemodelapilist.then(function(result){if($scope.CarMakeModeltime==2){var timeoutvar=new Date().getTime();var dvar=(timeoutvar-$scope.timeoutarray['carmodel']);$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[0].product,dvar);}
result.data=angular.fromJson(result.data);console.log("himanshu jain");console.log(result);$scope.CarMakeModeltime=1;$scope.carlistdata1=[];$scope.cartemplist=result.data;$scope.carlistdata1=result.data;$scope.carlistdata=[{ModelName:"Maruti Suzuki Swift Dzire LDI, DIESEL, 5, 1248",MakeId:3,ModelId:14246},{ModelName:"Maruti Suzuki Wagon R 1.0 LX, PETROL, 5, 998",MakeId:3,ModelId:14318},{ModelName:"Hyundai Grand i10 Asta 1.1 CRDi, DIESEL, 5, 1120",MakeId:1,ModelId:13937},{ModelName:"Hyundai Elite i20 Asta 1.2, PETROL, 5, 1197",MakeId:1,ModelId:13904},{ModelName:"Honda City V (Petrol), PETROL, 5, 1497",MakeId:2,ModelId:13855},{ModelName:"RENAULT Duster RxE, PETROL, 5, 1598",MakeId:44,ModelId:14658},{ModelName:"Maruti Suzuki Swift Dzire LXi, PETROL, 5, 1298",MakeId:3,ModelId:14250},{ModelName:"Ford Figo Base 1.2 Ti-VCT, PETROL, 5, 1196",MakeId:5,ModelId:14538},{ModelName:"Hyundai Eon Era + (LPG), CNG, 5, 814",MakeId:1,ModelId:13923},{ModelName:"Toyota Etios Liva G, PETROL, 5, 1197",MakeId:6,ModelId:14471},{ModelName:"Honda Amaze 1.2 E i-VTEC, PETROL, 5, 1198",MakeId:2,ModelId:13825}];},function(response){ServiceRespnse(response);});}
$scope.updatedallcarlist=function(){$scope.carlistdata=$scope.carlistdata1;}
$scope.carclaimchange=function(){console.log($scope.carclaim);$scope.claimtaken=$scope.carclaim;if($scope.carclaim==undefined){$scope.popcarclaimerror=true;flag=1;}
else{$scope.popcarclaimerror=false;var ncbyear=$scope.year-$scope.carreg;if(ncbyear>6){ncbyear=6;$scope.carrequiredncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];}
else{$scope.carrequiredncb=$scope.lastclaimlist[ncbyear].value.split("~")[1];}
if($scope.carclaim=="No~50"){$scope.forcarwidgetpercent=$scope.lastclaimlist[ncbyear-1].value;$scope.carclaimedncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1]}
else if($scope.carclaim=="Yes~0"){$scope.forcarwidgetpercent=$scope.lastclaimlist[0].value;$scope.requiredncbvalue=0;$scope.carclaimedncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[0].value.split("~")[1];}
else if($scope.carclaim=="No~20"){$scope.forcarwidgetpercent=$scope.lastclaimlist[0].value;$scope.carclaimedncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[1].value.split("~")[1];}
else if($scope.carclaim=="No~25"){$scope.forcarwidgetpercent=$scope.lastclaimlist[1].value;$scope.carclaimedncb=$scope.lastclaimlist[1].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[2].value.split("~")[1];}
else if($scope.carclaim=="No~35"){$scope.forcarwidgetpercent=$scope.lastclaimlist[2].value;$scope.carclaimedncb=$scope.lastclaimlist[2].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[3].value.split("~")[1];}
else if($scope.carclaim=="No~45"){$scope.forcarwidgetpercent=$scope.lastclaimlist[3].value;$scope.carclaimedncb=$scope.lastclaimlist[3].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[4].value.split("~")[1];}
if($scope.forcarwidgetpercent=="Yes~0"&&$scope.carclaim=="No~50"){$scope.forcarwidgetpercent="No~0"}}}
$scope.carkitchange=function(){$scope.popcarcnglpgerror=false;if($scope.carkitstatus==undefined){$scope.popcarcnglpgerror=true;flag=1;}
else{$scope.popcarcnglpgerror=false;$scope.formddlkit=$scope.carkitstatus;if($scope.carkitstatus=="Kit3"){$scope.$root.carfuelcontainervalue=true;$scope.cngkitdata="True";$scope.cngkitprice=20000;}
else{$scope.$root.carfuelcontainervalue=false;$scope.cngkitdata="False";$scope.cngkitprice=0;}}}
$scope.checkcngvalueerror=function(){if($scope.$root.entercngkitvalue<0){$scope.popcarcnglpgvalueerror=true;}
else{$scope.popcarcnglpgvalueerror=false;}}
$scope.carregyear=function(){if($scope.carreg!=undefined){$scope.popcarregerror=false;$scope.forcarreg=$scope.carreg;var flag=0;var lastclaimtemp=$scope.lastclaimtaken1;var temparray=[];var yeargap=$scope.year-$scope.carreg;for(var i=0;i<=yeargap;i++){if(lastclaimtemp.length>=i){temparray.push(lastclaimtemp[i]);}}
$scope.lastclaimtaken=temparray;if($scope.carbreakingexp==1&&$scope.carbreaking==0){$scope.showcarncb=false;}
else{$scope.showcarncb=true;}}
else{$scope.popcarregerror=true;}}
$scope.getcarquotes=function(){$scope.wrongotpmsgshow=false;$scope.userOTP=undefined;if($scope.newcarshow==false){$scope.carreg=$scope.date.getFullYear();$scope.carclaim="Yes~0";$scope.carbreakingexp=0;$scope.carbreaking=1;}
var productid=4;var flag=0;if($scope.carclaim==undefined&&($scope.carbreakingexp!=1||$scope.carbreaking==1)){$scope.popcarclaimerror=true;flag=1;}
else{$scope.popcarclaimerror=false;}
if($scope.carkitstatus==undefined&&$scope.carfuelcontainer==true){$scope.popcarcnglpgerror=true;flag=1;}
else{$scope.popcarcnglpgerror=false;}
if($scope.carreg==undefined){$scope.popcarregerror=true;flag=1;}
else{$scope.popcarregerror=false;}
if($scope.selectedItem==null){$scope.carerror=true;flag=1;}
else{$scope.carerror=false;}
if($scope.selectedItem1==null&&$scope.byreg==false){$scope.cityerror=true;flag=1;}
else{$scope.cityerror=false;}
if($scope.$root.entercngkitvalue>=5000&&$scope.$root.entercngkitvalue<=50000){$scope.popcarcnglpgvalueerror=false;}
else{$scope.popcarcnglpgvalueerror=true;}
if($scope.$root.carfuelcontainervalue==true&&($scope.$root.entercngkitvalue==undefined||$scope.$root.entercngkitvalue>50000||$scope.$root.entercngkitvalue<5000)){flag=1;$scope.popcarcnglpgvalueerror=true;}
if($scope.userMobile==undefined||$scope.userMobile==null||isNaN($scope.userMobile)==true||$scope.userMobile.toString().length<10||$scope.userMobile.toString().length>10){$scope.mobileerror=true;flag=1;}
if(flag==0){$localStorage.carname=$scope.selectedItem;$localStorage.carrto=$scope.selectedItem1;$localStorage.carkitstatus=$scope.carkitstatus;$localStorage.carbreakingexp=$scope.carbreakingexp;$localStorage.carbreaking=$scope.carbreaking;$localStorage.carclaim=$scope.carclaim;$localStorage.carreg=$scope.carreg;$localStorage.entercngkitvalue=$scope.$root.entercngkitvalue;$localStorage.selectedcarmakepop=$scope.selectedcarmakepop;$localStorage.selectedcarrtopop=$scope.selectedcarrtopop;$localStorage.ClaimTaken=$scope.ClaimTaken;$localStorage.carclaimedncb=$scope.carclaimedncb;$localStorage.carrequiredncb=$scope.carrequiredncb;$localStorage.carregnumber=$scope.carregnumber;$localStorage.userMobile=$scope.userMobile;$scope.showbtncarloader=true;if($scope.byreg!=true){$scope.ncblogic();}
else if($scope.carbreakingexp!=1&&$scope.carbreaking!=0){$scope.forcarwidgetpercent=$scope.carclaim;$scope.carclaimedncb=$scope.carclaim.split("~")[1];if($scope.carclaimedncb==0){$scope.carrequiredncb=20;}
else if($scope.carclaimedncb==20){$scope.carrequiredncb=25;}
else if($scope.carclaimedncb==25){$scope.carrequiredncb=35;}
else if($scope.carclaimedncb==35){$scope.carrequiredncb=45;}
else if($scope.carclaimedncb==45){$scope.carrequiredncb=50;}
if($scope.fastlaneresult!=undefined){if($scope.fastlaneresult.ManufactureYear!=$scope.carreg){$scope.Registrationdate=undefined;}}}
if($scope.carbreaking==0&&$scope.carbreakingexp==1){var breaking=91;}
else if($scope.carbreaking==0&&$scope.carbreakingexp==0){var breaking=90;}
else{var breaking=0;}
$mixpanel.track('Form Submitted',{'Product':$scope.products[0].product,"UtmSource":$scope.UtmSource,"ClaimTaken":$scope.ClaimTaken,"ClaimedNCB":$scope.carclaimedncb,"RequiredNCB":$scope.carrequiredncb,"ModelId":$scope.selectedItem.ModelId,"RTOCode":$scope.selectedItem1.RTOCode,"KitValue":$scope.$root.entercngkitvalue,"BreakingDays":breaking,"RegistrationYear":$scope.carreg,"RegistrationDate":$scope.Registrationdate});var data={"userdetails":{"UtmSource":$scope.UtmSource,"UtmCompaign":$scope.utmCompaign,"UtmTerm":$scope.utmTerm,"UtmMedium":$scope.utmMedium,"RegistrationNo":$scope.carregnumber,"VechileDetails":$scope.selectedItem,"CngKitPrice":$scope.$root.entercngkitvalue,"ProductName":"Car","CityList":$scope.selectedItem1,"ClaimPercent":$scope.carclaim,"CngLpgKit":$scope.carkitstatus,"RegYear":$scope.carreg,"EngineNo":$scope.carengineno,"ChasisNo":$scope.carchasisno,"UserName":$scope.username,"UserMobile":$scope.usermobile,"UserEmail":$scope.useremail}};console.log(data);var resultdata=[];resultdata.push(data);var saveRequirementData=CommonService.saveCarRequirementData($scope,globals);var time="3000";var urlservice=globals.ServiceURL+"/QuoteService.svc/web/Save";var ServiceName="QuoteService";$timeout(function(){if($scope.CarSavetime==0){$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[0].product);$scope.CarSavetime=2;}
else{$scope.CarSavetime=0;}},3000);saveRequirementData.then(function(pl){if($scope.CarSavetime==2){var timeoutvar=new Date().getTime();var dvar=(timeoutvar-$scope.timeoutarray['saveservice']);$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[6].product,dvar);}
$scope.CarSavetime=1;$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=JSON.parse(angular.toJson(pl.data.Message));if($scope.IGQuoteId>0){$scope.otpFn(1,productid);}},function(response){ServiceRespnse(response);});}}
$scope.ncblogic=function(){if($scope.carclaim=="No~50"){$scope.showcarncb=true;var ncbyear=$scope.year-$scope.carreg;if(ncbyear>=6){ncbyear=6;$scope.carrequiredncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];}
else{$scope.carrequiredncb=$scope.lastclaimlist[ncbyear].value.split("~")[1];}
$scope.carclaimtext=$scope.lastclaimlist[ncbyear-1].text;$scope.carclaimedncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];}
else if($scope.carclaim=="Yes~0"){$scope.carclaimtext=$scope.lastclaimlist[0].text;$scope.carclaimedncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.showcarncb=false;}
else if($scope.carclaim=="No~20"){$scope.showcarncb=true;$scope.carclaimtext=$scope.lastclaimlist[0].text;$scope.carclaimedncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[1].value.split("~")[1];}
else if($scope.carclaim=="No~25"){$scope.showcarncb=true;$scope.carclaimtext=$scope.lastclaimlist[1].text;$scope.carclaimedncb=$scope.lastclaimlist[1].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[2].value.split("~")[1];}
else if($scope.carclaim=="No~35"){$scope.showcarncb=true;$scope.carclaimtext=$scope.lastclaimlist[2].text;$scope.carclaimedncb=$scope.lastclaimlist[2].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[3].value.split("~")[1];}
else if($scope.carclaim=="No~45"){$scope.showcarncb=true;$scope.carclaimtext=$scope.lastclaimlist[3].text;$scope.carclaimedncb=$scope.lastclaimlist[3].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[4].value.split("~")[1];}
$scope.forcarwidgetpercent=$scope.carclaim;if($scope.forcarwidgetpercent=="Yes~0"&&$scope.carclaim=="No~50"){$scope.forcarwidgetpercent="No~0"}
if($scope.bikeexpiredpol==91||$scope.carbreakingexp==1){$scope.RequiredNCB=0;$scope.ClaimedNCB=0;$scope.ClaimTaken=true;$scope.carclaimedncb=0;}
else{$scope.RequiredNCB=$scope.carrequiredncb;$scope.ClaimedNCB=$scope.carclaimedncb;$scope.ClaimTaken=angular.lowercase($scope.carclaim.split("~")[0].trim())=="no"?"false":"true";}}
$scope.PopulateClaimddl=function(){$scope.popcarregerror=false;$scope.carclaim=undefined;$scope.carclaimtext1=undefined;var d=new Date();var yyyy=d.getFullYear();var nextyy=d.getFullYear()+1;var prevyy=d.getFullYear()-1;var mm=d.getMonth()+1;var dd=d.getDate();var nextdd=d.getDate()+1;if(dd<10){dd='0'+dd}
if(mm<10){mm='0'+mm}
if($scope.byreg==true){if($scope.claimtaken=="No~50"){var ncbyear=$scope.year-$scope.carreg;if(ncbyear>6){ncbyear=6;}
$scope.carclaim=$scope.lastclaimlist[ncbyear-1].value;$scope.carclaimtext=$scope.lastclaimlist[ncbyear-1].text;$scope.forcarwidgetpercent=$scope.carclaim;}
else if($scope.claimtaken=="Yes~0"){$scope.carclaim=$scope.lastclaimlist[0].value;$scope.forcarwidgetpercent=$scope.carclaim;$scope.carclaimtext=$scope.lastclaimlist[0].text;}
else if($scope.claimtaken=="No~20"){$scope.carclaim=$scope.lastclaimlist[0].value;$scope.forcarwidgetpercent=$scope.carclaim;$scope.carclaimtext=$scope.lastclaimlist[0].text;}
else if($scope.claimtaken=="No~25"){$scope.carclaim=$scope.lastclaimlist[1].value;$scope.forcarwidgetpercent=$scope.carclaim;$scope.carclaimtext=$scope.lastclaimlist[1].text;}
else if($scope.claimtaken=="No~35"){$scope.carclaim=$scope.lastclaimlist[2].value;$scope.forcarwidgetpercent=$scope.carclaim;$scope.carclaimtext=$scope.lastclaimlist[2].text;}
else if($scope.claimtaken=="No~45"){$scope.carclaim=$scope.lastclaimlist[3].value;$scope.forcarwidgetpercent=$scope.carclaim;$scope.carclaimtext=$scope.lastclaimlist[3].text;}
if($scope.forcarwidgetpercent=="Yes~0"&&$scope.claimtaken=="No~50"){$scope.forcarwidgetpercent="No~0"}}}
$scope.PopulateNCB=function(){$scope.carclaim=$scope.claimtaken;if($scope.claimtaken==undefined||$scope.claimtaken==''||$scope.claimtaken==null){$scope.regerror=true;}
else{$scope.regerror=false;}}
$scope.checkageerror=function(flag){if($scope.dt==undefined){$scope.ageerror=true;flag=1;$scope.ageerrortext="Enter Age Between 18 - 100";}
else if($scope.dt<18||$scope.dt>100){$scope.ageerror=true;flag=1;$scope.ageerrortext="Age should be between 18 - 100";}
else{$scope.ageerror=false;$scope.ageerrortext=""}}
$scope.checkadulterror=function(flag){if($scope.selectedadult==undefined||$scope.selectedadult==''||parseInt($scope.selectedadult)>2||parseInt($scope.selectedadult)==0){if($scope.selectedadult==undefined){$scope.selectedadult='1';}}
else if($scope.selectedadult==''||parseInt($scope.selectedadult)>2||parseInt($scope.selectedadult)==0){$scope.adulterror=true;flag=1;$scope.adulterrortext="No of Adult 1 or 2";}
else{$scope.adulterror=false;$scope.adulterrortext=""}}
$scope.checkchilderror=function(flag){if($scope.selectedchild==undefined||$scope.selectedchild==''||parseInt($scope.selectedchild)>4){if($scope.selectedchild==undefined){$scope.selectedchild='0';}}
else if($scope.selectedchild==''||parseInt($scope.selectedchild)>4){$scope.childerror=true;flag=1;$scope.childerrortext="No of Child(ren) 0 - 4";}
else{$scope.childerror=false;$scope.childerrortext=""}}
$scope.checkcityerrors=function(flag){$scope.cityerror=false;$scope.citylabel=true;if($scope.selectedItem2==null||$scope.selectedItem2==''||$scope.selectedItem2==undefined){$scope.cityerror=true;flag=1;}
else{$scope.cityerror=false;$scope.formcity=$scope.selectedItem2.cityname;$scope.cityid=$scope.selectedItem2.cityid.split(',')[0].toString();}}
$scope.checkbikertoerror=function(flag){console.log($scope.selectedbikerto);if($scope.selectedbikerto==null||$scope.selectedbikerto==undefined||$scope.selectedbikerto==''){$scope.bikertoerror=true;}
else{$scope.bikertoerror=false;$scope.formbikerto=$scope.selectedbikerto.cityname;}}
$scope.checkbikelisterror=function(flag){console.log($scope.selectedbikemmv);if($scope.selectedbikemmv==null||$scope.selectedbikemmv==''||$scope.selectedbikemmv==undefined){$scope.biketexterror=true;}
else{$scope.biketexterror=false;$scope.formbikewidget=$scope.selectedbikemmv.bikename;}}
$scope.bikeregyear=function(flag){console.log($scope.bikereg);if($scope.bikereg==undefined){$scope.popbikeregerror=true;}
else{$scope.popbikeregerror=false;$scope.formbikereg=$scope.bikereg;var regyeartemp=$scope.regyear1;var temparray=[];var yeargap=$scope.year-$scope.bikereg;for(var i=0;i<=yeargap;i++){if(regyeartemp.length>=i){temparray.push(regyeartemp[i]);}}
$scope.regyear=temparray;$scope.showbikelastclaim=true;if(flag!=1){$scope.bikelastclaim=undefined;}}}
$scope.bikepolicyexp=function(){if($scope.bikeexpiredpol==undefined||$scope.bikeexpiredpol==null){$scope.popbikepolexperror=true;$scope.showbikelastclaim=false;}
else{$scope.popbikepolexperror=false;$scope.formbikelblpolexp=$scope.bikeexpiredpol;if($scope.bikeexpiredpol==0||$scope.bikeexpiredpol==90){$scope.showbikelastclaim=true;}
else{$scope.showbikelastclaim=false;}}}
$scope.bikelastclaimfn=function(){if($scope.bikelastclaim==undefined){$scope.popbikelastclaimerror=true;}
else{$scope.popbikelastclaimerror=false;$scope.formbikewidgetpercent=$scope.bikelastclaim;if($scope.bikelastclaim=="No~50"){var ncbyear=$scope.year-$scope.bikereg;if(ncbyear>6){ncbyear=6;}
$scope.formbikewidgetpercent=$scope.lastclaimlist[ncbyear-1].value;if(ncbyear==6){var nextncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];}
else{var nextncb=$scope.lastclaimlist[ncbyear].value.split("~")[1];}
var ncbclaimtaken="false";}
else if($scope.bikelastclaim=="Yes~0"){$scope.formbikewidgetpercent=$scope.lastclaimlist[0].value;var nextncb=$scope.lastclaimlist[0].value.split("~")[1];var ncbclaimtaken="true";}
else if($scope.bikelastclaim=="No~20"){$scope.formbikewidgetpercent=$scope.lastclaimlist[0].value;var nextncb=$scope.lastclaimlist[1].value.split("~")[1];var ncbclaimtaken="true";}
else if($scope.bikelastclaim=="No~25"){$scope.formbikewidgetpercent=$scope.lastclaimlist[1].value;var nextncb=$scope.lastclaimlist[2].value.split("~")[1];var ncbclaimtaken="true";}
else if($scope.bikelastclaim=="No~35"){$scope.formbikewidgetpercent=$scope.lastclaimlist[2].value;var nextncb=$scope.lastclaimlist[3].value.split("~")[1];var ncbclaimtaken="true";}
else if($scope.bikelastclaim=="No~45"){$scope.formbikewidgetpercent=$scope.lastclaimlist[3].value;var nextncb=$scope.lastclaimlist[4].value.split("~")[1];var ncbclaimtaken="true";}
if($scope.formbikewidgetpercent=="Yes~0"&&$scope.bikelastclaim=="No~50"){$scope.formbikewidgetpercent="No~0"}}}
$scope.getlinkbikepop=function(){$scope.showbikepolicyexpired=true;$scope.$root.popupbikepage=true;$scope.$root.scrollhide="scrollhides";}
$scope.checkgender=function(gen){if(gen==0){$scope.maleclass="lmbutton activebt";$scope.femaleclass="lmbutton";$scope.gender="M";$scope.formgender="M";}
else if(gen==1){$scope.maleclass="lmbutton";$scope.femaleclass="lmbutton  activebt";$scope.gender="F";$scope.formgender="F";}}
$scope.checkmoberror=function(mobile){var moberror=ValidationFactory.mobilevalidate(mobile);if(moberror=="False"){$scope.mobileerror=true;}
else{$scope.mobileerror=false;}}
$scope.checksmoker=function(gen){if(gen==0){$scope.nosmokeclass="lmbutton activebt";$scope.smokeclass="lmbutton";$scope.smoker="no";$scope.formtobacco="False";}
else if(gen==1){$scope.nosmokeclass="lmbutton";$scope.smokeclass="lmbutton activebt";$scope.smoker="yes";$scope.formtobacco="True";}}
$scope.CheckGender=function(gen){if(gen==0){$scope.nosmokeclass="lmbutton activebt";$scope.smokeclass="lmbutton";$scope.smoker="no";$scope.formtobacco="False";}
else if(gen==1){$scope.nosmokeclass="lmbutton";$scope.smokeclass="lmbutton activebt";$scope.smoker="yes";$scope.formtobacco="True";}}
function getQueryStrings(){var assoc={};var decode=function(s){return decodeURIComponent(s.replace(/\+/g," "));};var queryString=location.search.substring(1);var keyValues=queryString.split('&');for(var i in keyValues){var key=keyValues[i].split('=');if(key.length>1){assoc[decode(key[0])]=decode(key[1]);}}
return assoc;}
$scope.AllDestinationlist=function(){var DestinationCountries=CommonService.getCountrylist();DestinationCountries.then(function(data){var TravelDestination=angular.fromJson(data.data);$scope.TravelCountryListtime=1;for(var i=0;i<TravelDestination.length;i++){var temp={destinationId:TravelDestination[i].CountryId,destinationName:TravelDestination[i].Country};$scope.travelDestinations.push(temp);}},function(response){ServiceRespnse(response);});}
$scope.removedestinationvalidationmessage=function(){if($scope.destinationList.length<10){$scope.MaxDestinationError=false;}}
$scope.removeenddatevalidationmessage=function(){$scope.datedifferror=false;if($scope.travelEndDate!=undefined){$scope.enddateError=false;}
else{$scope.enddateError=true;}}
$scope.checkDestinationerror=function(flag){if(($scope.selectedDestinationItem==null||$scope.selectedDestinationItem==undefined||$scope.selectedDestinationItem=='')&&flag!=1){if($scope.destinationList.length==0){$scope.DestinationError=true;$scope.MaxDestinationError=false;}}
else if($scope.destinationList.length>=10){$scope.MaxDestinationError=true;}
else{$scope.DestinationError=false;$scope.MaxDestinationError=false;for(var i=0;i<$scope.destinationList.length;i++){if(flag==1)
$scope.selectedDestinationItem=$scope.destinationList[i];if($scope.destinationList[i].text==$scope.selectedDestinationItem.destinationName){$scope.bool=true;}}
if($scope.bool==false){$scope.chipvalue=true;if(flag!=1)
$scope.destinationList.push({text:$scope.selectedDestinationItem.destinationName,value:$scope.selectedDestinationItem.destinationId,done:false});}
else{$scope.bool=false;}
if($scope.destinationList.length>0){$scope.showchips=true;}
else{$scope.showchips=false;}
$scope.selectedDestinationItem=null;$scope.searchDestination='';}}
$scope.checkNoOfTravellerError=function(flag){$scope.TotalMembers=[];if($scope.selectedTravellers==undefined||$scope.selectedTravellers<1||$scope.selectedTravellers==null||$scope.selectedTravellers>6){$scope.travellerError=true;flag=1;$scope.travellerErrortext="Enter No of Travellers 1 to 6";}
else{$scope.travellerError=false;$scope.travellerErrortext="";for(var i=1;i<=$scope.selectedTravellers;i++){$scope.TotalMembers.push({id:i});}}}
$scope.removeMember=function(memberid){if(parseInt($scope.selectedTravellers)==1){$scope.memrequire=true;$scope.ageError=false;}
else{$scope.memrequire=false;var val=$filter('filter')($scope.TotalMembers,function(d){return d.id==memberid});var idx=$scope.TotalMembers.indexOf(val[0]);if(idx>-1){$scope.selectedTravellers=parseInt($scope.selectedTravellers)-1;$scope.dataValue.splice(idx+1,1);$scope.TotalMembers.splice($scope.selectedTravellers,1);for(i=1;i<=$scope.selectedTravellers;i++){if($scope.dataValue[i]==undefined||$scope.dataValue[i]==""){$scope.ageError=true;}
else{$scope.ageError=false;}}}}}
$scope.showsecondpopup=function(){if(validatecontrolsoncontinue()){$scope.travelProceedBtnLoader=true;$scope.showbtntravelloader=false;$scope.$root.travelfirstpop=false;$scope.$root.travelsecondpop=true;$scope.travelpopFirst="display-none";$scope.travelpopSecond="display-visible";$mixpanel.track('Travel first form submitted');$location.search("TravellerAge");}}
$scope.showfirstpopup=function(){$scope.$root.travelfirstpop=true;$scope.$root.travelsecondpop=false;$scope.ageError=false;}
$scope.addMember=function(){$scope.selectedTravellers=parseInt($scope.selectedTravellers)+1;$scope.TotalMembers.push({id:$scope.selectedTravellers});$scope.dataValue[$scope.selectedTravellers]="";}
$scope.gettravelquotespop=function(){validatecontrols();}
$scope.checktravelageerror=function(age){if(age==undefined||age==""||age==null){$scope.ageError=true;$scope.memrequire=false;}
else{$scope.ageError=false;}}
function validatecontrolsoncontinue(){$scope.formtraveldestinations=undefined;$scope.formtravelstartdate=undefined;$scope.datedifferror=false;$scope.formtravelenddate=undefined;if($scope.userMobile==undefined||$scope.userMobile==null||isNaN($scope.userMobile)==true||$scope.userMobile.toString().length<10||$scope.userMobile.toString().length>10){$scope.mobileerror=true;}
if($scope.destinationList.length==0){$scope.DestinationError=true;}
else{$scope.MaxDestinationError=false;for(i=0;i<$scope.destinationList.length;i++){if($scope.formtraveldestinations==undefined){$scope.formtraveldestinations=$scope.destinationList[i].value;$scope.formtraveldestinationsName=$scope.destinationList[i].text;}
else{$scope.formtraveldestinations=$scope.formtraveldestinations+','+$scope.destinationList[i].value;$scope.formtraveldestinationsName=$scope.formtraveldestinationsName+', '+$scope.destinationList[i].text;}}}
if($scope.travelStartDate==undefined||$scope.travelStartDate==""){$scope.startdateError=true;}
else{$scope.startdateError=false;}
if($scope.travelEndDate==undefined||$scope.travelEndDate==""){$scope.enddateError=true;}
else if(new Date($scope.travelStartDate)>new Date($scope.travelEndDate)){$scope.datedifferror=true;$scope.enddateError=false;}
else{$scope.enddateError=false;$scope.formtravelstartdate=$scope.travelStartDate;$scope.formtravelenddate=$scope.travelEndDate;}
if($scope.selectedTravellers==undefined||$scope.selectedTravellers<1||$scope.selectedTravellers>6||parseInt($scope.selectedTravellers)==0){$scope.travellerError=true;$scope.travellerErrortext="Enter No of Travellers 1 to 6";}
if($scope.DestinationError==true||$scope.travellerError==true||$scope.enddateError==true||$scope.startdateError==true||$scope.mobileerror==true||$scope.selectedTravellers==undefined||(new Date($scope.travelStartDate)>new Date($scope.travelEndDate))||$scope.travelEndDate==undefined||$scope.travelStartDate==undefined){return false;}
else{return true;}}
function validatecontrols(){if(validatecontrolsoncontinue()){$scope.wrongotpmsgshow=false;$scope.userOTP=undefined;var productid=1;$scope.formtravellerages=undefined;for(i=1;i<=$scope.selectedTravellers;i++){if($scope.dataValue[i]==undefined||$scope.dataValue[i]==""){$scope.ageError=true;return false;}
else{$scope.ageError=false;if($scope.formtravellerages==undefined){$scope.formtravellerages=$scope.dataValue[i];}
else{$scope.formtravellerages=$scope.formtravellerages+','+$scope.dataValue[i];}}}
$scope.showbtntravelloader=true;var currentPage=$location.absUrl();$scope.utm_source="";$scope.utm_campaign="";$scope.utm_term="";$scope.utm_medium="";if(currentPage.indexOf("utm_source")!=-1){$scope.utm_source=currentPage.slice(currentPage.indexOf("utm_source=")+11).split("&")[0];}
if(currentPage.indexOf("utm_campaign")!=-1){$scope.utm_campaign=currentPage.slice(currentPage.indexOf("utm_campaign=")+13).split("&")[0];}
if(currentPage.indexOf("utm_term")!=-1){$scope.utm_term=currentPage.slice(currentPage.indexOf("utm_term=")+9).split("&")[0];}
if(currentPage.indexOf("utm_medium")!=-1){$scope.utm_medium=currentPage.slice(currentPage.indexOf("utm_medium=")+11).split("&")[0];}
$scope.selectedtravelerDOBArray=[];$mixpanel.track('Form Submitted',{'Product':$scope.products[7].product,"UtmSource":$scope.utm_source,"DOBs":$scope.DOBArray,"Destinations":$scope.formtraveldestinations.toString().split(","),"EndDate":$scope.formtravelenddate,"StartDate":$scope.formtravelstartdate});var data={"userdetails":{"Destination":$scope.formtraveldestinations,"DestinationName":$scope.formtraveldestinationsName,"StartDate":$scope.formtravelstartdate,"EndDate":$scope.formtravelenddate,"TravellerAges":$scope.formtravellerages,"Product":"Travel","Username":$scope.username,"Usermobile":$scope.usermobile,"Useremail":$scope.useremail,"UtmSource":$scope.utm_source,"UtmCampaign":$scope.utm_campaign,"UtmTerm":$scope.utm_term,"UtmMedium":$scope.utm_medium}};$scope.selectedtravelerAgeArray=$scope.formtravellerages.toString().split(',');for(i=0;i<$scope.selectedtravelerAgeArray.length;i++){var d=new Date();var dobs=d.setFullYear(d.getFullYear()-parseInt($scope.selectedtravelerAgeArray[i]));$scope.selectedtravelerDOBArray.push(dobs);}
$scope.DOBArray=DataFactory.stringifyallDobs($scope.selectedtravelerDOBArray);$localStorage.destinationList=$scope.destinationList;$localStorage.selectedDestinationItem=$scope.selectedDestinationItem;$localStorage.travelStartDate=$scope.travelStartDate;$localStorage.travelEndDate=$scope.travelEndDate;$localStorage.selectedTravellers=$scope.selectedTravellers;$localStorage.userMobile=$scope.userMobile;$localStorage.dataValue=$scope.dataValue;$localStorage.DOBArray=$scope.DOBArray;$localStorage.formtraveldestinations=$scope.formtraveldestinations;$localStorage.formtravelenddate=$scope.formtravelenddate;$localStorage.formtravelstartdate=$scope.formtravelstartdate;var saveRequirementData=CommonService.saveTravelRequirementData($scope,globals);var time="3000";var urlservice=globals.ServiceURL+"/QuoteService.svc/web/Save";var ServiceName="QuoteService";$timeout(function(){if($scope.TravelSavetime==0){$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[7].product);$scope.TravelSavetime=2;}
else{$scope.TravelSavetime=0;}},3000);saveRequirementData.then(function(pl){if($scope.TravelSavetime==2){var timeoutvar=new Date().getTime();var dvar=(timeoutvar-$scope.timeoutarray['saveservice']);$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[6].product,dvar);}
$scope.TravelSavetime=1;$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=JSON.parse(angular.toJson(pl.data.Message));if($scope.IGQuoteId>0){$scope.otpFn(1,productid);}},function(response){ServiceRespnse(response);});return true;}}
$scope.gettermquotes=function(id){$scope.wrongotpmsgshow=false;$scope.userOTP=undefined;var flag=1;var productid=3;if(id==9){$scope.termshow=false;productid=9;$scope.criticalshow=true;}
else{$scope.criticalshow=false;$scope.termshow=true;}
var datemessage=ValidationFactory.onlynumber($scope.IGdate);var monthmessage=ValidationFactory.onlynumber($scope.IGmonth);var yearmessage=ValidationFactory.onlynumber($scope.IGyear);if($scope.selectedItem2==null){flag=0;$scope.cityerror=true;}
else{$scope.cityerror=false;}
if($scope.txtActualIncome==null||$scope.txtActualIncome==NaN||$scope.txtActualIncome.ActualIncomeValue==null||$scope.txtActualIncome.ActualIncomeValue==undefined||$scope.txtActualIncome.ActualIncomeValue==""){flag=0;$scope.annualerror=true;}
else if($scope.annualerror==true||$scope.dotmessage==true){flag=0;}
else{$scope.incomeerror=false;$scope.annualerror=false;}
if($scope.formdob==undefined||$scope.IGdate==undefined||$scope.IGmonth==undefined||$scope.IGyear==undefined||datemessage=="False"||monthmessage=="False"||yearmessage=="False"){flag=0;$scope.dateerror=true;}
if($scope.userMobile==undefined||$scope.userMobile==null||isNaN($scope.userMobile)==true||$scope.userMobile.toString().length<10||$scope.userMobile.toString().length>10){$scope.mobileerror=true;flag=0;}
if(flag==1){$scope.showbtntermloader=true;$localStorage.maleclass=$scope.maleclass;$localStorage.femaleclass=$scope.femaleclass;$localStorage.gender=$scope.gender;$localStorage.nosmokeclass=$scope.nosmokeclass;$localStorage.smokeclass=$scope.smokeclass;$localStorage.smoker=$scope.smoker;$localStorage.formtobacco=$scope.formtobacco;$localStorage.txtActualIncome=$scope.txtActualIncome;$scope.formdob=$scope.IGdate+'-'+$scope.IGmonth+'-'+$scope.IGyear;$localStorage.selectedItem2=$scope.selectedItem2;$localStorage.selectedtermincomepop=$scope.selectedtermincomepop;$localStorage.selectedcitynampop=$scope.selectedcitynampop;$localStorage.formdob=$scope.formdob;$localStorage.IGdate=$scope.IGdate;$localStorage.IGmonth=$scope.IGmonth;$localStorage.IGyear=$scope.IGyear;$localStorage.userMobile=$scope.userMobile;$scope.dateofbirth=$scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear;$scope.CityID=$scope.selectedItem2.cityid.split(",")[0];$mixpanel.track('Form Submitted',{'Product':$scope.products[3].product,"UtmSource":$scope.utm_source,"AnnualIncomeRange":$scope.txtActualIncome.ActualIncomeValue,"CityID":parseInt(($scope.selectedItem2.cityid.split(',')[0]).trim()),"DateOfBirth":$scope.formdob,"Gender":$scope.gender,"IsTobacco":$scope.formtobacco.toLowerCase(),"SumAssured":$scope.SumAssured});$scope.$root.scrollhide="whitebg";var userincomeinlacs=parseFloat(($scope.txtActualIncome.ActualIncomeValue/100000).toFixed(0)*100000);if(userincomeinlacs>2500000){$scope.SumAssured=50000000;}
else{$scope.AgeInYears=$scope.age;if($scope.AgeInYears<=39){$scope.SumAssured=userincomeinlacs*20;}
else if($scope.AgeInYears>=40&&$scope.AgeInYears<=50){$scope.SumAssured=userincomeinlacs*15;}
else if($scope.AgeInYears>=51&&$scope.AgeInYears<=55){$scope.SumAssured=userincomeinlacs*10;}
else{$scope.SumAssured=userincomeinlacs*5;}}
var data={"userdetails":{"gender":$scope.gender,"istobacco":$scope.formtobacco,"productname":"Term","city":$scope.selectedItem2,"dateofbirth":$scope.dateofbirth,"actualincome":$scope.txtActualIncome.ActualIncomeValue,"incomerange":$scope.minincome+'-'+$scope.maxincome+' lacs',"PayingMode":'Yearly',"SelectedRiders":"","PolicyTerm":0,"userMaxAnnualIncomeRange":$scope.maxincome,"userMinAnnualIncomeRange":$scope.minincome,"Username":$scope.username,"Usermobile":$scope.usermobile,"Useremail":$scope.useremail}};if($scope.criticalshow==true){$mixpanel.track('Form Submitted',{'Product':"Critical Illeness","UtmSource":$scope.utm_source,"AnnualIncomeRange":$scope.txtActualIncome.ActualIncomeValue,"CityID":parseInt(($scope.selectedItem2.cityid.split(',')[0]).trim()),"DateOfBirth":$scope.formdob,"Gender":$scope.gender,"IsTobacco":$scope.formtobacco.toLowerCase(),"SumAssured":$scope.SumAssured});var saveRequirementData=CommonService.saveCriticalRequirementData($scope,globals);var time="3000";var urlservice=globals.ServiceURL+"/QuoteService.svc/web/Save";var ServiceName="QuoteService";$timeout(function(){if($scope.TermSavetime==0){$scope.TimeOutService(time,urlservice,ServiceName,"Critical Illeness");}
else{$scope.TermSavetime=0;}},3000);saveRequirementData.then(function(pl){$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=JSON.parse(angular.toJson(pl.data.Message));$scope.TermSavetime=1;if($scope.IGQuoteId>0){if($scope.IGQuoteId>0){$scope.otpFn(1,9);}}},function(response){ServiceRespnse(response);});}
else if($scope.termshow==true){$mixpanel.track('Form Submitted',{'Product':$scope.products[3].product,"UtmSource":$scope.utm_source,"AnnualIncomeRange":$scope.txtActualIncome.ActualIncomeValue,"CityID":parseInt(($scope.selectedItem2.cityid.split(',')[0]).trim()),"DateOfBirth":$scope.formdob,"Gender":$scope.gender,"IsTobacco":$scope.formtobacco.toLowerCase(),"SumAssured":$scope.SumAssured});var data={"userdetails":{"gender":$scope.gender,"istobacco":$scope.formtobacco,"productname":"Term","city":$scope.selectedItem2,"dateofbirth":$scope.dateofbirth,"actualincome":$scope.txtActualIncome.ActualIncomeValue,"incomerange":$scope.minincome+'-'+$scope.maxincome+' lacs',"PayingMode":'Yearly',"SelectedRiders":"","PolicyTerm":0,"userMaxAnnualIncomeRange":$scope.maxincome,"userMinAnnualIncomeRange":$scope.minincome,"Username":$scope.username,"Usermobile":$scope.usermobile,"Useremail":$scope.useremail}};var saveRequirementData=CommonService.saveTermRequirementData($scope,globals);var time="3000";var urlservice=globals.ServiceURL+"/QuoteService.svc/web/Save";var ServiceName="QuoteService";$timeout(function(){if($scope.TermSavetime==0){$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[3].product);}
else{$scope.TermSavetime=0;}},3000);saveRequirementData.then(function(pl){if($scope.TermSavetime==2){var timeoutvar=new Date().getTime();var dvar=(timeoutvar-$scope.timeoutarray['saveservice']);$scope.TimeOutService(time,urlservice,ServiceName,$scope.products[6].product,dvar);}
$scope.TermSavetime=1;$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));$scope.leadCreationExceedMsg=JSON.parse(angular.toJson(pl.data.Message));$scope.TermSavetime=1;if($scope.IGQuoteId>0){$scope.otpFn(1,productid);}
else{$scope.showbtntermloader=false;}},function(response){ServiceRespnse(response);});}}}
$scope.validatedot=function(value){$scope=TermFactory.calculateSumAssuredRange($scope,value);}
$scope.products=[{product:"Car",id:"4"},{product:"Twowheeler",id:"8"},{product:"Health",id:"2"},{product:"Term",id:"3"},{product:"Critical Illness",id:"9"},{product:"Child",id:"7"},{product:"Investment",id:"5"},{product:"Pension",id:"6"}];$scope.closebeenHerePop=function(){$scope.$root.beenHerePopUpAnimation="out fadeOutDownBig";$scope.$root.scrollhide="";$scope.$root.beenHerePopUp=false;$scope.showbeenhere=true;$location.search("Searches",null);window.history.back();$location.search("BeenHerePop",null);window.history.back();}
$scope.closemobilepopup1=function(item,product,type){$scope.popupformob=false;$scope.txtcarvariant=item.ModelName
$scope.selectedItem=item;}
$scope.updateincome=function(){TermFactory.userActualIncome($scope);}
$scope.leadredirection=function(item){$mixpanel.track('Previous Search',{"CPID":item.IGQuoteId});var revisitflag=CommonService.revisit($scope,globals,item.IGQuoteId);revisitflag.then(function(data){$window.location.href=globals.RedirectURL+"/?CPID="+btoa(item.IGQuoteId)});}
$scope.JourneyDate=function(event){var allowedRegex=/[0-9\/]/g;if(!event.key.match(allowedRegex)){event.preventDefault();}}
$scope.UpdateMobileNo=function(flag){if(flag==1){$scope.showotpbox=false;$rootScope.travelsecondpop=false;$rootScope.travelfirstpop=true;window.history.back();window.history.back();}
else{$scope.showbtnleadloader=false;$scope.showbtncarloader=false;$scope.showotpbox=false;$scope.carpopup=true;$scope.healthfirstpop=true;$scope.pensionpopup=true;$scope.investpopup=true;$scope.childpopup=true;window.history.back();}}
$scope.submitleadform=function(flag,productId){if($scope.userOTP0!=undefined&&$scope.userOTP1!=undefined&&$scope.userOTP2!=undefined&&$scope.userOTP3!=undefined){$scope.userOTP=$scope.userOTP0.toString()+$scope.userOTP1.toString()+$scope.userOTP2.toString()+$scope.userOTP3.toString();$scope.wrongotpmsgshow=false;}
else{$scope.wrongotpmsgshow=true;}
if($scope.userOTP==undefined||$scope.userOTP==""||$scope.userOTP==null){$scope.wrongotpmsgshow=true;$scope.wrongotpmsg="Enter Correct OTP";}
else{$scope.wrongotpmsgshow=false;$scope.showbtnleadloader=true;$scope.leadcreationfn7(productId);}}
$scope.header=function(flag){$mixpanel.track('Header Links',{"Property":flag});};$scope.getIndex=function(flag){$mixpanel.track('IG Logo');$window.location.href=globals.landingPage;};$scope.showSimpleToast=function(){$mdToast.show($mdToast.simple().textContent($scope.showText).position('top right').hideDelay(5000));};$scope.closemobilepopup=function(item,product,type){if(product=='car'&&type=='city'){$scope.carcitydropdown=false;$scope.txtCarcity=item.RTOCode;$scope.selectedItem1=item;}
else if(product=='car'&&type=='variant'){$scope.popupformob=false;$scope.txtcarvariant=item.ModelName
$scope.selectedItem=item;}
else if(product=='term'&&type=='city'){$scope.txtCityStateForTerm=true;$scope.termcitystate=false;$scope.txtCityStateTerm=item.cityname;$scope.selectedItem2=item;}
else if(product=='health'&&type=='city'){$scope.healthcitystate=false;$scope.txtCityStateForHealth=true;$scope.txtCityStateHealth=item.cityname;$scope.selectedItem2=item;}
else if(product=='bike'&&type=='bikerto'){$scope.ngBikeRto=true;$scope.ngbikerto=false;$scope.txtbikerto=item.cityname;$scope.selectedbikerto=item;}
else if(product=='bike'&&type=='biketype'){$scope.ngbiketype=true;$scope.ngddlbiketype=false;$scope.txtbiketype=item.bikename;$scope.selectedbikemmv=item;}}
function ServiceRespnse(errorRes){console.log(errorRes);}
$scope.encryptedData=function(value){if(value){const encrypted=CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(value+globals.staticKey),CryptoJS.enc.Utf8.parse(globals.encryptionKey),{keySize:128/8,iv:CryptoJS.enc.Utf8.parse(globals.encryptionIv),mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});return encrypted.toString();}}
$scope.complaintValidation=function(id){if(id=='name'){if(!$scope.customerName){$scope.nameError=true;$scope.nameErrorMessage="Name is required."}
else if(ValidationFactory.namevalidate($scope.customerName)=="False"){$scope.nameError=true;$scope.nameErrorMessage="Please enter correct name."}
else{$scope.nameError=false;}
return $scope.nameError;}
else if(id=='email'){if(!$scope.customerEmail){$scope.emailError=true;$scope.emailErrorMessage="Email Id is required."}
else if(ValidationFactory.emailvalidate($scope.customerEmail)=="False"){$scope.emailError=true;$scope.emailErrorMessage="Please enter correct email id."}
else{$scope.emailError=false;}
return $scope.emailError;}
else if(id=="mobile"){if(!$scope.customerNumber){$scope.mobileError=true;$scope.mobileErrorMessage="Mobile No. is required."}
else if($scope.customerNumber.length<10){$scope.mobileError=true;$scope.mobileErrorMessage="Mobile No. must be 10 digit."}
else if(ValidationFactory.mobilevalidate($scope.customerNumber)=="False"){$scope.mobileError=true;$scope.mobileErrorMessage="Please enter valid mobile no."}
else{$scope.mobileError=false;}
return $scope.mobileError;}
else if(id=="product"){if(!$scope.customerProduct){$scope.productError=true;$scope.productErrorMessage="Product name is required."}
else{$scope.productError=false;}
return $scope.productError;}
else if(id=="issuetype"){if(!$scope.typeofissue){$scope.issueError=true;$scope.issueErrorMessage="Type of issue is required."}
else{if($scope.typeofissue=='Policy Related issue'||$scope.typeofissue=='Payment Issue'){$scope.isPolicyNo=true;$scope.isInsurer=true;}
else{$scope.isPolicyNo=false;$scope.isInsurer=false;}
$scope.issueError=false;}
return $scope.issueError;}
else if(id=="insurer"){if(!$scope.insurer){$scope.insurerError=true;$scope.insurerErrorMessage="Please select insurer";}
else{$scope.insurerError=false;}
return $scope.insurerError;}
else if(id=="policyno"){if(!$scope.policyNo){$scope.policyError=true;$scope.policyErrorMessage="Policy No. is required."}
else{$scope.policyError=false;}
return $scope.policyError;}
else if(id=="description"){if(!$scope.description){$scope.decrError=true;$scope.decrErrorMessage="Please enter correct description."}
else if($scope.description.length<10){$scope.decrError=true;$scope.decrErrorMessage="Description length must be greater than 10 characters";}
else{$scope.decrError=false;}
return $scope.decrError;}}
$scope.submitComplaint=function(){$scope.successmsg=false;$scope.id="";$scope.errormsg="All fiels are mandatory";var flag=0;if($scope.complaintValidation('name')){flag=1;}
if($scope.complaintValidation('email')){flag=1;}
if($scope.complaintValidation('mobile')){flag=1;}
if($scope.complaintValidation('product')){flag=1;}
if($scope.complaintValidation('issuetype')){flag=1;}
if($scope.complaintValidation('insurer')&&$scope.isInsurer){flag=1;}
if($scope.complaintValidation('policyno')&&$scope.isPolicyNo){flag=1;}
if($scope.complaintValidation('description')){flag=1;}
if(flag==0){$scope.complainBtnLoader=true;$scope.disabledBtn=true;$scope.id="";$scope.lodgeaclaim=CommonService.RegistrationComplain($scope);$scope.lodgeaclaim.then(function(result){if(result.data.Status){$scope.claimBtnLoader=true;console.log(result);$scope.complainBtnLoader=false;$scope.successmsg=true;$scope.id=result.data.ReferenceId;;$scope.disabledBtn=false;$scope.customerName="";$scope.customerEmail="";$scope.customerNumber="";$scope.insurer="";$scope.typeofissue="";$scope.description="";$scope.policyNo="";$scope.customerProduct="";$scope.error=false;}
else{$scope.errormsg=result.data.Message;$scope.error=true;}},function(reject){$scope.errormsg="Some internal issues....";$scope.error=true;$scope.complainBtnLoader=false;});}}
$scope.openLife=function(){$window.location.href="/life-insurance";};$scope.getInsurer=function(productid){var data=JSON.stringify({"InsurerData":{"User":{"username":"IGHEALTH2016","password":"IG@HEALTH@2016","vendorid":"2018","pid":"2","productid":productid}}});$scope.insuranceCompaniesData=CommonService.insurancecompanies(data);$scope.insuranceCompaniesData.then(function(result){result.data=angular.fromJson(result.data);console.log(result);$scope.insuranceCompanies=result.data.DocumentElement.GetCareerData;});}
$scope.getInsurerByProduct=function(productid){$scope.insuranceCompanies=[];$scope.insurer="";var data={"ProductId":productid};$scope.insuranceCompaniesData=CommonService.insurancecompaniesbyproduct(data);$scope.insuranceCompaniesData.then(function(result){result.data=angular.fromJson(result.data);let insurer=result.data;for(let i=0;i<insurer.length;i++){insurer[i].Insurer_Name=insurer[i].InsurerName;insurer[i].Insurer_ID=insurer[i].InsurerId;$scope.insuranceCompanies.push(insurer[i]);}});}}]);