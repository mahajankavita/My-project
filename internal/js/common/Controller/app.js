var app=angular.module('App',['ngMaterial','ngAnimate','daterangepicker','analytics.mixpanel']);app.constant('globals',{api:'Pankaj',fershDeskURL:'https://insurejoy.freshdesk.com/helpdesk/tickets.json',RedirectURL:"https://qa.indiacover360.com/Application/",ServiceURL:"https://apiqa.indiacover360.com",IGwServiceURL:"https://apiqa.indiacover360.com",UIURL:"https://qa.indiacover360.com/HomePage",landingPage:"https://qa.indiacover360.com",mainPage:"https://qa.indiacover360.com/Application/?CPID=",encryptionKey:'9080706050403020',encryptionIv:'1020304080706050',staticKey:'IG006072021'});app.run(function($window,$rootScope){$rootScope.online=navigator.onLine;$window.addEventListener("offline",function(){$rootScope.$apply(function(){$rootScope.online=false;});},false);});angular.module('analytics.mixpanel').config(['$mixpanelProvider',function($mixpanelProvider){$mixpanelProvider.apiKey('33e718373fc7bd0a232caf1f745fa69e');}]);app.controller('MainController',["$scope","$rootScope","$mdToast","globals","$http","CommonService","DataFactory","$document","$location","$timeout","$window","TermFactory","$filter","$mixpanel","ValidationFactory","$sce",function($scope,$rootScope,$mdToast,globals,$http,CommonService,DataFactory,$document,$location,$timeout,$window,TermFactory,$filter,$mixpanel,ValidationFactory,$sce){var preprodnewepwservices='https://preprodnewepwservices.insurejoy.com';$scope.UtmSource="";$scope.carbreakingexp=0;var QuotePageURL=globals.RedirectURL;$scope.$root.showmainloader=false;$scope.$root.scrollhide="home-bg bodymain";$scope.utmsourcedata="organic";$scope.utmcampaigndata="Product Page";$scope.utmCompaign="";$scope.$root.showonproposal=false;$scope.cityplaceholder="Loading Cities..";$scope.carpolicyexpdropdown=true;$scope.disablecity=true;$scope.showfastlaneclaimlast=true;$scope.appinitializedata=0;$scope.$root.mastercontent=false;$scope.$root.productBox="display-visible";$scope.$root.popupbikepage=false;$scope.utmTerm="";$scope.utmMedium="";$scope.$root.showloader=true;$scope.date=new Date();$scope.texttitleindex=0;$scope.MainAnincome_1=true;$scope.year=$scope.date.getFullYear();$scope.carregno=true;$scope.showmobileheader=true;$scope.bikeNo={};$scope.showmainform=false;$scope.$root.closepop=false;$scope.$root.backpop=false;$scope.$root.travelsecondpop=false;$scope.$root.showTopHeading=true;$scope.$root.showLogos=true;$scope.$root.CheckForNewQuotes=true;$scope.$root.travelfirstpop=true;$scope.commoncitystate1=[];$scope.carformfastlane="wow slideInRight";$scope.carformfastlane="wow slideInRight";$scope.termIncome=[{value:100000,text:"Below 3 lacs"},{value:300000,text:"3-4 lacs"},{value:400000,text:"4-7 lacs"},{value:700000,text:"7-10 lacs"},{value:1000000,text:"10-15 lacs"},{value:1500000,text:"15 and above"}];$scope.income=[{value:300000,text:"Below 3 lacs"},{value:400000,text:"3-4 lacs"},{value:700000,text:"4-7 lacs"},{value:1000000,text:"7-10 lacs"},{value:1500000,text:"10-15 lacs"},{value:2000000,text:"15 and above"}];$scope.investincome=[{value:"M",text:"Monthly"},{value:"Y",text:"Yearly"}];$scope.selectedincome=$scope.investincome[1].value;$scope.payMode=$scope.investincome[1].value;$scope.childincome=[{value:10000,text:"Below 3 lacs"},{value:20000,text:"3-4 lacs"},{value:50000,text:"4-7 lacs"},{value:75000,text:"7-10 lacs"},{value:100000,text:"10 Lacs and Above"}];$scope.carpoppetrol=[{value:"Kit1",text:"Don't have CNG/LPG Kit"},{value:"Kit2",text:"Have Company Fitted"},{value:"Kit3",text:"Have Externally Fitted"}];$scope.carpopcng=[{value:"Kit2",text:"Have Company Fitted"},{value:"Kit3",text:"Have Externally Fitted"}];$scope.carpoplpg=[{value:"Kit2",text:"Have Company Fitted"},{value:"Kit3",text:"Have Externally Fitted"}];$scope.bikeexpired=[{value:0,text:"Not Yet Expired"},{value:90,text:"In last 90 days"},{value:91,text:"Before 90 days"}];$scope.citylists=[{id:1,cityname:"Delhi"},{id:2,cityname:"Jaipur"}];$scope.maleclass="landing-malebutton active-gender";$scope.femaleclass="landing-femalebutton";$scope.nosmokeclass="landing-nonsmokerbutton active-smoker";$scope.smokeclass="landing-smokerbutton";$scope.formbikeproduct="Bike";$scope.bikeexpiredpol=0;$scope.chatagentname=["Himanshu","Tabish","Neeraj"];$scope.message='false';$scope.gender="";$scope.showbikelastclaim=false;$scope.message='false';$scope.showrtofield=true;$scope.maincarpage=true;$scope.nClaim='';$scope.$root.popupcarpage=false;$scope.Year_Of_manufacturer='';$scope.result=[];$scope.result[2015]=0;$scope.result[2014]=20;$scope.result[2013]=25;$scope.result[2012]=35;$scope.result[2011]=45;$scope.result[2010]=50;$scope.message='false';$scope.bodyscroll="";$scope.showrtocity=false;$scope.carlabel=false;$scope.citylabel=false;$scope.carNo={};$scope.carNo.carRegNo='';$scope.selectedchild='0';$scope.selectedadult='1';$scope.tab=1;$scope.mainform_animation="to-animate intro-animate-66";$scope.$root.popuptravelpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popupchildpage=false;$scope.$root.popuptermpage=false;$scope.$root.popuphealthpage=false;$scope.$root.popupcarpage=false;$scope.carbreaking=1;$scope.healthfirstpop=true;$scope.bikefirstpop=true;$scope.termfirstpop=true;$scope.childfirstpop=true;$scope.investfirstpop=true;$scope.pensionfirstpop=true;$scope.healthformproname="Health";$scope.formgender="M";$scope.pensionformproname="Pension";$scope.investmentformproname="Investment";$scope.childformproname="Investment";$scope.formtobacco="";$scope.formmarital="Married";$scope.termproductname="Term";$scope.formpolicyterm=50;$scope.showheader=true;$scope.formproposer="abc@ig.com";$scope.forcarproduct="Car";$scope.carfuelcontainer=false;$scope.formddlkit="Kit0";$scope.formcarbtn="Get Live Quotes";$scope.ncbdisabled=true;$scope.bikemodellist=[];$scope.chatflag="car";$scope.messages=[];$scope.messages[0]={Id:1,msg:"Hi, there! What type of plan you are looking for?"};$scope.showplan=true;$scope.chatmainclass="chatbot-box-hidden";$scope.showchat1=false;$scope.clientmsgid=1001;$scope.automsgid=2;$scope.carflag=false;$scope.editpopup=false;$scope.chatageflag=false;$scope.chatchildageflag=false;$scope.prefilledcarflag=false;$scope.carpopup=false;$scope.carmaindetails=true;$scope.bikepopup=false;$scope.bikemaindetails=true;$scope.showQuotesButton=true;$scope.destinationList=[];$scope.bool=false;$scope.comparebuypop=false;$scope.ShowAgeSection=false;$scope.TotalMembers=[];$scope.dataValue=[];$scope.travelDestinations=[];$scope.DestinationError=false;$scope.todayDate=new Date();$scope.previousSearchShow=false;$scope.travelStartDate=$scope.todayDate;$scope.IsBeenHereBefore=false;$scope.DownloadApp=false;$scope.thanksMobilelink=false;$scope.ChildDetails=[];$scope.IsNewRequestFlag=0;$scope.txtCityStateForTerm=true;$scope.txtCityStateForHealth=true;$scope.ngCarcity=true;$scope.ngBikeRto=true;$scope.ngbiketype=true;$scope.showrtiomobile=true;$scope.showrtocity=true;if(window.innerWidth>=850){$scope.device="Desktop";}
else{$scope.device="Mobile";}
$scope.carquotesleadrequest=ValidationFactory.GetEncryptedString();$scope.leadcreaterequestdata=ValidationFactory.GetLeadCreationEncryptedString();$scope.otpcreaterequestdata=ValidationFactory.GetOTPString1();$scope.openmaintabform="in fadeInUp";$scope.Anincome_1=false;$scope.Anincome_2=false;$scope.Anincome_3=false;$scope.gender_div=false;$scope.tobacco_div=false;$scope.dob_div=false;$scope.pincode_div=false;$scope.mobile_div=false;$scope.anula_inc=0;$scope.form_age=0;$scope.form_gender='M';$scope_form_smoker='no';$scope.PrevoiusPopUpAnimation="";$scope.showPrevoiusPop=function(){$scope.$root.scrollhide="scrollhides";$scope.PrevoiusPop=true;if(($scope.PrevoiusPopUpAnimation=="out fadeOutDownBig")||($scope.PrevoiusPopUpAnimation=="")||($scope.PrevoiusPopShow=="bounceOut bounceOutLeft")){$scope.PrevoiusPopUp=true;$scope.PrevoiusPopUpAnimation="in fadeInUp";$scope.PrevoiusPopShow="in fadeInUp";}
else{$scope.PrevoiusPopUpAnimation="out fadeOutDownBig";}}
$scope.closePrevoiusPopUp=function(){$scope.PrevoiusPopUpAnimation="out fadeOutDownBig";$scope.$root.scrollhide="";}
$scope.checktermincomeerror=function(){if($scope.txtActualIncome!=undefined){var arr=$scope.txtActualIncome.ActualIncomeText.split(" ");$scope.txtActualIncome.ActualIncomeValue=parseFloat(arr[0])*100000;$scope.validatedot($scope.txtActualIncome.ActualIncomeValue);}}
$scope.opencomparebuypop=function(){$scope.IsNewRequestFlag=1;$scope.$root.showNavbar=false;$scope.$root.scrollhide="scrollhides";$scope.$root.planpop=true;if(($scope.comparebuypopAnimation=="out fadeOutDownBig")||($scope.comparebuypopAnimation=="")||($scope.planpopshow=="bounceOut bounceOutLeft")){$scope.$root.comparebuypop=true;$scope.comparebuypopAnimation="in fadeInUp";$scope.openmaintabform="in fadeInUp";$scope.$root.productBox="display-visible";$scope.planpopshow="in fadeInUp";}
else{$scope.comparebuypopAnimation="out fadeOutDownBig";$scope.openmaintabform="out fadeOutDownBig";}}
$scope.SetMaxTravelEndDate=function(){var maxdate=new Date($scope.travelStartDate.getTime());maxdate.setMonth(maxdate.getMonth()+6);$scope.MaxTravelEndDate=maxdate;if($scope.travelStartDate!=undefined){$scope.startdateError=false;}}
$scope.show_income_div=function(flag){$scope.editpopup=true;$scope.MainAnincome_1=false;if(flag==1){$scope.Anincome_1=true;$scope.Anincome_2=false;$scope.Anincome_3=false;$scope.EditAnincome_1=true;$scope.EditAnincome_2=false;$scope.EditAnincome_3=false;$("#lifecover_1").addClass("active");$("#lifecover_2").removeClass("active");$("#lifecover_3").removeClass("active");$("#lifecover_4").removeClass("active");$("#editlifecover_1").addClass("active");$("#editlifecover_2").removeClass("active");$("#editlifecover_3").removeClass("active");$("#editlifecover_4").removeClass("active");$("#5_lac").removeClass("select");}
else if(flag==2){$scope.Anincome_2=true;$scope.Anincome_1=false;$scope.Anincome_3=false;$scope.EditAnincome_2=true;$scope.EditAnincome_1=false;$scope.EditAnincome_3=false;$("#lifecover_2").addClass("active");$("#lifecover_1").removeClass("active");$("#lifecover_3").removeClass("active");$("#lifecover_4").removeClass("active");$("#editlifecover_2").addClass("active");$("#editlifecover_1").removeClass("active");$("#editlifecover_3").removeClass("active");$("#editlifecover_4").removeClass("active");$("#5l_lac").removeClass("select");$("#7_lac").removeClass("select");}
else if(flag==3){$scope.Anincome_3=true;$scope.Anincome_1=false;$scope.Anincome_2=false;$scope.EditAnincome_3=true;$scope.EditAnincome_1=false;$scope.EditAnincome_2=false;$("#lifecover_3").addClass("active");$("#lifecover_4").removeClass("active");$("#lifecover_1").removeClass("active");$("#lifecover_2").removeClass("active");$("#editlifecover_3").addClass("active");$("#editlifecover_4").removeClass("active");$("#editlifecover_1").removeClass("active");$("#editlifecover_2").removeClass("active");$("#7l_lac").removeClass("select");}
else if(flag==4){$scope.gender_div=true;$scope.Anincome_1=false;$scope.Anincome_2=false;$scope.Anincome_3=false;$scope.EditAnincome_1=false;$scope.EditAnincome_2=false;$scope.EditAnincome_3=false;$scope.tobacco_div=true;$("#lifecover_4").addClass("active");$("#lifecover_1").removeClass("active");$("#lifecover_3").removeClass("active");$("#lifecover_2").removeClass("active");$("#editlifecover_4").addClass("active");$("#editlifecover_1").removeClass("active");$("#editlifecover_3").removeClass("active");$("#editlifecover_2").removeClass("active");$scope.anula_inc=10000000;}}
$scope.show_income_div_edit=function(flag){$scope.MainAnincome_1=false;if(flag==1){$scope.EditAnincome_1=true;$scope.EditAnincome_2=false;$scope.EditAnincome_3=false;$("#editlifecover_1").addClass("active");$("#editlifecover_2").removeClass("active");$("#editlifecover_3").removeClass("active");$("#editlifecover_4").removeClass("active");$("#edit5_lac").removeClass("select");}
else if(flag==2){$scope.EditAnincome_2=true;$scope.EditAnincome_1=false;$scope.EditAnincome_3=false;$("#editlifecover_2").addClass("active");$("#editlifecover_1").removeClass("active");$("#editlifecover_3").removeClass("active");$("#editlifecover_4").removeClass("active");$("#edit5l_lac").removeClass("select");$("#edit7_lac").removeClass("select");}
else if(flag==3){$scope.EditAnincome_3=true;$scope.EditAnincome_1=false;$scope.EditAnincome_2=false;$("#editlifecover_3").addClass("active");$("#editlifecover_4").removeClass("active");$("#editlifecover_1").removeClass("active");$("#editlifecover_2").removeClass("active");$("#edit7l_lac").removeClass("select");}
else if(flag==4){$scope.EditAnincome_1=false;$scope.EditAnincome_2=false;$scope.EditAnincome_3=false;$("#editlifecover_4").addClass("active");$("#editlifecover_1").removeClass("active");$("#editlifecover_3").removeClass("active");$("#editlifecover_2").removeClass("active");$scope.anula_inc=10000000;}}
$scope.annual_income_fun=function(flag){if(flag==2){$scope.anula_inc=200000;$("#2_lac").addClass("select");$("#3_lac").removeClass("select");$("#4_lac").removeClass("select");$("#5_lac").removeClass("select");$("#edit2_lac").addClass("select");$("#edit3_lac").removeClass("select");$("#edit4_lac").removeClass("select");$("#edit5_lac").removeClass("select");$scope.gender_div=true;$scope.Anincome_1=false;$scope.Anincome_2=false;$scope.Anincome_3=false;}
else if(flag==3){$scope.anula_inc=300000;$("#3_lac").addClass("select");$("#2_lac").removeClass("select");$("#4_lac").removeClass("select");$("#5_lac").removeClass("select");$("#edit3_lac").addClass("select");$("#edit2_lac").removeClass("select");$("#edit4_lac").removeClass("select");$("#edit5_lac").removeClass("select");$scope.gender_div=true;$scope.Anincome_1=false;$scope.Anincome_2=false;$scope.Anincome_3=false;}
else if(flag==4){$scope.anula_inc=400000;$("#4_lac").addClass("select");$("#2_lac").removeClass("select");$("#3_lac").removeClass("select");$("#5_lac").removeClass("select");$("#edit4_lac").addClass("select");$("#edit2_lac").removeClass("select");$("#edit3_lac").removeClass("select");$("#edit5_lac").removeClass("select");$scope.gender_div=true;$scope.Anincome_1=false;$scope.Anincome_2=false;$scope.Anincome_3=false;}
else if(flag==5){$scope.anula_inc=500000;$("#5_lac").addClass("select");$("#5l_lac").addClass("select");$("#2_lac").removeClass("select");$("#3_lac").removeClass("select");$("#4_lac").removeClass("select");$("#6_lac").removeClass("select");$("#7_lac").removeClass("select");$("#edit5_lac").addClass("select");$("#edit5l_lac").addClass("select");$("#edit2_lac").removeClass("select");$("#edit3_lac").removeClass("select");$("#edit4_lac").removeClass("select");$("#edit6_lac").removeClass("select");$("#edit7_lac").removeClass("select");$scope.gender_div=true;$scope.Anincome_1=false;$scope.Anincome_2=false;$scope.Anincome_3=false;}
else if(flag==6){$scope.anula_inc=600000;$("#6_lac").addClass("select");$("#5l_lac").removeClass("select");$("#7_lac").removeClass("select");$("#7l_lac").removeClass("select");$("#edit6_lac").addClass("select");$("#edit5l_lac").removeClass("select");$("#edit7_lac").removeClass("select");$("#edit7l_lac").removeClass("select");$scope.gender_div=true;$scope.Anincome_1=false;$scope.Anincome_2=false;$scope.Anincome_3=false;}
else if(flag==7){$scope.anula_inc=700000;$("#7_lac").addClass("select");$("#7l_lac").addClass("select");$("#6_lac").removeClass("select");$("#8_lac").removeClass("select");$("#9_lac").removeClass("select");$("#10_lac").removeClass("select");$("#edit7_lac").addClass("select");$("#edit7l_lac").addClass("select");$("#edit6_lac").removeClass("select");$("#edit8_lac").removeClass("select");$("#edit9_lac").removeClass("select");$("#edit10_lac").removeClass("select");$scope.gender_div=true;$scope.Anincome_1=false;$scope.Anincome_2=false;$scope.Anincome_3=false;}
else if(flag==8){$scope.anula_inc=800000;$("#8_lac").addClass("select");$("#7l_lac").removeClass("select");$("#9_lac").removeClass("select");$("#10_lac").removeClass("select");$("#edit8_lac").addClass("select");$("#edit7l_lac").removeClass("select");$("#edit9_lac").removeClass("select");$("#edit10_lac").removeClass("select");$scope.gender_div=true;$scope.Anincome_1=false;$scope.Anincome_2=false;$scope.Anincome_3=false;}
else if(flag==9){$scope.anula_inc=900000;$("#9_lac").addClass("select");$("#7l_lac").removeClass("select");$("#8_lac").removeClass("select");$("#10_lac").removeClass("select");$("#edit9_lac").addClass("select");$("#edit7l_lac").removeClass("select");$("#edit8_lac").removeClass("select");$("#edit10_lac").removeClass("select");$scope.gender_div=true;$scope.Anincome_1=false;$scope.Anincome_2=false;$scope.Anincome_3=false;}
else if(flag==10){$scope.anula_inc=1000000;$("#10_lac").addClass("select");$("#7l_lac").removeClass("select");$("#8_lac").removeClass("select");$("#9_lac").removeClass("select");$("#edit10_lac").addClass("select");$("#edit7l_lac").removeClass("select");$("#edit8_lac").removeClass("select");$("#edit9_lac").removeClass("select");$scope.gender_div=true;$scope.Anincome_1=false;$scope.Anincome_2=false;$scope.Anincome_3=false;}}
$scope.annual_income_fun_edit=function(flag){if(flag==2){$scope.anula_inc=200000;$("#edit2_lac").addClass("select");$("#edit3_lac").removeClass("select");$("#edit4_lac").removeClass("select");$("#edit5_lac").removeClass("select");$scope.EditAnincome_1=false;}
else if(flag==3){$scope.anula_inc=300000;$("#edit3_lac").addClass("select");$("#edit2_lac").removeClass("select");$("#edit4_lac").removeClass("select");$("#edit5_lac").removeClass("select");$scope.EditAnincome_2=false;}
else if(flag==4){$scope.anula_inc=400000;$("#edit4_lac").addClass("select");$("#edit2_lac").removeClass("select");$("#edit3_lac").removeClass("select");$("#edit5_lac").removeClass("select");$scope.EditAnincome_3=false;}
else if(flag==5){$scope.anula_inc=500000;$("#edit5_lac").addClass("select");$("#edit5l_lac").addClass("select");$("#edit2_lac").removeClass("select");$("#edit3_lac").removeClass("select");$("#edit4_lac").removeClass("select");$("#edit6_lac").removeClass("select");$("#edit7_lac").removeClass("select");}
else if(flag==6){$scope.anula_inc=600000;$("#edit6_lac").addClass("select");$("#edit5l_lac").removeClass("select");$("#edit7_lac").removeClass("select");$("#edit7l_lac").removeClass("select");}
else if(flag==7){$scope.anula_inc=700000;$("#edit7_lac").addClass("select");$("#edit7l_lac").addClass("select");$("#edit6_lac").removeClass("select");$("#edit8_lac").removeClass("select");$("#edit9_lac").removeClass("select");$("#edit10_lac").removeClass("select");}
else if(flag==8){$scope.anula_inc=800000;$("#edit8_lac").addClass("select");$("#edit7l_lac").removeClass("select");$("#edit9_lac").removeClass("select");$("#edit10_lac").removeClass("select");}
else if(flag==9){$scope.anula_inc=900000;$("#edit9_lac").addClass("select");$("#edit7l_lac").removeClass("select");$("#edit8_lac").removeClass("select");$("#edit10_lac").removeClass("select");}
else if(flag==10){$scope.anula_inc=1000000;$("#edit10_lac").addClass("select");$("#edit7l_lac").removeClass("select");$("#edit8_lac").removeClass("select");$("#edit9_lac").removeClass("select");}}
$scope.form_gender=function(flag){if(flag=='M'){$scope.gender='M';$("#form_male").addClass("active");$("#form_female").removeClass("active");$("#editform_male").addClass("active");$("#editform_female").removeClass("active");$scope.tobacco_div=true;}
else{$scope.gender='F';$("#form_female").addClass("active");$("#form_male").removeClass("active");$("#editform_female").addClass("active");$("#editform_male").removeClass("active");$scope.tobacco_div=true;}
$scope.gender_div=false;}
$scope.form_gender_edit=function(flag){if(flag=='M'){$scope.gender='M';$("#editform_male").addClass("active");$("#editform_female").removeClass("active");}
else{$scope.gender='F';$("#editform_female").addClass("active");$("#editform_male").removeClass("active");}}
$scope.tobacco_user=function(flag){if(flag=='Y'){$scope.formtobacco=true;$("#tobacco_yes").addClass("active");$("#tobacco_no").removeClass("active");$("#edittobacco_yes").addClass("active");$("#edittobacco_no").removeClass("active");$scope.dob_div=true;}
else{$scope.formtobacco=false;$("#tobacco_no").addClass("active");$("#tobacco_yes").removeClass("active");$("#edittobacco_no").addClass("active");$("#edittobacco_yes").removeClass("active");$scope.dob_div=true;}
$scope.tobacco_div=false;}
$scope.tobacco_user_edit=function(flag){if(flag=='Y'){$scope.formtobacco=true;$("#edittobacco_yes").addClass("active");$("#edittobacco_no").removeClass("active");}
else{$scope.formtobacco=false;$("#edittobacco_no").addClass("active");$("#edittobacco_yes").removeClass("active");}}
$scope.validation=function(flag){if(flag=='pincode'){if($scope.pincode.length==6&&$scope.pincode!=000000){$scope.mobile_div=true;$scope.pincode_div=false;}
else if($scope.pincode==000000){$scope.pinerror=true;}}
if(flag=='mobile'){if($scope.userMobile.length==10&&$scope.userMobile!=0000000000){$scope.gettermquotes();}
else if($scope.pincode==0000000000){$scope.mobileerror=true;}}
if(flag=='OTP'){if($scope.userOTP.length==4&&$scope.userOTP!=0000){$scope.leadcreationfn7();}}}
$scope.geticon=function(flag){if(flag==1){if($scope.mobileicontab[0].id>1){$scope.mobileicontab.splice(3,1);$scope.mobileicontab.splice(0,0,$scope.mobileicontab1[$scope.mobileicontab[0].id-2]);}}
else{if($scope.mobileicontab[3].id<7){$scope.mobileicontab.splice(0,1);$scope.mobileicontab.push($scope.mobileicontab1[$scope.mobileicontab[2].id]);}}}
$scope.IGdateKey=function(flag,event){if(flag==1&&$scope.IGdate!=undefined&&$scope.IGdate!=null&&$scope.IGdate!=""&&$scope.IGdate==2){$scope.dd2=true;$scope.userdd01=0;}else if(flag==2&&$scope.IGmonth!=undefined&&$scope.IGmonth!=null&&$scope.IGmonth!=""&&$scope.IGmonth.length==2){$scope.dd3=true;$scope.userdd11=0;}else if(flag==3&&$scope.IGyear!=undefined&&$scope.IGyear!=null&&$scope.IGyear!=""&&$scope.IGyear.length==4){$scope.userdd21=0;}else if(flag==2&&event.keyCode===8&&$scope.IGmonth==undefined){if($scope.userdd11==1){$scope.userdd11=0;$scope.dd1=true;}else{$scope.userdd11=1;}}else if(flag==3&&event.keyCode===8&&$scope.IGyear==undefined){if($scope.userdd21==1){$scope.userdd21=0;$scope.dd2=true;}else{$scope.userdd21=1;}}}
$scope.makeauto=function(){$scope.popupautocomplete=true;}
$scope.hidescroll=function(){$scope.$root.scrollhide="scrollhides";}
$scope.showscroll=function(){$scope.$root.scrollhide="";}
$scope.getcarcityauto=function(item){$scope.selectedItem=item;$scope.popupautocomplete=false;}
$scope.datefocus=function(flag){if(flag==1){if($scope.IGdate.length==2){$('#Tel144').focus();}}
else if(flag==3&&$scope.IGchilddate!=undefined){if($scope.IGchilddate.length==2){$('#Tel24').focus();$('#Tel155').focus();}}}
$scope.monthfocus=function(flag){if(flag==2&&$scope.IGmonth!=undefined){if($scope.IGmonth==3){$('#Tel15').focus();$('#Tel35').focus();$('#Tel3').focus();$('#Tel45').focus();$('#Tel55').focus();$('#Tel155').focus();$('#Te96').focus();}
else if($scope.IGmonth.length==2){$('#Tel155').focus();}}
else if(flag==4&&$scope.IGchildmonth!=undefined){if($scope.IGchildmonth==3){$('#Tel25').focus();$('#Te99').focus();}
else if($scope.IGchildmonth.length==2){$('#Tel25').focus();$('#Te99').focus();}}}
$scope.testdate=function(flag,diff){var check=0;if($scope.IGdate!=undefined&&$scope.IGmonth!=undefined&&$scope.IGyear!=undefined&&$scope.IGyear.length==4){var d=new Date();var n=d.getFullYear();var m=d.getMonth();var yy=$scope.IGmonth+'-'+$scope.IGdate+'-'+$scope.IGyear;if(diff==1){$scope.age=$scope.getAge(yy);if($scope.IGdate!=00||$scope.IGmonth!=00||$scope.IGyear!=0000){$scope.form_age=$scope.age;}
else{$scope.form_age=0;}
$scope.pincode_div=true;$scope.dob_div=false;}
if(isNaN($scope.age)==true||isNaN(parseInt($scope.IGmonth))==true||isNaN(parseInt($scope.IGdate))==true||isNaN(parseInt($scope.IGyear))==true){check=1;$scope.age=undefined;}
if($scope.age<18){$scope.dateerror=true;check=1;}
if((ValidationFactory.onlynumber($scope.IGmonth)=="False")||(ValidationFactory.onlynumber($scope.IGdate)=="False")||(ValidationFactory.onlynumber($scope.IGyear)=="False")){$scope.dateerror=true;check=1;}
else if($scope.age>100){$scope.dateerror=true;check=1;}
else if($scope.IGyear%4!=0&&$scope.IGyear%100!=0&&($scope.IGmonth==2||$scope.IGmonth==02)&&$scope.IGdate>28){$scope.dateerror=true;check=1;}
else if($scope.IGyear%400!=0&&$scope.IGyear%100==0&&($scope.IGmonth==2||$scope.IGmonth==02)&&$scope.IGdate>28){$scope.dateerror=true;check=1;}
if($scope.IGmonth>12||$scope.IGmonth<=0){$scope.dateerror=true;check=1;}
else if(($scope.IGmonth==2||$scope.IGmonth==02)&&$scope.IGdate>30){$scope.dateerror=true;check=1;}
else if(($scope.IGmonth==4||$scope.IGmonth==6||$scope.IGmonth==9||$scope.IGmonth==11)&&$scope.IGdate>30){$scope.dateerror=true;check=1;}
if($scope.IGdate>31||$scope.IGdate<=0){$scope.dateerror=true;check=1;}}
if(check==1){$scope.formdob=undefined;$scope.dateerror=true;$scope.chatageflag=false;}
if(check==0&&$scope.IGdate!=undefined&&$scope.IGmonth!=undefined&&$scope.IGyear!=undefined){$scope.dateerror=false;$scope.chatageflag=true;console.log($scope.agemonth);$scope.editIGdate=$scope.IGdate;$scope.editIGmonth=$scope.IGmonth;$scope.editIGyear=$scope.IGyear;$scope.formdob=$scope.IGdate+'-'+$scope.IGmonth+'-'+$scope.IGyear;}}
$scope.testdate_edit=function(flag,diff){var check=0;if($scope.editIGdate!=undefined&&$scope.editIGmonth!=undefined&&$scope.editIGyear!=undefined&&$scope.editIGyear.length==4){var d=new Date();var n=d.getFullYear();var m=d.getMonth();var yy=$scope.editIGmonth+'-'+$scope.editIGdate+'-'+$scope.editIGyear;if(diff==1){$scope.age=$scope.getAge(yy);if($scope.editIGdate!=00||$scope.editIGmonth!=00||$scope.editIGyear!=0000){$scope.form_age=$scope.age;}
else{$scope.form_age=0;}}
if(isNaN($scope.age)==true||isNaN(parseInt($scope.editIGmonth))==true||isNaN(parseInt($scope.editIGdate))==true||isNaN(parseInt($scope.editIGyear))==true){check=1;$scope.age=undefined;}
if($scope.age<18){$scope.dateerror=true;check=1;}
if((ValidationFactory.onlynumber($scope.editIGmonth)=="False")||(ValidationFactory.onlynumber($scope.editIGdate)=="False")||(ValidationFactory.onlynumber($scope.editIGyear)=="False")){$scope.dateerror=true;check=1;}
else if($scope.age>100){$scope.dateerror=true;check=1;}
else if($scope.editIGyear%4!=0&&$scope.editIGyear%100!=0&&($scope.editIGmonth==2||$scope.editIGmonth==02)&&$scope.editIGdate>28){$scope.dateerror=true;check=1;}
else if($scope.editIGyear%400!=0&&$scope.editIGyear%100==0&&($scope.editIGmonth==2||$scope.editIGmonth==02)&&$scope.editIGdate>28){$scope.dateerror=true;check=1;}
if($scope.editIGmonth>12||$scope.editIGmonth<=0){$scope.dateerror=true;check=1;}
else if(($scope.editIGmonth==2||$scope.editIGmonth==02)&&$scope.editIGdate>30){$scope.dateerror=true;check=1;}
else if(($scope.editIGmonth==4||$scope.editIGmonth==6||$scope.editIGmonth==9||$scope.editIGmonth==11)&&$scope.editIGdate>30){$scope.dateerror=true;check=1;}
if($scope.editIGdate>31||$scope.editIGdate<=0){$scope.dateerror=true;check=1;}}
if(check==1){$scope.formdob=undefined;$scope.dateerror=true;$scope.chatageflag=false;}
if(check==0&&$scope.editIGdate!=undefined&&$scope.editIGmonth!=undefined&&$scope.editIGyear!=undefined){$scope.dateerror=false;$scope.chatageflag=true;console.log($scope.agemonth);$scope.formdob=$scope.editIGdate+'-'+$scope.editIGmonth+'-'+$scope.editIGyear;}}
$scope.childtestdate=function(flag,diff){var childcheck=0;if($scope.IGchildmonth!=undefined&&$scope.IGchilddate!=undefined&&$scope.IGchildyear!=undefined){var d=new Date();var n=d.getFullYear();var m=d.getMonth();var yy=$scope.IGchildmonth+'-'+$scope.IGchilddate+'-'+$scope.IGchildyear;$scope.child_age=$scope.getAge(yy);if(isNaN($scope.child_age)==true||isNaN(parseInt($scope.IGchildmonth))==true||isNaN(parseInt($scope.IGchilddate))==true||isNaN(parseInt($scope.IGchildyear))==true){childcheck=1;$scope.child_age=undefined;}
if($scope.child_age>=18){$scope.datechilderror=true;childcheck=1;}
if(isNaN($scope.datechilderror)==true){check=1;}
if((ValidationFactory.onlynumber($scope.IGchildmonth)=="False")||(ValidationFactory.onlynumber($scope.IGchilddate)=="False")||(ValidationFactory.onlynumber($scope.IGchildyear)=="False")){$scope.datechilderror=true;childcheck=1;}
else if($scope.child_age<0){$scope.datechilderror=true;childcheck=1;}
else if($scope.IGchildyear%4!=0&&$scope.IGchildyear%100!=0&&($scope.IGchildmonth==2||$scope.IGchildmonth==02)&&$scope.IGchilddate>28){$scope.datechilderror=true;childcheck=1;}
else if($scope.IGchildyear%400!=0&&$scope.IGchildyear%100==0&&($scope.IGchildmonth==2||$scope.IGchildmonth==02)&&$scope.IGchilddate>28){$scope.datechilderror=true;childcheck=1;}}
if(childcheck==1){$scope.datechilderror=true;$scope.formchilddob=undefined;$scope.chatchildageflag=false;}
if(childcheck==0&&$scope.IGchilddate!=undefined&&$scope.IGchildmonth!=undefined&&$scope.IGchildyear!=undefined){$scope.datechilderror=false;$scope.chatchildageflag=true;$scope.formchilddob=$scope.IGchilddate+'-'+$scope.IGchildmonth+'-'+$scope.IGchildyear;}}
$scope.getAge=function(dateString){var today=new Date();var tempage=dateString.split("-");var birthDate=new Date(parseInt(tempage[2]),(parseInt(tempage[0])-1),parseInt(tempage[1]));var age=today.getFullYear()-birthDate.getFullYear();var m=today.getMonth()-birthDate.getMonth();if(m<0||(m===0&&today.getDate()<birthDate.getDate())){age--;}
return age;}
$scope.getmonth=function(dateString){var tempage=dateString.split("-");var past_date=new Date(tempage[2],tempage[1],tempage[0]);var current_date=new Date();var difference=(current_date.getFullYear()*12+current_date.getMonth())-(past_date.getFullYear()*12+past_date.getMonth());return difference;}
$scope.checkincomeerror=function(flag){if($scope.selectedincome==undefined){flag=1;}
else{$scope.incomeerror=false;$scope.forminvestamtvalue=$scope.selectedincome;$scope.formsuminsured=$scope.selectedincome;}}
$scope.checkforincomeerror=function(flag){if($scope.selectedincome==undefined){flag=1;}
else{$scope.incomeerror=false;var incomearray=$scope.selectedincome.split(',');$scope.formsuminsured=incomearray[1].toString();$scope.txtSumAssuredRange=incomearray[0].toString();}}
$scope.formatReg=function(event,registrationNo,flag){if(event.keyCode!=8){var regNo=registrationNo;if(flag==1){$scope.carregnumber=regNo;$scope.carregnumber=$scope.carregnumber.toUpperCase();}
else{$scope.bikeregnumber=regNo;$scope.bikeregnumber=$scope.bikeregnumber.toUpperCase();}}}
$scope.$watch('online',function(){if(!$rootScope.online){$mdToast.show($mdToast.simple().textContent('Uhoh, we\'ve lost you... Please check your connection.').hideDelay(3000).position('top right'));}});$scope.validate=function(){var patt1=/^[A-Z]{1}[0-9A-Za-z]{4,12}[0-9]{1}$/;if($scope.carregnumber!=undefined&&$scope.carregnumber!=""){var bool=patt1.test($scope.carregnumber.replace(/-/g,"").toUpperCase());}
else{bool=false;}
if($scope.carregnumber!=undefined&&bool==true&&$scope.carregnumber.length>4){$scope.patternFails=false;var temp=$scope.carregnumber.split("-");$scope.carNo.registrationNo=temp[0];for(i=1;i<temp.length;i++){$scope.carNo.registrationNo+=temp[i];}
$scope.CallWEBAPIService();}
else{$scope.patternFails=true;$scope.regnoerrortext="Enter correct car registration no.";}}
$scope.bikevalidate=function(){if($scope.bikeregnumber!=undefined){var patt=/[A-Z]{2}[0-9]{1,2}[A-Z]{1,3}[0-9]{4}$/;var patt1=/^[A-Z]{1}[0-9A-Za-z]{4,12}[0-9]{1}$/;var bool=patt1.test($scope.bikeregnumber.replace(/-/g,"").toUpperCase());if(!bool){$scope.patternFails1=true;$scope.regnoerrortext="Enter correct bike registration no.";}else{$scope.patternFails1=false;var temp=$scope.bikeregnumber.split("-");$scope.bikeNo.registrationNo=temp[0];for(i=1;i<temp.length;i++){$scope.bikeNo.registrationNo+=temp[i];}
$scope.CallWEBAPIServicebike(false);}}
else{$scope.patternFails1=true;$scope.regnoerrortext="Enter correct bike registration no.";}}
$scope.CallWEBAPIServicebike=function(apiFlag){var temp=$scope.bikeregnumber+"|false";$scope.bikenoresult=undefined;$scope.fastlanebikeresult=CommonService.fastlane(temp);$scope.fastlanebikeresult.then(function(result){console.log(result);result.data=angular.fromJson(result.data);console.log(result.data);if(result.data.length==0){$scope.selectedbikemmv=null;$scope.searchText101=undefined;$scope.bikenoresult=true;$scope.selectedbikerto=null;$scope.searchText10=undefined;$scope.selectedbikemakepop=undefined;$scope.selectedbikertopop=undefined;$mixpanel.track('Vehicle Lookup Submit',{'Product':$scope.products[1].product,'Registration No':result.data[0].RegistrationNumber,'Result':'0'});$scope.bikereg=undefined}else{$scope.bikenoresult=false;$scope.fastlaneresultbike=result.data[0];if($scope.fastlaneresultbike.RegistrationDate!=undefined){var dateObj=new Date($scope.fastlaneresultbike.RegistrationDate);var month=dateObj.getMonth()+1;var day=dateObj.getDate();var year=dateObj.getFullYear();var date=day+"-"+month+"-"+year;$scope.Registrationdate=JSON.parse(CommonService.stringifyWcf(date,1))
$mixpanel.track('Vehicle Lookup Submit',{'Product':$scope.products[1].product,'Registration No':result.data[0].RegistrationNumber,'Result':'1'});}
$scope.carflag=true;var Fuel_Type=$scope.fastlaneresultbike.MakeModel.split(',')[1];var CC=$scope.fastlaneresultbike.MakeModel.split(',')[3];var Year_Of_manufacturer=$scope.fastlaneresultbike.ManufactureYear;var Seating_Capacity=$scope.fastlaneresultbike.MakeModel.split(',')[2];var series=$scope.fastlaneresultbike.MakeModel;var ChasisNo=$scope.fastlaneresultbike.ChassisNumber;var EngineNo=$scope.fastlaneresultbike.EngineNumber;var Reg_no=$scope.fastlaneresultbike.RegistrationNumber;var regyeartemp=$scope.regyear1;$scope.bikeengineno=EngineNo;$scope.bikechasisno=ChasisNo;$scope.bikeregnofastlane="";for(i=4;i<Reg_no.length;i++){$scope.bikeregnofastlane=$scope.bikeregnofastlane+Reg_no[i]}
console.log($scope.bikeregnofastlane);$scope.selectedbikemmv={bikename:series,makeid:$scope.fastlaneresultbike.MakeModelIds.split(",")[0],modelid:$scope.fastlaneresultbike.MakeModelIds.split(",")[1]};$scope.checkbikelisterror();$scope.bikereg=Year_Of_manufacturer;$scope.selectedbikemakepop=series;$scope.bikechasisno=ChasisNo;$scope.bikeengineno=EngineNo;$scope.txtbiketype=$scope.selectedbikemmv.bikename;var rtocodeforapi=Reg_no[0]+Reg_no[1]+Reg_no[2]+Reg_no[3];$scope.updatedbikerto=CommonService.bikertoservice("",rtocodeforapi);$scope.updatedbikerto.then(function(result){result.data=angular.fromJson(result.data);$scope.selectedbikerto={cityid:result.data[0].CityCode,stateid:result.data[0].StateCode,RTOCode:result.data[0].RTOCode,cityname:result.data[0].CityName};$scope.checkbikertoerror();$scope.bikeregyear();$scope.bikepolicyexp();$scope.txtbikerto=$scope.selectedbikerto.cityname;console.log("car");console.log(result)})}})}
$scope.CallWEBAPIService=function(){var temp=$scope.carregnumber+"|true";$scope.fastlanecarresult=CommonService.fastlane(temp);$scope.selectedItem=null;$scope.selectedItem1=null;$scope.carreg=undefined;$scope.carclaim=undefined;$scope.carkitstatus=undefined;$scope.searchText2=undefined;$scope.fastlanecarresult.then(function(result){console.log(result);result.data=angular.fromJson(result.data);console.log(result.data);$scope.fastlaneresult=result.data[0];if(result.data.length==0){$mixpanel.track('Vehicle Lookup Submit',{'Product':$scope.products[0].product,'Registration No':result.data[0].RegistrationNumber,'Result':'0'});$scope.fastlanenohit=true;}
else{$scope.fastlanenohit=false;$mixpanel.track('Vehicle Lookup Submit',{'Product':$scope.products[0].product,'Registration No':result.data[0].RegistrationNumber,'Result':'1'});console.log("yes");$scope.carflag=true;var Fuel_Type=$scope.fastlaneresult.MakeModel.split(',')[1];var CC=$scope.fastlaneresult.MakeModel.split(',')[3];var Year_Of_manufacturer=$scope.fastlaneresult.ManufactureYear;var Seating_Capacity=$scope.fastlaneresult.MakeModel.split(',')[2];var series=$scope.fastlaneresult.MakeModel;var ChasisNo=$scope.fastlaneresult.ChassisNumber;var EngineNo=$scope.fastlaneresult.EngineNumber;var Reg_no=$scope.fastlaneresult.RegistrationNumber;$scope.carengineno=EngineNo;$scope.carchasisno=ChasisNo;var regyeartemp=$scope.regyear1;var temparray=[];var yeargap=$scope.year-Year_Of_manufacturer;for(var i=0;i<=yeargap;i++){if(regyeartemp.length>=i){temparray.push(regyeartemp[i]);}}
$scope.regyear=temparray;$scope.showcarncb=true;$scope.claimtaken=undefined;$scope.selectedcarmakepop=series;if(Fuel_Type.trim()=="DIESEL"){$scope.carkitstatus=undefined;$scope.formddlkit="Kit0";$scope.carfuelcontainer=false;}
else if(Fuel_Type.trim()=="CNG"){$scope.carkitstatus=undefined;$scope.formddlkit="Kit0";$scope.carfuelcontainer=false;}
else if(Fuel_Type.trim()=="LPG"){$scope.carkitstatus=undefined;$scope.carcnglpg=$scope.carpoplpg;$scope.carfuelcontainer=true;}
else if(Fuel_Type.trim()=="PETROL"){$scope.carkitstatus=undefined;$scope.carcnglpg=$scope.carpoppetrol;$scope.carfuelcontainer=true;}
$scope.formcarwidget=series;$scope.selectedItem={};$scope.selectedItem1={};$scope.selectedItem.ModelName=series;$scope.selectedItem.MakeId=$scope.fastlaneresult.MakeModelIds.split(",")[0].trim();$scope.selectedItem.ModelId=$scope.fastlaneresult.MakeModelIds.split(",")[1].trim();$scope.yearOfRegistration=Year_Of_manufacturer;$scope.forcarreg=Year_Of_manufacturer;$scope.carreg=Year_Of_manufacturer;$scope.formlblregno=$scope.carregnumber.toUpperCase();$scope.formchasisno=ChasisNo;$scope.formengineno=EngineNo;if($scope.carregnumber[2]=="-"){var regcode=$scope.carregnumber[0]+$scope.carregnumber[1]+$scope.carregnumber[3]+$scope.carregnumber[4];}
else{var regcode=$scope.carregnumber[0]+$scope.carregnumber[1]+$scope.carregnumber[2]+$scope.carregnumber[3];}
regcode=regcode.toUpperCase();$scope.selectedItem1.CityName="("+regcode+") "+result.data[0].CityName+","+result.data[0].StateName;$scope.selectedItem1.RTOCode=regcode;$scope.selectedItem1.StateCode=result.data[0].StateId;$scope.selectedItem1.CityCode=result.data[0].CityId;$scope.txtcarvariant=$scope.selectedItem.ModelName;$scope.txtCarcity=$scope.selectedItem1.CityName;$scope.PopulateClaimddl();}});}
$scope.closepop1=function(){$scope.claimtaken=undefined;$scope.$root.comparebuypop=false;$scope.$root.popupcarpage=false;$scope.$root.scrollhide="";if($scope.productpop=="bounceInDown"){$scope.productpop="out fadeOutDownBig";}
else{$scope.productpop="bounceInD bounceInDown";}
$scope.showchat1=false;$scope.showchatmsg=true;$scope.showheader=true;$scope.showmobileheader=true;}
$scope.backpop1=function(){if($scope.carpopup==true){$scope.carProceedBtnLoader=false;$scope.carNo.registrationNo=undefined;$scope.carmaindetails=true;$scope.carpopup=false;$scope.carregnumber=undefined;$scope.carengineno=undefined;$scope.carchasisno=undefined;$scope.claimtaken=undefined;if($scope.userdata!=undefined){if($scope.userdata.length>0){if($scope.userdata[0].Product=="Car"&&$scope.$root.planpop==false){$scope.$root.backpop=false;}}}}
else if($scope.carmaindetails==true){$scope.productpop="bounceOut bounceOutLeft";$scope.planpopshow="bounceInRight";$scope.$root.comparebuypop=true;$scope.$root.scrollhide="scrollhides";}}
$scope.backpop2=function(){if($scope.bikepopup==true){$scope.bikeProceedBtnLoader=false;$scope.bikeNo.registrationNo=undefined;$scope.bikemaindetails=true;$scope.bikepopup=false;$scope.$root.bikeregno=true;f($scope.userdata!=undefined)
{if($scope.userdata.length>0){if($scope.userdata[0].Product=="Twowheeler"&&$scope.$root.planpop==false){$scope.$root.backpop=false;}}}}
else if($scope.bikemaindetails==true){$scope.productpop="bounceOut bounceOutLeft";$scope.planpopshow="bounceInRight";$scope.$root.comparebuypop=true;$scope.$root.scrollhide="scrollhides";}}
$scope.backpop3=function(){$scope.productpop="bounceOut bounceOutLeft";$scope.planpopshow="bounceInRight";$scope.$root.comparebuypop=true;$scope.$root.scrollhide="scrollhides";$scope.$root.travelfirstpop=false;$scope.$root.travelsecondpop=false;}
$scope.backpop4=function(){if($scope.$root.travelsecondpop==true){$scope.travelProceedBtnLoader=false;$scope.$root.travelfirstpop=true;$scope.$root.travelsecondpop=false;$scope.travelpopSecond="display-none";$scope.travelpopFirst="display-visible";if($scope.userdata!=undefined){if($scope.userdata.length>0){if($scope.userdata[0].Product=="Travel"&&$scope.$root.planpop==false){$scope.$root.backpop=false;}}}}
else if($scope.$root.travelfirstpop==true){$scope.productpop="bounceOut bounceOutLeft";$scope.planpopshow="bounceInRight";$scope.$root.comparebuypop=true;$scope.$root.scrollhide="scrollhides";}}
$scope.closepop=function(){$scope.$root.popupcarpage1=false;$scope.bodyscroll="";$scope.$root.popupcarpage=false
$scope.showchat1=false;$scope.showchatmsg=true;}
$scope.closepopall=function(flag){$scope.showchat1=false;$scope.showchatmsg=true;$scope.showheader=true;if($scope.userdata[0]!=undefined&&$scope.userdata[0].EditFlag==true){}
else{if(flag==2){$scope.$root.comparebuypop=false;$scope.$root.popupbikepage=false;$scope.$root.scrollhide="";if($scope.productpop=="bounceInDown"){$scope.productpop="out fadeOutDownBig";}
else{$scope.productpop="bounceInD bounceInDown";}}
else if(flag==3){$scope.$root.comparebuypop=false;$scope.$root.popuphealthpage=false;$scope.$root.scrollhide="";if($scope.productpop=="bounceInDown"){$scope.productpop="out fadeOutDownBig";}
else{$scope.productpop="bounceInD bounceInDown";}
$scope.healthsecondpop=false;$scope.healththirdpop=false;$scope.healthfirstpop=true;}
else if(flag==4){$scope.$root.comparebuypop=false;$scope.$root.popuptermpage=false;$scope.$root.scrollhide="";if($scope.productpop=="bounceInDown"){$scope.productpop="out bounceOutDown";}
else{$scope.productpop="bounceInD bounceInDown";}
$scope.termsecondpop=false;$scope.termthirdpop=false;$scope.termfirstpop=true;}
else if(flag==5){$scope.$root.comparebuypop=false;$scope.$root.popupchildpage=false;$scope.$root.scrollhide="";if($scope.productpop=="bounceInDown"){$scope.productpop="out bounceOutDown";}
else{$scope.productpop="bounceInD bounceInDown";}
$scope.childthirdpop=false;$scope.childsecondpop=false;$scope.childfirstpop=true;}
else if(flag==6){$scope.$root.comparebuypop=false;$scope.$root.popupinvestmentpage=false;$scope.$root.scrollhide="";if($scope.productpop=="bounceInDown"){$scope.productpop="out bounceOutDown";}
else{$scope.productpop="bounceInD bounceInDown";}
$scope.investsecondpop=false;$scope.investfirstpop=true;}
else if(flag==7){$scope.$root.comparebuypop=false;$scope.$root.popuppensionpage=false;$scope.$root.scrollhide="";if($scope.productpop=="bounceInDown"){$scope.productpop="out bounceOutDown";}
else{$scope.productpop="bounceInD bounceInDown";}
$scope.pensionsecondpop=false;$scope.pensionfirstpop=true;}
else if(flag==8){$scope.$root.comparebuypop=false;$scope.$root.popuptravelpage=false;$scope.$root.scrollhide="";if($scope.productpop=="bounceInDown"){$scope.productpop="out bounceOutDown";}
else{$scope.productpop="bounceInD bounceInDown";}
$scope.$root.travelfirstpop=true;$scope.$root.travelsecondpop=false;}}}
console.log=function(){}
$scope.maintabform=function(newTab){$scope.showheader=false;if(newTab==1){$mixpanel.track('Compare and buy',{"Product":"Car"});$scope.$root.popuphealthpage=false;$scope.$root.popuptermpage=false;$scope.$root.popupchildpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popupbikepage=false;$scope.$root.popupcarpage=true;$scope.$root.scrollhide="scrollhides";$scope.$root.closepop=false;$scope.$root.backpop=true;$scope.carpopup=false;$scope.carmaindetails=true;$scope.bikeregno=false;$scope.carregno=true;$scope.cartab="active cartab";$scope.biketab="biketab";$scope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";$scope.regerror=false;$scope.regnoerrortext="";}
if(newTab==2){$mixpanel.track('Compare and buy',{"Product":"'Two Wheeler"});$scope.carformfastlane="";$scope.$root.popuphealthpage=false;$scope.$root.popuptermpage=false;$scope.$root.popupchildpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=true;$scope.$root.scrollhide="scrollhides";$scope.$root.closepop=false;$scope.$root.backpop=true;$scope.bikepopup=false;$scope.bikemaindetails=true;$scope.carregno=false;$scope.$root.bikeregno=true;$scope.biketab="active biketab";$scope.cartab="cartab";$scope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";$scope.regnoerrortext="";$scope.getlinkbikepop();}
else if(newTab==3){$mixpanel.track('Compare and buy',{"Product":"Health"});$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popuptermpage=false;$scope.$root.popupchildpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popuphealthpage=true;$scope.$root.scrollhide="scrollhides";$scope.$root.closepop=false;$scope.$root.backpop=true;$scope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";}
else if(newTab==4){$mixpanel.track('Compare and buy',{"Product":"Term"});$scope.$root.popuphealthpage=false;$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popupchildpage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popuptermpage=true;$scope.$root.scrollhide="scrollhides";$scope.$root.closepop=false;$scope.$root.backpop=true;$scope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";}
else if(newTab==5){$mixpanel.track('Compare and buy',{"Product":"Child"});$scope.$root.popuptermpage=false;$scope.$root.popuphealthpage=false;$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popupchildpage=true;$scope.$root.scrollhide="scrollhides";$scope.$root.closepop=false;$scope.$root.backpop=true;$scope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";}
else if(newTab==6){$mixpanel.track('Compare and buy',{"Product":"Investment"});$scope.refreshSlider();$scope.annualerror=false;$scope.incomeerror=false;$scope.dateerror=false;$scope.paymenterror=false;$scope.$root.popupchildpage=false;$scope.$root.popuptermpage=false;$scope.$root.popuphealthpage=false;$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popupinvestmentpage=true;$scope.payMode=$scope.investincome[1].value;$scope.$root.scrollhide="scrollhides";$scope.$root.closepop=false;$scope.$root.backpop=true;$scope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";$scope.selectedincome=$scope.investincome[1].value;}
else if(newTab==7){$mixpanel.track('Compare and buy',{"Product":"Pension"});$scope.annualerror=false;$scope.incomeerror=false;$scope.dateerror=false;$scope.paymenterror=false;$scope.$root.popupchildpage=false;$scope.$root.popuptermpage=false;$scope.$root.popuphealthpage=false;$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuptravelpage=false;$scope.$root.popuppensionpage=true;$scope.$root.scrollhide="scrollhides";$scope.$root.closepop=false;$scope.$root.backpop=true;$scope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";$scope.payMode=$scope.investincome[1].value;$scope.annuity='self';}
else if(newTab==8){$mixpanel.track('Compare and buy',{"Product":"Travel"});$scope.$root.popupchildpage=false;$scope.$root.popuptermpage=false;$scope.$root.popuphealthpage=false;$scope.$root.popupcarpage=false;$scope.$root.popupbikepage=false;$scope.$root.popupinvestmentpage=false;$scope.$root.popuppensionpage=false;$scope.$root.popuptravelpage=true;$scope.$root.scrollhide="scrollhides";$scope.$root.travelfirstpop=true;$scope.$root.travelsecondpop=false;$scope.$root.closepop=false;$scope.$root.backpop=true;$scope.productpop="bounceInRight display-visible";$scope.planpopshow="bounceOut bounceOutLeft";$scope.$root.productBox="display-visible";$scope.travelpopFirst="display-visible";}
$scope.mainform_animation="";if($scope.tab<newTab){$scope.mainform_animation="to-animate intro-animate-66";}
else{$scope.mainform_animation="to-animate intro-animate-66";}}
$scope.isSet=function(tabNum){$scope.$root.popupcarpage1=true;$scope.$root.scrollhide="scrollhides";return $scope.tab===tabNum;};$scope.getpensionquote=function(){$scope.errorId="";var productid=6;$scope.dateerror=false;var flag=1;var income=parseInt($scope.txtActualIncome);if($scope.txtActualIncome==''||$scope.txtActualIncome==undefined){flag=0;$scope.annualerror=true;}
else{$scope.annualerror=false;}
if($scope.payMode==undefined||$scope.payMode==''){flag=0;$scope.errorId="error-outline";}
if($scope.formdob==undefined||$scope.IGdate==undefined||$scope.IGmonth==undefined||$scope.IGyear==undefined){flag=0;$scope.dateerror=true;}
else{$scope.dateerror=false;}
if($scope.payMode=='M'&&income<850||$scope.payMode=='Y'&&income<10000){flag=0;$scope.annualerror=true;}
else if($scope.payMode=='M'&&income>41666||$scope.payMode=='Y'&&income>500000){flag=0;$scope.annualerror=true;}
else{$scope.annualerror=false;}
if(isNaN(income)){flag=0;$scope.annualerror=true;}
var DateDiff=(ValidationFactory.AgeGroup($scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear)/12);if(DateDiff<18||DateDiff>60){$scope.dateerror=true;flag=0;}
if($scope.userMobile==undefined||$scope.userMobile==null||isNaN($scope.userMobile)==true||$scope.userMobile.toString().length<10||$scope.userMobile.toString().length>10){$scope.mobileerror=true;flag=0;}
if(flag==1){$scope.showbtnpensionloader=true;var currentPage=$location.absUrl();$scope.utm_source="";$scope.utm_campaign="";$scope.utm_term="";$scope.utm_medium="";$scope.insDOB=$scope.IGdate+'-'+$scope.IGmonth+'-'+$scope.IGyear;var today=new Date();if(flag==1){if(currentPage.indexOf("utm_source")!=-1){$scope.utm_source=currentPage.slice(currentPage.indexOf("utm_source=")+11).split("&")[0];}
if(currentPage.indexOf("utm_campaign")!=-1){$scope.utm_campaign=currentPage.slice(currentPage.indexOf("utm_campaign=")+13).split("&")[0];}
if(currentPage.indexOf("utm_term")!=-1){$scope.utm_term=currentPage.slice(currentPage.indexOf("utm_term=")+9).split("&")[0];}
if(currentPage.indexOf("utm_medium")!=-1){$scope.utm_medium=currentPage.slice(currentPage.indexOf("utm_medium=")+11).split("&")[0];}
$mixpanel.track("Form Submitted",{'Product':$scope.products[6].product,"UtmSource":$scope.utm_source,"DOB":$scope.formdob,"Gender":$scope.formgender,"Amount":income,"PayingMode":$scope.payMode});$scope.nontermdata={"userdetails":{"IGQuoteId":0,"PartnerAgentId":"String content","PartnerLeadId":"String content","RequestType":"String content","Requests":[{"__type":"NonTermRequest:#ServiceEntities","DOBs":[$scope.insDOB],"Features":[{"__type":"BooleanFeature:#ServiceEntities","Name":"ReturnOfPurchasePrice"},{"__type":"BooleanFeature:#ServiceEntities","Name":"LumpSumOnRetirement"}],"Amount":$scope.txtActualIncome+","+$scope.payMode,"MaturityTerm":0,"Gender":$scope.gender,"CityId":3502,"ProductId":6,"MinRisk":0,"MaxRisk":0,"PensionFor":$scope.annuity,"PaymentDuration":$scope.PaymentDuration,"PensionTill":$scope.PensionTill}],"ServiceTimeOut":2147483647,"utmCompaign":$scope.utm_campaign,"utmMedium":$scope.utm_medium,"utmSource":$scope.utm_source,"utmTerm":$scope.utm_term}};var saveRequirementData=CommonService.savePensionRequirementData($scope,globals);saveRequirementData.then(function(pl){$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));if($scope.IGQuoteId>0){$scope.leadcreationfn1(1,productid);}});}}}
$scope.getinvestquotes=function(){$scope.errorId="";var productid=5;var flag=1;var income=parseInt($scope.txtActualIncome);if($scope.txtActualIncome==''||$scope.txtActualIncome==undefined){flag=0;$scope.incomeerror=true;$scope.annualerror=true;}
else{$scope.incomeerror=false;$scope.annualerror=false;}
if($scope.selectedincome==undefined||$scope.selectedincome==''){flag=0;$scope.errorId="error-outline";}
else{$scope.errorId="";}
if($scope.formdob==undefined||$scope.IGdate==undefined||$scope.IGmonth==undefined||$scope.IGyear==undefined){flag=0;$scope.dateerror=true;}
else{var d=new Date();var age=(ValidationFactory.AgeGroup($scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear)/12);if(age<18||age>65||age==NaN){$scope.dateerror=true;flag=0;}
else{$scope.dateerror=false;}}
if($scope.selectedincome=='M'&&income<850||$scope.selectedincome=='Y'&&income<10000){flag=0;$scope.paymenterror=true;}
else if($scope.selectedincome=='M'&&income>41666||$scope.selectedincome=='Y'&&income>500000){flag=0;$scope.paymenterror=true;}
else{$scope.paymenterror=false;}
if($scope.userMobile==undefined||$scope.userMobile==null||isNaN($scope.userMobile)==true||$scope.userMobile.toString().length<10||$scope.userMobile.toString().length>10){$scope.mobileerror=true;flag=0;}
if(flag==1){$scope.showbtninvestloader=true;var currentPage=$location.absUrl();$scope.utm_source="";$scope.utm_campaign="";$scope.utm_term="";$scope.utm_medium="";$scope.insDOB=$scope.IGdate+'-'+$scope.IGmonth+'-'+$scope.IGyear;if(currentPage.indexOf("utm_source")!=-1){$scope.utm_source=currentPage.slice(currentPage.indexOf("utm_source=")+11).split("&")[0];}
if(currentPage.indexOf("utm_campaign")!=-1){$scope.utm_campaign=currentPage.slice(currentPage.indexOf("utm_campaign=")+13).split("&")[0];}
if(currentPage.indexOf("utm_term")!=-1){$scope.utm_term=currentPage.slice(currentPage.indexOf("utm_term=")+9).split("&")[0];}
if(currentPage.indexOf("utm_medium")!=-1){$scope.utm_medium=currentPage.slice(currentPage.indexOf("utm_medium=")+11).split("&")[0];}
$mixpanel.track("Form Submitted",{'Product':$scope.products[5].product,"UtmSource":$scope.utm_source,"DOB":$scope.formdob,"Gender":$scope.formgender,"Amount":income,"PayingMode":$scope.selectedincome});var data={"userdetails":{"IGQuoteId":0,"PartnerAgentId":"","PartnerLeadId":"","RequestType":"","Requests":[{"__type":"NonTermRequest:#ServiceEntities","DOBs":[$scope.insDOB],"Features":[{"__type":"BooleanFeature:#ServiceEntities","Id":$scope.AllowPartialWithdrawNameAmount,"Name":""},{"__type":"CustomFeature:#ServiceEntities","Id":$scope.TermBenefitAmount,"Name":"","Value":0},{"__type":"CustomFeature:#ServiceEntities","Id":$scope.AccidentalDisabilityAmount,"Name":"","Value":0},{"__type":"CustomFeature:#ServiceEntities","Id":$scope.AccidentalDeathAmount,"Name":"","Value":0},{"__type":"CustomFeature:#ServiceEntities","Id":$scope.CriticalIllnessAmount,"Name":"","Value":0},],"Amount":$scope.txtActualIncome+","+$scope.selectedincome,"MaturityTerm":0,"Gender":$scope.gender,"CityId":3502,"MinRisk":0,"MaxRisk":0,"ProductId":5,"MaturityType":"HistoricalGrowth","PaymentDuration":""}],"ServiceTimeOut":"2147483647","utmCompaign":$scope.utm_campaign,"utmMedium":$scope.utm_medium,"utmSource":$scope.utm_source,"utmTerm":$scope.utm_term}};var resultdata=[];resultdata.push(data);var saveRequirementData=CommonService.saveInvestmentRequirementData($scope,globals);saveRequirementData.then(function(pl){$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));if($scope.IGQuoteId>0){$scope.leadcreationfn1(1,productid);}});$scope.$root.showHome=false;$scope.$root.showmainloader=true;$scope.comparebuypopAnimation="display-none";$scope.$root.showloader=true;$scope.$root.popupbikepage=false;$scope.$root.showLoaderClass="display-visible";$scope.$root.productBox="display-none";$scope.showHeader="hide";$scope.$root.comparebuypop=false;$scope.$root.quotesheader=true;$scope.$root.Hi=true;$scope.$root.firstpageillusion=false;}}
$scope.leadcreationfn1=function(flag,productId){if(productId==4||productId==8){$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserName="123";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserPassword="123";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="123";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="123";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="123";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="123";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.Productid=4;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=4;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=4;}
else if(productId==3){$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserName="IGTERM2016";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserPassword="IG@TERM@2016";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGTERM2016";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@TERM@2016";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGTERM2016";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@TERM@2016";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.Productid=3;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=3;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=3;}
else if(productId==2){$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserName="IGHEALTH2016";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserPassword="IG@HEALTH@2016";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGHEALTH2016";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@HEALTH@2016";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGHEALTH2016";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@HEALTH@2016";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.Productid=2;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=2;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=2;}
else if(productId==5){$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserName="IGINVT17";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserPassword="IG@INVT@217";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGINVT17";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@INVT@217";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGINVT17";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@INVT@217";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.Productid=5;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=5;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=5;}
else if(productId==6){$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserName="IGPENSION17";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserPassword="IG@IG@PENSION@17@217";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGPENSION17";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@IG@PENSION@17@217";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGPENSION17";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@IG@PENSION@17@217";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.Productid=6;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=6;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=6;}
else if(productId==7){$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserName="IGCHILD17";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserPassword="IG@INVTIG@CHILD@17217";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGCHILD17";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@INVTIG@CHILD@17217";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGCHILD17";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@INVTIG@CHILD@17217";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.Productid=7;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=7;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=7;}
else if(productId==1){$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserName="IGTRAVEL";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.UserPassword="IG@TRAVEL";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGTRAVEL";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@TRAVEL";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGTRAVEL";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@TRAVEL";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.User.Productid=1;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=1;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=1;}
$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.leads.lead[0].leadId=$scope.IGQuoteId;$scope.carquotesleadrequest.RequestString.MobileValidationRequest.MobileValidation.isOTPRequire="No";$scope.carquotesleadrequest.RequestString.MobileValidationRequest.MobileValidation.Mobile=$scope.userMobile;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.MobileNo=$scope.userMobile;var response=CommonService.GetMobileVerificationWithOTPRequest($scope.carquotesleadrequest);response.then(function(result){console.log(result);result.data=[angular.fromJson(result.data)];$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.OTPValidation.Tokenid=result.data[0].data.MobileValidationResponse.Tokenid;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.OTPValidation.Mobile=$scope.userMobile;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.OriginPageid=0;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.Tokenid=result.data[0].data.MobileValidationResponse.Tokenid;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.IsCallBackRequire="false";if(result.data[0].data.MobileValidationResponse.Meassage=="OK"&&result.data[0].data.MobileValidationResponse.Valid=="Yes"){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.Tokenid=result.data[0].data.MobileValidationResponse.Tokenid;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.MobileNo=$scope.userMobile;$scope.leadcreationfn4($scope.leadcreaterequestdata,flag,productId);}
else{$scope.leadcreationfn4($scope.leadcreaterequestdata,flag,productId);}});}
$scope.leadcreationfn4=function(value,flag,productId){var response=CommonService.GetMobileVerificationWithOTPRequest1($scope.leadcreaterequestdata);response.then(function(result){console.log(result);result.data=[angular.fromJson(result.data)];if(result.data[0].data.Error.ErrorCode=="0"){if(productId==4){$window.location.href=QuotePageURL+"Car?CPID="+btoa($scope.IGQuoteId)+"&instantleadpop=2";}
else if(productId==8){$window.location.href=QuotePageURL+"Twowheeler?CPID="+btoa($scope.IGQuoteId)+"&instantleadpop=2";}
else if(productId==2){$window.location.href=QuotePageURL+"Health?CPID="+btoa($scope.IGQuoteId)+"&instantleadpop=2";}
else if(productId==3){$window.location.href=QuotePageURL+"Term?CPID="+btoa($scope.IGQuoteId)+"&instantleadpop=2";}
else if(productId==5){$window.location.href=QuotePageURL+"Investment?CPID="+btoa($scope.IGQuoteId)+"&instantleadpop=2";}
else if(productId==6){$window.location.href=QuotePageURL+"Pension?CPID="+btoa($scope.IGQuoteId)+"&instantleadpop=2";}
else if(productId==7){$window.location.href=QuotePageURL+"Child?CPID="+btoa($scope.IGQuoteId)+"&instantleadpop=2";}
else if(productId==1){$window.location.href=QuotePageURL+"Travel?CPID="+btoa($scope.IGQuoteId)+"&instantleadpop=2";}}});}
$scope.refreshSlider=function(){$timeout(function(){$scope.$broadcast('rzSliderForceRender');});}
$scope.calculateAgeInYear=function(insDOB,childDOB){var date1=new Date(insDOB);var date2=new Date(childDOB);var diffDays=parseInt((date2-date1)/(1000*60*60*24)/365);return Math.abs(diffDays);}
$scope.getchildquotes=function(){var flag=1;var productid=7;if($scope.selectedincome==undefined||$scope.selectedincome==''||$scope.selectedincome=='Y'){flag=0;$scope.incomeerror=true;}
else{$scope.incomeerror=false;}
if($scope.formdob==undefined||$scope.IGdate==undefined||$scope.IGmonth==undefined||$scope.IGyear==undefined){flag=0;$scope.dateerror=true;}
else{$scope.dateerror=false;}
if($scope.IGchilddate==undefined||$scope.IGchildmonth==undefined||$scope.IGchildyear==undefined){flag=0;$scope.datechilderror=true;}
else{$scope.datechilderror=false;}
var ParentAge=parseInt((ValidationFactory.AgeGroup($scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear)/12).toFixed(0));var ChildAge=parseInt((ValidationFactory.AgeGroup($scope.IGchilddate+"-"+$scope.IGchildmonth+"-"+$scope.IGchildyear)/12).toFixed(0));if(ParentAge<18||isNaN(ParentAge)){$scope.dateerror=true;flag=0;}
else{$scope.dateerror=false;}
if(ChildAge>17||isNaN(ChildAge)){$scope.datechilderror=true;flag=0;}
else{$scope.datechilderror=false;}
var AgeDiff=ParentAge-ChildAge;if(AgeDiff<18||isNaN(AgeDiff)){$scope.datechilderror=true;flag=0;}
else{$scope.datechilderror=false;}
if($scope.IGyear!=undefined){if($scope.IGyear.length<4){$scope.dateerror=true;flag=0;}}
else{$scope.dateerror=true;flag=0;}
if($scope.userMobile==undefined||$scope.userMobile==null||isNaN($scope.userMobile)==true||$scope.userMobile.toString().length<10||$scope.userMobile.toString().length>10){$scope.mobileerror=true;flag=0;}
if(flag==1){$scope.showbtnchildloader=true;$scope.insurerDOB=$scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear;$scope.childDOB=$scope.IGchilddate+"-"+$scope.IGchildmonth+"-"+$scope.IGchildyear;var currentPage=$location.absUrl();$scope.utm_source="";$scope.utm_campaign="";$scope.utm_term="";$scope.utm_medium="";$scope.DOBs=[];$scope.DOBs.push($scope.insurerDOB);$scope.DOBs.push($scope.childDOB);if(currentPage.indexOf("utm_source")!=-1){$scope.utm_source=currentPage.slice(currentPage.indexOf("utm_source=")+11).split("&")[0];}
if(currentPage.indexOf("utm_campaign")!=-1){$scope.utm_campaign=currentPage.slice(currentPage.indexOf("utm_campaign=")+13).split("&")[0];}
if(currentPage.indexOf("utm_term")!=-1){$scope.utm_term=currentPage.slice(currentPage.indexOf("utm_term=")+9).split("&")[0];}
if(currentPage.indexOf("utm_medium")!=-1){$scope.utm_medium=currentPage.slice(currentPage.indexOf("utm_medium=")+11).split("&")[0];}
$mixpanel.track("Form Submitted",{'Product':$scope.products[4].product,"UtmSource":$scope.utm_source,"Amount":$scope.selectedincome,"MaturityTerm":$scope.MaturityTerm,"Gender":$scope.formgender,"ChildDOB":$scope.childDOB,"ParentDOB":$scope.formdob});var data={"userdetails":{"IGQuoteId":0,"PartnerAgentId":"","PartnerLeadId":"","RequestType":"","Requests":[{"__type":"NonTermRequest:#ServiceEntities","DOBs":[$scope.DOBs],"Features":[{"__type":"BooleanFeature:#ServiceEntities","Id":$scope.AllowPartialWithdrawNameAmount,"Name":""},{"__type":"CustomFeature:#ServiceEntities","Id":$scope.AllowPartialWithdrawNameAmount,"Name":"","Value":0},],"Amount":$scope.txtActualIncome+","+$scope.selectedincome,"MaturityTerm":0,"Gender":$scope.gender,"MinRisk":1,"MaxRisk":5,"ProductId":7,"MaturityType":"HistoricalGrowth","PaymentDuration":""}],"ServiceTimeOut":"2147483647","utmCompaign":$scope.utm_campaign,"utmMedium":$scope.utm_medium,"utmSource":$scope.utm_source,"utmTerm":$scope.utm_term}};$scope.ChildDetails.push({Gender:$scope.formgender,annualIncome:$scope.selectedincome,insDOB:$scope.insurerDOB,ChildDOB:$scope.childDOB,ActualIncome:$scope.txtActualIncome,income:$scope.selectedincome});$scope.$root.showTopHeading=false;$scope.$root.showLogos=false;$scope.$root.showHome=false;$scope.showHeader="hide";$scope.comparebuypopAnimation="display-none";$scope.$root.showloader=true;var resultdata=[];resultdata.push(data);var saveRequirementData=CommonService.saveChildRequirementData($scope,globals);saveRequirementData.then(function(pl){$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));if($scope.IGQuoteId>0){$scope.leadcreationfn1(1,productid);}});}}
$scope.getbikequotespop=function(){var productid=8;var flag=1;if($scope.selectedbikemmv==null){flag=0;$scope.biketexterror=true;}
else{$scope.biketexterror=false;}
if($scope.selectedbikerto==null){flag=0;$scope.bikertoerror=true;}
else{$scope.bikertoerror=false;}
if($scope.bikereg==undefined){flag=0;$scope.popbikeregerror=true;}
else{$scope.popbikeregerror=false;}
if($scope.bikeexpiredpol==undefined){flag=0;$scope.popbikepolexperror=true;}
else{$scope.popbikepolexperror=false;}
if($scope.bikelastclaim==undefined&&$scope.bikeexpiredpol!=91){flag=0;$scope.popbikelastclaimerror=true;}
else{$scope.popbikelastclaimerror=false;}
if($scope.userMobile==undefined||$scope.userMobile==null||isNaN($scope.userMobile)==true||$scope.userMobile.toString().length<10||$scope.userMobile.toString().length>10){$scope.mobileerror=true;flag=0;}
if(flag==1){$scope.showbtnbikeloader=true;$scope.carclaim=$scope.bikelastclaim;$scope.carreg=$scope.bikereg;$scope.ncblogic();$scope.$root.scrollhide="whitebg";$mixpanel.track("Form Submitted",{'Product':$scope.products[1].product,"UtmSource":$scope.utm_source,"BreakingDays":$scope.bikeexpiredpol,"ClaimTaken":$scope.ClaimTaken,"ClaimedNCB":$scope.ClaimedNCB,"RequiredNCB":$scope.RequiredNCB,"ModelId":$scope.selectedbikemmv.modelid,"RTOCode":$scope.selectedbikerto.RTOCode,"RegistrationYear":$scope.bikereg});var data={"userdetails":{"UtmSource":$scope.UtmSource,"UtmCompaign":$scope.utmCompaign,"UtmTerm":$scope.utmTerm,"UtmMedium":$scope.utmMedium,"RegistrationNo":$scope.bikeregnumber,"VechileDetails":$scope.selectedbikemmv,"BikeExpiredpol":$scope.bikeexpiredpol,"ProductName":"Bike","CityList":$scope.selectedbikerto,"ClaimPercent":$scope.bikelastclaim,"RegYear":$scope.bikereg,"EngineNo":$scope.bikeengineno,"ChasisNo":$scope.bikechasisno,"UserName":$scope.username,"UserMobile":$scope.usermobile,"UserEmail":$scope.useremail}};console.log(data);var resultdata=[];resultdata.push(data);var saveRequirementData=CommonService.saveBikeRequirementData($scope,globals);saveRequirementData.then(function(pl){$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));if($scope.IGQuoteId>0){$scope.leadcreationfn1(1,productid);}});}}
$scope.gethealthquotespop=function(){var flag=1;var productid=2;if($scope.selectedItem2==null){flag=0;$scope.cityerror=true;}
else{$scope.cityerror=false;}
if(parseInt($scope.selectedadult)>2||$scope.selectedadult==undefined||parseInt($scope.selectedadult)==0){flag=0;$scope.adulterror=true;$scope.adulterrortext="No of Adult 1 or 2";}
else{$scope.adulterror=false;$scope.adulterrortext="";}
if(parseInt($scope.selectedchild)>4||$scope.selectedchild==undefined||$scope.selectedchild==''){flag=0;$scope.childerror=true;}
else{$scope.childerror=false;}
if($scope.formdob==undefined||$scope.IGdate==undefined||$scope.IGmonth==undefined||$scope.IGyear==undefined){flag=0;$scope.dateerror=true;}
else{$scope.dateerror=false;}
if($scope.userMobile==undefined||$scope.userMobile==null||isNaN($scope.userMobile)==true||$scope.userMobile.toString().length<10||$scope.userMobile.toString().length>10){$scope.mobileerror=true;flag=0;}
if(flag==1){$scope.showbtnhealthloader=true;$scope.$root.scrollhide="whitebg";$scope.formdob1=$scope.IGyear+'-'+$scope.IGmonth+'-'+$scope.IGdate;var currentPage=$location.absUrl();$scope.utm_source="";$scope.utm_campaign="";$scope.utm_term="";$scope.utm_medium="";if(currentPage.indexOf("utm_source")!=-1){$scope.utm_source=currentPage.slice(currentPage.indexOf("utm_source=")+11).split("&")[0];}
if(currentPage.indexOf("utm_campaign")!=-1){$scope.utm_campaign=currentPage.slice(currentPage.indexOf("utm_campaign=")+13).split("&")[0];}
if(currentPage.indexOf("utm_term")!=-1){$scope.utm_term=currentPage.slice(currentPage.indexOf("utm_term=")+9).split("&")[0];}
if(currentPage.indexOf("utm_medium")!=-1){$scope.utm_medium=currentPage.slice(currentPage.indexOf("utm_medium=")+11).split("&")[0];}
if(flag==1){$mixpanel.track('Form Submitted',{'Product':$scope.products[2].product,"UtmSource":$scope.utm_source,"CityId":parseInt(($scope.selectedItem2.cityid.split(',')[0]).trim()),"DOB":$scope.formdob,"Gender":$scope.gender,"NumberOfAdults":parseInt($scope.selectedadult),"NumberOfChildren":parseInt($scope.selectedchild)});var data={"userdetails":{"Adult":parseInt($scope.selectedadult),"Child":parseInt($scope.selectedchild),"Gender":$scope.gender,"Birthdate":$scope.formdob,"Citylist":$scope.selectedItem2,"Product":"Health","Username":$scope.username,"Usermobile":$scope.usermobile,"Useremail":$scope.useremail,"UtmSource":$scope.utm_source,"UtmCampaign":$scope.utm_campaign,"UtmTerm":$scope.utm_term,"UtmMedium":$scope.utm_medium}};var resultdata=[];resultdata.push(data);var saveRequirementData=CommonService.saveHealthRequirementData($scope,globals);saveRequirementData.then(function(pl){$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));if($scope.IGQuoteId>0){$scope.leadcreationfn1(1,productid);}});}}}
$scope.getquotespop1=function(flag1){if($scope.carNo.registrationNo!=undefined&&$scope.patternFails!=true&&($scope.claimtaken!=undefined||$scope.carbreakingexp==1)){$scope.carProceedBtnLoader=true;if($scope.selectedItem!=null){$scope.lastclaimtaken=$scope.lastclaimlist;$scope.lastclaimtaken1=$scope.lastclaimlist;$scope.carpopncbtag="NCB % in your existing policy?";if($scope.claimtaken=="No~50"){$scope.showcarncb=true;var ncbyear=$scope.year-$scope.yearOfRegistration;if(ncbyear>=6){ncbyear=6;$scope.carrequiredncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];}
else{$scope.carrequiredncb=$scope.lastclaimlist[ncbyear].value.split("~")[1];}
$scope.carclaim=$scope.lastclaimlist[ncbyear-1].value;$scope.carclaimtext=$scope.lastclaimlist[ncbyear-1].text;$scope.carclaimedncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];}
else if($scope.claimtaken=="Yes~0"){$scope.carclaim=$scope.lastclaimlist[0].value;$scope.carclaimtext=$scope.lastclaimlist[0].text;$scope.carclaimedncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.showcarncb=false;}
else if($scope.claimtaken=="No~20"){$scope.showcarncb=true;$scope.carclaim=$scope.lastclaimlist[0].value;$scope.carclaimtext=$scope.lastclaimlist[0].text;$scope.carclaimedncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[1].value.split("~")[1];}
else if($scope.claimtaken=="No~25"){$scope.showcarncb=true;$scope.carclaim=$scope.lastclaimlist[1].value;$scope.carclaimtext=$scope.lastclaimlist[1].text;$scope.carclaimedncb=$scope.lastclaimlist[1].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[2].value.split("~")[1];}
else if($scope.claimtaken=="No~35"){$scope.showcarncb=true;$scope.carclaim=$scope.lastclaimlist[2].value;$scope.carclaimtext=$scope.lastclaimlist[2].text;$scope.carclaimedncb=$scope.lastclaimlist[2].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[3].value.split("~")[1];}
else if($scope.claimtaken=="No~45"){$scope.showcarncb=true;$scope.carclaim=$scope.lastclaimlist[3].value;$scope.carclaimtext=$scope.lastclaimlist[3].text;$scope.carclaimedncb=$scope.lastclaimlist[3].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[4].value.split("~")[1];}
$scope.forcarwidgetpercent=$scope.carclaim;if($scope.forcarwidgetpercent=="Yes~0"&&$scope.claimtaken=="No~50"){$scope.forcarwidgetpercent="No~0"}}
if($scope.carbreakingexp==1){$scope.carrequiredncb=0;$scope.carclaimedncb=0;$scope.showcarncb=false;$scope.$root.showcarncb=false;$scope.ClaimTaken=true;$scope.carclaimedncb=0;}
else{$scope.ClaimTaken=angular.lowercase($scope.claimtaken.split("~")[0].trim())=="no"?"false":"true";}
$scope.carpopheadline="Please Confirm your";$scope.showrtocity=false;$scope.showrtofield=false;$scope.maincarpage=false;$scope.carpolicyexpdropdown=false;$scope.ncbdisabled=false;;$scope.carpopncbtag="NCB % in your existing policy?";$scope.regerror=false;$scope.byreg=true;$scope.carerror=false;$scope.cityerror=false;$scope.popcarregerror=false;$scope.popcarclaimerror=false;$scope.popcarcnglpgerror=false;$scope.popcarcnglpgvalueerror=false;$scope.carpopup=true;$scope.carmaindetails=false;if(flag1==undefined){$scope.$root.popupcarpage=true;}
else{$scope.getlinkpop();}}
else{if($scope.patternFails==true||$scope.regerror==true){$scope.carpopup=false;$scope.carmaindetails=true;flag=1;}}
$scope.carProceedBtnLoader=false;}
$scope.getquotespop=function(flag1){var flag=0;$scope.showrtiomobile=false;if($scope.fastlanenohit==true){$scope.getlinkpop();}
if($scope.carNo.registrationNo==undefined||$scope.patternFails==true){$scope.patternFails=true;$scope.regnoerrortext="Enter correct car registration no.";flag=1;}
else{$scope.patternFails=false;$scope.regnoerrortext="";}
if($scope.claimtaken==undefined&&($scope.carbreakingexp!=1||$scope.carbreaking==1)){$scope.regerror=true;flag=1;}
else{$scope.regerror=false;}
var hit=0;if($scope.carNo.registrationNo!=undefined&&$scope.patternFails!=true&&($scope.claimtaken!=undefined||$scope.carbreakingexp==1)){if($scope.fastlaneresult!=undefined){hit=1;$scope.fastlaneresult=undefined;$scope.getquotespop1();}
else{$scope.carProceedBtnLoader=true;$timeout(function(){if($scope.fastlaneresult!=undefined){hit=1;$scope.fastlaneresult=undefined;$scope.getquotespop1();}
else{$scope.carProceedBtnLoader=false;if($scope.carNo.registrationNo!=undefined&&$scope.patternFails!=true&&($scope.claimtaken!=undefined||$scope.carbreakingexp==1)){$scope.getlinkpop();}}},3000);}}}
$scope.getformbikequotespop=function(flag1){var flag=0;var flag1=0;$scope.showrtiomobile=false;$scope.showrtocity=false;$scope.bikeProceedBtnLoader=true;if($scope.bikeNo.registrationNo==undefined||$scope.patternFails1==true){$scope.patternFails1=true;$scope.regnoerrortext="Enter correct bike registration no.";flag=1}else{$scope.patternFails1=false;$scope.regnoerrortext=""}
if($scope.bikeNo.registrationNo!=undefined&&$scope.patternFails1!=true&&$scope.bikeexpiredpol!=undefined&&$scope.bikenoresult==false){$scope.showbikepolicyexpired=false;$scope.$root.popupbikepage=true;$scope.bikepopup=true;$scope.bikemaindetails=false;$scope.biketexterror=false;$scope.bikertoerror=false;$scope.showrtocity=false;$scope.popbikeregerror=false;$scope.popbikepolexperror=false;$scope.popbikelastclaimerror=false;$scope.bikeProceedBtnLoader=false;var flag1=1}else{if($scope.patternFails1==true||$scope.popbikelastclaimerror==true){$scope.bikepopup=false;$scope.bikemaindetails=true;$scope.bikeProceedBtnLoader=false;flag=1}}
$timeout(function(){if($scope.bikenoresult==true){$scope.showrtocity=true;$scope.bikeProceedBtnLoader=false;$scope.getbikepopup()}else if($scope.bikenoresult==false&&flag1==0){$scope.showbikepolicyexpired=false;$scope.$root.popupbikepage=true;$scope.bikepopup=true;$scope.bikemaindetails=false;$scope.biketexterror=false;$scope.bikertoerror=false;$scope.showrtocity=false;$scope.popbikeregerror=false;$scope.popbikepolexperror=false;$scope.popbikelastclaimerror=false;$scope.bikeProceedBtnLoader=false;}},3000)}
$scope.backtotravel=function(){$scope.travelProceedBtnLoader=false;$scope.$root.travelfirstpop=true;$scope.$root.travelsecondpop=false;$scope.travelpopFirst="display-visible";}
$scope.backtocar=function(){$scope.carProceedBtnLoader=false;$scope.carpopup=false;$scope.carmaindetails=true;}
$scope.getcarpopup=function(){$scope.carpopup=true;$scope.carmaindetails=false;}
$scope.getcarlink=function(flag){$scope.ncbdirectlist=[];$scope.showmobileheader=false;$scope.carpopup=true;$scope.carmaindetails=false;for(i=0;i<$scope.regyear.length;i++){$scope.ncbdirectlist.push($scope.regyear[i]);}
$scope.carpopheadline="Please Enter Your";$scope.carpopncbtag="Last Claim Taken";if(flag!=false){$scope.showheader=false;$scope.showrtocity=true;$scope.maincarpage=true;$scope.ncbdisabled=true;$scope.$root.popupcarpage=true;$scope.$root.scrollhide="scrollhides";$scope.showchat=false;$scope.showchat1=true;$scope.showchatmsg=false;$scope.showcarncb=true;}
$scope.lastclaimtaken=$scope.ncbdirectlist;$scope.bodyscroll="noscroll";$scope.byreg=false;}
$scope.getlinkpop=function(flag){$scope.popupformob=false;$scope.ncbdirectlist=[];for(i=0;i<$scope.regyear.length;i++){$scope.ncbdirectlist.push($scope.regyear[i]);}
$scope.carpopheadline="Please Enter Your";$scope.carpopncbtag="Last Claim Taken";$scope.carpopup=true;$scope.carerror=false;$scope.cityerror=false;$scope.carpolicyexpdropdown=true;$scope.popcarregerror=false;$scope.popcarclaimerror=false;$scope.popcarcnglpgerror=false;$scope.popcarcnglpgvalueerror=false;$scope.carregnumber=undefined;$scope.carengineno=undefined;$scope.carchasisno=undefined;$scope.carmaindetails=false;$scope.$root.backpop=true;$scope.showrtocity=true;$scope.showrtiomobile=true;if(flag!=false){$scope.showheader=false;$scope.showrtocity=true;$scope.maincarpage=true;$scope.ncbdisabled=true;$scope.$root.popupcarpage=true;$scope.showchat=false;$scope.showchat1=true;$scope.showchatmsg=false;$scope.showcarncb=true;}
$scope.lastclaimtaken=$scope.ncbdirectlist;$scope.lastclaimtaken1=$scope.ncbdirectlist;$scope.bodyscroll="noscroll";$scope.byreg=false;$scope.carpopup=true;$scope.carmaindetails=false;}
$scope.backtobike=function(){$scope.bikeProceedBtnLoader=false;$scope.bikepopup=false;$scope.bikemaindetails=true;}
$scope.getIndex=function(flag){$mixpanel.track('IG Logo');$window.location.href=globals.landingPage;};$scope.getbikelink=function(){$scope.showbikepolicyexpired=true;$scope.$root.popupbikepage=true;$scope.$root.scrollhide="scrollhides";$scope.bikepopup=true;}
$scope.getbikepopup=function(){$scope.bikepopup=true;$scope.bikeregnumber=undefined;$scope.bikeengineno=undefined;$scope.bikechasisno=undefined;$scope.bikemaindetails=false;$scope.$root.backpop=true;$scope.biketexterror=false;$scope.bikertoerror=false;$scope.showrtocity=true;$scope.showrtiomobile=true;$scope.popbikeregerror=false;$scope.popbikepolexperror=false;$scope.popbikelastclaimerror=false;}
$scope.closereferpop=function(){$scope.showrefferedpop=false;}
$scope.init=function(){var currentURL=$location.absUrl();if(currentURL.indexOf("dev.indiacover360.com")!=-1){globals.RedirectURL="https://dev.indiacover360.com/Application/";globals.ServiceURL="https://api.indiacover360.com";globals.IGwServiceURL="https://api.indiacover360.com";globals.UIURL="https://dev.indiacover360.com/HomePage";globals.landingPage="https://dev.indiacover360.com";globals.mainPage="https://dev.indiacover360.com/Application/?CPID=";}
else if(currentURL.indexOf("qa.indiacover360.com")!=-1){globals.RedirectURL="https://qa.indiacover360.com/Application/";globals.ServiceURL="https://apiqa.indiacover360.com";globals.IGwServiceURL="https://apiqa.indiacover360.com";globals.UIURL="https://qa.indiacover360.com/HomePage";globals.landingPage="https://qa.indiacover360.com";globals.mainPage="https://qa.indiacover360.com/Application/?CPID=";}
else if(currentURL.indexOf("insurejoy.com")!=-1){globals.RedirectURL="https://www.insurejoy.com/Application/";globals.ServiceURL="https://api.insurejoy.com";globals.IGwServiceURL="https://api.insurejoy.com";globals.UIURL="https://www.insurejoy.com/HomePage";globals.landingPage="https://www.insurejoy.com";globals.mainPage="https://www.insurejoy.com/Application/?CPID=";}
QuotePageURL=globals.RedirectURL;$scope.templateheader=$sce.trustAsResourceUrl(globals.landingPage+"/header.html");$scope.templatefooter=$sce.trustAsResourceUrl(globals.landingPage+"/footer.html");$scope.$root.carfuelcontainervalue=false;$scope.$root.entercngkitvalue=0;$scope.$root.showmainloader=false;if(currentURL.indexOf("car")!=-1||currentURL.indexOf("Car")!=-1){$scope.carlist();$scope.citylist();}
else if(currentURL.indexOf("two-wheeler")!=-1||currentURL.indexOf("Twowheeler")!=-1||currentURL.indexOf("Two-wheeler")!=-1||currentURL.indexOf("Two-Wheeler")!=-1){$scope.bikecitylist();$scope.bikealldatalist();$scope.bikepolicyexp();}
else if(currentURL.indexOf("health")!=-1||currentURL.indexOf("Health")!=-1){$scope.commoncity1();}
else if(currentURL.indexOf("term")!=-1||currentURL.indexOf("Term")!=-1){$scope.commoncity1();}
else if(currentURL.indexOf("travel")!=-1||currentURL.indexOf("Travel")!=-1){$scope.AllDestinationlist();}
if(($location.path()=="/"&&currentURL.indexOf("CPID")==-1)||$location.path()=="/Home"){$scope.$root.mastercontent=true;$scope.$root.firstpageillusion=true;$scope.$root.showmainloader=false;$scope.$root.showNavbar=true;$scope.$root.TopHeading=true;$scope.$root.showHome=true;$scope.$root.Logos=true;$scope.$root.showotherpageheader=false;}
$scope.$root.quotesheader=false;$scope.userincomedropdown=TermFactory.userActualIncome1($scope);$scope.userincometemp=$scope.userActualIncome;$scope.$root.showHeaderClass="display-visible";$scope.$root.showNavbar=true;$scope.showHeader="show";$scope.$root.scrollhide="home-bg bodymain";$scope.lastclaimlist=[{text:"0 %",value:"Yes~0"},{text:"20 %",value:"No~20"},{text:"25 %",value:"No~25"},{text:"35 %",value:"No~35"},{text:"45 %",value:"No~45"},{text:"50 %",value:"No~50"}];$scope.regyearlist=[];for(i=1;i<=14;i++){$scope.regyearlist.push({value:$scope.year-i,text:$scope.year-i});}
$scope.bikeregyearlist=[{value:"2007",text:"2007"},{value:"2008",text:"2008"},{value:"2009",text:"2009"},{value:"2010",text:"2010"},{value:"2011",text:"2011"},{value:"2012",text:"2012"},{value:"2013",text:"2013"},{value:"2014",text:"2014"},{value:"2015",text:"2015"}];$scope.previoussearchshow=true;$timeout(function(){$scope.showchatmsg=true;},2500);$scope.SetMaxTravelEndDate();$scope.previoussearchtime=$scope.date.getDate()+"-"+($scope.date.getMonth()+1)+"-"+$scope.date.getFullYear();var temp1=$location.absUrl().split('&');console.log($location.absUrl());console.log(temp1);$scope.$root.showloader=false;if(temp1.length>=2){if(temp1[1].split('=')[0]=="utm_source"){$scope.utmsourcedata=temp1[1].split('=')[1];}
if(temp1.length>=3){if(temp1[2].split('=')[0]=="utm_medium"){$scope.utmmediumdata=temp1[2].split('=')[1];}}
if(temp1.length>=4){if(temp1[3].split('=')[0]=="utm_campaign"){$scope.utmcampaigndata=temp1[3].split('=')[1];}}
if(temp1.length>=5){if(temp1[4].split('=')[0]=="utm_term"){$scope.utmtermdata=temp1[4].split('=')[1];}}
if(temp1.length>=7){if(temp1[6].split('=')[0]=="partnerleadid"){$scope.utmpartnerleadiddata=temp1[6].split('=')[1];}}
if(temp1.length>=8){if(temp1[7].split('=')[0]=="partneragentid"){$scope.utmpartneragentiddata=temp1[7].split('=')[1];}}}
var temp1=$location.absUrl().split('?');console.log(temp1);console.log(temp1.length);if(temp1.length==2){if(temp1[1].toLowerCase()=="prod=health"){$scope.maintabform(3);}
else if(temp1[1].toLowerCase()=="prod=healthmvc"){$scope.healthmvc=true;$scope.maintabform(3);}
else if(temp1[1].toLowerCase()=="prod=term"){$scope.maintabform(4);}
else if(temp1[1].toLowerCase()=="prod=child"){$scope.maintabform(5);}
else if(temp1[1].toLowerCase()=="prod=investment"){$scope.maintabform(6);}
else if(temp1[1].toLowerCase()=="prod=pension"){$scope.maintabform(7);}
else if(temp1[1].toLowerCase()=="prod=bike"){$scope.maintabform(2);}
else{console.log($scope.ProposerName);var temp2=temp1[1].split('=');if(temp2[0].toLowerCase()=="shareid"){console.log("yes");$scope.showrefferedpop=true;}}}
console.log(temp1);$scope.flaclaim($scope.year-6);console.log("Himanshu");}
$scope.commoncity1=function(flag){if(flag==1){$scope.CityValue=false;}
else{$scope.CityValue=true;}
$scope.citylisttemp=CommonService.citylist($scope);$scope.citylisttemp.then(function(result){console.log("Cities List");console.log(result);result.data=angular.fromJson(result.data);var commoncitylist11=result.data;$scope.commoncitystate=[];for(var i=0;i<commoncitylist11.length;i++){var temp={cityid:commoncitylist11[i].CityId+", "+commoncitylist11[i].StateId,cityname:commoncitylist11[i].City+", "+commoncitylist11[i].State,cityCategory:commoncitylist11[i].CityCategory};$scope.commoncitystate.push(temp);}
var cities=$filter('orderBy')($scope.commoncitystate,'cityname');$scope.commoncitystate=cities;if(flag==1){commoncitylist11=$filter('filter')($scope.commoncitystate,{cityname:$scope.searchText});if(commoncitylist11.length==0){$scope.citymatch="Not match found......";}
else{$scope.citymatch=" We are fetching more cities.Continue Typing your city name...";}}});$scope.cityplaceholder="Type and select city...";$scope.disablecity=false;}
$scope.updatedallcity=function(){var test=$filter('filter')($scope.commoncitystate,{cityname:$scope.searchText});if(test.length==0&&$scope.CityValue==true){$scope.commoncity1(1);}}
$scope.closemblpop=function(item,flag){if(item==1){$scope.showcitypop=false;$scope.carmakemblpop=false;$scope.citymblpop=false;$scope.carrtomblpop=false;$scope.bikemakemblpop=false;$scope.bikertomblpop=false;$scope.traveldestination=false;}
if(flag==1){if(item==2){$scope.showcitypop=true;$scope.citymblpop=true;$scope.myInputFocus=true;$scope.termannualmblpop=false;}
else{$scope.showcitypop=false;$scope.citymblpop=false;$scope.selectedItem2=item;$scope.selectedcitynampop=item.cityname;$scope.checkcityerrors();}}
if(flag==2){if(item==2){$scope.showcitypop=true;$scope.carmakemblpop=true;$scope.myInputFocusCarMake=true;}
else{$scope.showcitypop=false;$scope.carmakemblpop=false;$scope.selectedItem=item;$scope.selectedcarmakepop=item.ModelName;$scope.checkcarerror();}}
if(flag==3){if(item==2){$scope.showcitypop=true;$scope.carrtomblpop=true;$scope.myInputFocusCarRto=true;}
else{$scope.showcitypop=false;$scope.carrtomblpop=false;$scope.selectedItem1=item;$scope.selectedcarrtopop=item.RTOCode;$scope.checkcityerror();}}
if(flag==4){if(item==2){$scope.showcitypop=true;$scope.bikemakemblpop=true;$scope.myInputFocusBikeMake=true;}
else{$scope.showcitypop=false;$scope.bikemakemblpop=false;$scope.selectedbikemmv=item;$scope.selectedbikemakepop=item.bikename;$scope.checkbikelisterror();}}
if(flag==5){if(item==2){$scope.showcitypop=true;$scope.bikertomblpop=true;$scope.myInputFocusBikeRto=true;}
else{$scope.showcitypop=false;$scope.bikertomblpop=false;$scope.selectedbikerto=item;$scope.selectedbikertopop=item.cityname;$scope.checkbikertoerror();}}
if(flag==6){if(item==2){$scope.showcitypop=true;$scope.termannualmblpop=true;$scope.myInputFocusTermIncome=true;$scope.updateincome();}
else{$scope.showcitypop=false;$scope.termannualmblpop=false;$scope.txtActualIncome=item;$scope.selectedtermincomepop=item.ActualIncomeText;$scope.checktermincomeerror();}}
if(flag==7){if(item==2){$scope.showcitypop=true;$scope.traveldestination=true;$scope.myInputFocustravellingdest=true;}
else{$scope.showcitypop=false;$scope.traveldestination=false;$scope.selectedDestinationItem=item;$scope.checkDestinationerror();}}}
$scope.carmakename=function(item){$scope.selectedItem=item;$scope.popupformob=false;}
$scope.checkcarbreaking=function(flag){if(flag==1||flag==3){if($scope.carbreaking==0){if($scope.carbreakingexp==0){$scope.showcarncb=true;$scope.showfastlaneclaimlast=true;$scope.$root.showcarncb=true;}
else{$scope.showcarncb=false;$scope.showfastlaneclaimlast=false;$scope.$root.showcarncb=false;}
$scope.showcarexpired=true;$scope.carbreakingexp=0;}
else{$scope.showcarncb=true;$scope.showfastlaneclaimlast=true;$scope.$root.showcarncb=true;$scope.showcarexpired=false;}}
else if(flag==2||flag==4){if($scope.carbreakingexp==0){$scope.showcarncb=true;$scope.showfastlaneclaimlast=true;$scope.$root.showcarncb=true;if(flag==4){$scope.showcarncb=true;$scope.$root.showcarncb=true;}}
else{if(flag==4){$scope.showcarncb=false;$scope.$root.showcarncb=false;}
$scope.showfastlaneclaimlast=false;$scope.$root.showcarncb=false;$scope.showcarncb=false;}}}
$scope.checkcarerror=function(flag){$scope.carlabel=true;if($scope.selectedItem==null||$scope.selectedItem==undefined||$scope.selectedItem==""){flag=1;$scope.carlabel=false;}
else{$scope.carerror=false;$scope.carlabel=true;$scope.formcarwidget=$scope.selectedItem.ModelName;var temp1=$scope.selectedItem.ModelName.split(",");if(temp1[1].trim()=="DIESEL"){$scope.carkitstatus=undefined;$scope.carfuelcontainer=false;$scope.formddlkit="Kit0";$scope.$root.entercngkitvalue=0;$scope.$root.carfuelcontainervalue=false;}
else if(temp1[1].trim()=="CNG"){$scope.carkitstatus=undefined;$scope.carfuelcontainer=false;$scope.$root.entercngkitvalue=0;$scope.formddlkit="Kit0";}
else if(temp1[1].trim()=="LPG"){$scope.carkitstatus=undefined;$scope.carcnglpg=$scope.carpoplpg;$scope.carfuelcontainer=true;}
else if(temp1[1].trim()=="PETROL"){$scope.carkitstatus=undefined;$scope.carcnglpg=$scope.carpoppetrol;$scope.carfuelcontainer=true;}}}
$scope.checkcityerror=function(flag){$scope.citylabel=true;if($scope.selectedItem1==null){flag=1;$scope.citylabel=false;}
else{$scope.cityerror=false;$scope.citylabel=true;$scope.formcarrto=$scope.selectedItem1.CityName;console.log("carrto");}}
$scope.fnGetregyear=function(){$scope.arrayregyearlist=[{id:"0",value:"Registration Year"},{id:"2015",value:"2015"},{id:"2014",value:"2014"},{id:"2013",value:"2013"},{id:"2012",value:"2012"},{id:"2011",value:"2011"},{id:"2010",value:"2010"},{id:"2009",value:"2009"},{id:"2008",value:"2008"},{id:"2007",value:"2007"}];}
$scope.flaclaim=function(yom,flag){var arrNeverNCB=[50,50,50,50,45,35,25,20,0];var arrYearNCB=[0,20,25,35,45,50,50,50,50];var monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];var bool=true;var year=$scope.year.toString();$scope.regyear=[];var vddlregyear=0;if(yom==year.trim()){var val='No~'+arrNeverNCB[vddlregyear-1];var option={value:val,text:"Never"};$scope.regyear.push(option);}
else if(yom=="0"){var option={value:"Claim Last Taken",text:"Claim Last Taken"};$scope.regyear.push(option);}
else{var findYear=year-yom;var val='No~'+arrNeverNCB[vddlregyear+1];var option={value:val,text:"Never"};$scope.regyear.push(option);var k=2;var s=1;var j=0;for(var i=findYear-1;i>=0;i--){if(bool==true){var val='Yes~'+arrYearNCB[0];var text="Less than"+" "+(findYear-i)+" "+"Year ago";var option={value:val,text:text};$scope.regyear.push(option);bool=false;}
else{var val='No~'+arrYearNCB[k-2];if($scope.date.getMonth()!=0){var text=(monthNames[$scope.date.getMonth()])+" "+(year-(s+1))+" "+"to"+" "+(monthNames[$scope.date.getMonth()-1])+" "+(year-(j+1));}
else{var text=(monthNames[$scope.date.getMonth()])+" "+(year-(s+1))+" "+"to"+" "+(monthNames[11])+" "+(year-(s+1));}
if((year-(s+1))!=year-6){var option={value:val,text:text};$scope.regyear.push(option);}
s++;j++;bool=false;}
k++;}}
$scope.regyear1=$scope.regyear;}
$scope.bikecitylist=function(){$scope.bikertoapilist=CommonService.bikertoservice();$scope.bikertoapilist.then(function(result){result.data=angular.fromJson(result.data);$scope.bikertoapidata=result.data;$scope.bikecitystate1=[];for(var i=0;i<$scope.bikertoapidata.length;i++){var temp={cityid:$scope.bikertoapidata[i].CityId,stateid:$scope.bikertoapidata[i].StateId,RTOCode:$scope.bikertoapidata[i].RTOCode,cityname:$scope.bikertoapidata[i].RTOCity};$scope.bikecitystate1.push(temp);}
$scope.bikecitystate=[{cityid:"123",stateid:"10",RTOCode:"DL3S",cityname:"(DL3S) Delhi-Sheikh Sarai,Delhi"},{cityid:"121",stateid:"10",RTOCode:"DL1S",cityname:"(DL1S) Delhi-Mall Road,Delhi"},{cityid:"662",stateid:"34",RTOCode:"UP14",cityname:"(UP14) Ghaziabad,Uttar Pradesh"},{cityid:"192",stateid:"13",RTOCode:"HR26",cityname:"(HR26) Gurgaon,Haryana"},{cityid:"572",stateid:"29",RTOCode:"RJ14",cityname:"(RJ14) Jaipur,Rajasthan"},{cityid:"1046",stateid:"21",RTOCode:"MH47",cityname:"(MH47) Mumbai,Maharashtra"},{cityid:"597",stateid:"31",RTOCode:"TN01",cityname:"(TN01) Chennai,TAMILNADU"},{cityid:"140",stateid:"12",RTOCode:"GJ01",cityname:"(GJ01) Ahmedabad,Gujarat"},{cityid:"730",stateid:"35",RTOCode:"WB02",cityname:"(WB02) Kolkata,West Bengal"},{cityid:"416",stateid:"21",RTOCode:"MH12",cityname:"(MH12) Pune,Maharashtra"},{cityid:"959",stateid:"17",RTOCode:"KA41",cityname:"(KA41) Bangalore,Karnataka"},{cityid:"9",stateid:"2",RTOCode:"AP09",cityname:"(AP09) Hyderabad,Andhra Pradesh"}];});}
$scope.updatedallbikerto=function(){console.log($scope.bikecitystate1);$scope.bikecitystate=$scope.bikecitystate1;}
$scope.bikealldatalist=function(){$scope.bikemakemodelapilist=CommonService.bikemakemodelservice();$scope.bikemakemodelapilist.then(function(result){result.data=angular.fromJson(result.data);$scope.bikemakemodelapidata=result.data;console.log("jainbike");$scope.bikecitystates1=[];for(var i=0;i<$scope.bikemakemodelapidata.length;i++){var temp={bikename:$scope.bikemakemodelapidata[i].ModelName,makeid:$scope.bikemakemodelapidata[i].MakeId,modelid:$scope.bikemakemodelapidata[i].ModelId};$scope.bikecitystates1.push(temp);}
console.log($scope.bikecitystates1);$scope.bikecitystates=[{bikename:"BAJAJ PULSAR 150 CC, Petrol, 2, 150",makeid:"3",modelid:"84"},{bikename:"ROYAL ENFIELD CLASSIC 500, Petrol, 2, 499",makeid:"10",modelid:"31"},{bikename:"BAJAJ DISCOVER 125 CC, Petrol, 2, 125",makeid:"3",modelid:"57"},{bikename:"BAJAJ AVENGER 200 CC, Petrol, 2, 200",makeid:"3",modelid:"103"},{bikename:"HERO HONDA PASSION PRO KICK, Petrol, 2, 97",makeid:"2",modelid:"376"},{bikename:"HERO HONDA SPLENDOR SP EDITION, Petrol, 2, 125",makeid:"2",modelid:"448"},{bikename:"TVS JUPITER STALLION, Petrol, 2, 110",makeid:"4",modelid:"470"},{bikename:"TVS APACHE RTR 160 CC, Petrol, 2, 160",makeid:"4",modelid:"404"},{bikename:"HERO HONDA CD DELUXE SPOKE, Petrol, 2, 100",makeid:"2",modelid:"452"},{bikename:"YAMAHA FZ V2, Petrol, 2, 153",makeid:"1",modelid:"552"},{bikename:"HONDA CB UNICORN 160 2ID, Petrol, 2, 160",makeid:"11",modelid:"179"},{bikename:"HONDA ACTIVA 110 CC, Petrol, 2, 109",makeid:"11",modelid:"49"},{bikename:"HONDA ACTIVA DISC 125, Petrol, 2, 125",makeid:"11",modelid:"55"}];});}
$scope.updatedallbikelist=function(){$scope.bikecitystates=$scope.bikecitystates1;}
$scope.citylist=function(){$scope.carupdatedrtoapilist=CommonService.carupdatedrtoservice();$scope.carupdatedrtoapilist.then(function(result){result.data=angular.fromJson(result.data);console.log("himanshu jain");console.log(result);$scope.citystate1=[];$scope.citystate1=result.data;$scope.citystate=[{CityName:"(DL3C) Delhi-Sheikh Sarai, Delhi",RTOCode:"DL3C",CityCode:123,StateCode:10},{CityName:"(UP16) GAUTAMBUDDH NAGAR, Uttar Pradesh",RTOCode:"UP16",CityCode:664,StateCode:34},{CityName:"(HR55) GURGAON, Haryana",RTOCode:"HR55",CityCode:217,StateCode:13},{CityName:"(UP14) GHAZIABAD, Uttar Pradesh",RTOCode:"UP14",CityCode:662,StateCode:34},{CityName:"(MH47) Mumbai, Maharashtra",RTOCode:"MH47",CityCode:1046,StateCode:21},{CityName:"(MH48) Mumbai, Maharashtra",RTOCode:"MH48",CityCode:1047,StateCode:21},{CityName:"(TN01) CHENNAI, TAMILNADU",RTOCode:"TN01",CityCode:597,StateCode:31},{CityName:"(GJ1) Ahmedabad, Gujarat",RTOCode:"GJ1",CityCode:1387,StateCode:12},{CityName:"(RJ14) JAIPUR, Rajasthan",RTOCode:"RJ14",CityCode:572,StateCode:29},{CityName:"(MH12) PUNE, Maharashtra",RTOCode:"MH12",CityCode:416,StateCode:21},{CityName:"(WB02) KOLKATA, West Bengal",RTOCode:"WB02",CityCode:730,StateCode:35},{CityName:"(KA51) BANGALORE, Karnataka",RTOCode:"KA51",CityCode:349,StateCode:17}];});}
$scope.updatedallcarrto=function(){$scope.citystate=$scope.citystate1;}
$scope.carlist=function(){$scope.carupdatedmakemodelapilist=CommonService.carupdatedmakemodelservice();$scope.carupdatedmakemodelapilist.then(function(result){result.data=angular.fromJson(result.data);console.log("himanshu jain");console.log(result);$scope.carlistdata1=[];$scope.cartemplist=result.data;$scope.carlistdata1=result.data;$scope.carlistdata=[{ModelName:"Maruti Suzuki Swift Dzire LDI, DIESEL, 5, 1248",MakeId:3,ModelId:14246},{ModelName:"Maruti Suzuki Wagon R 1.0 LX, PETROL, 5, 998",MakeId:3,ModelId:14318},{ModelName:"Hyundai Grand i10 Asta 1.1 CRDi, DIESEL, 5, 1120",MakeId:1,ModelId:13937},{ModelName:"Hyundai Elite i20 Asta 1.2, PETROL, 5, 1197",MakeId:1,ModelId:13904},{ModelName:"Honda City V (Petrol), PETROL, 5, 1497",MakeId:2,ModelId:13855},{ModelName:"RENAULT Duster RxE, PETROL, 5, 1598",MakeId:44,ModelId:14658},{ModelName:"Maruti Suzuki Swift Dzire LXi, PETROL, 5, 1298",MakeId:3,ModelId:14250},{ModelName:"Ford Figo Base 1.2 Ti-VCT, PETROL, 5, 1196",MakeId:5,ModelId:14538},{ModelName:"Hyundai Eon Era + (LPG), CNG, 5, 814",MakeId:1,ModelId:13923},{ModelName:"Toyota Etios Liva G, PETROL, 5, 1197",MakeId:6,ModelId:14471},{ModelName:"Honda Amaze 1.2 E i-VTEC, PETROL, 5, 1198",MakeId:2,ModelId:13825}];});}
$scope.updatedallcarlist=function(){$scope.carlistdata=$scope.carlistdata1;}
$scope.carclaimchange=function(){console.log($scope.carclaim);if($scope.carclaim==undefined){$scope.popcarclaimerror=true;flag=1;}
else{$scope.popcarclaimerror=false;var ncbyear=$scope.year-$scope.carreg;if(ncbyear>6){ncbyear=6;$scope.carrequiredncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];}
else{$scope.carrequiredncb=$scope.lastclaimlist[ncbyear].value.split("~")[1];}
if($scope.carclaim=="No~50"){$scope.forcarwidgetpercent=$scope.lastclaimlist[ncbyear-1].value;$scope.carclaimedncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1]}
else if($scope.carclaim=="Yes~0"){$scope.forcarwidgetpercent=$scope.lastclaimlist[0].value;$scope.requiredncbvalue=0;$scope.carclaimedncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[0].value.split("~")[1];}
else if($scope.carclaim=="No~20"){$scope.forcarwidgetpercent=$scope.lastclaimlist[0].value;$scope.carclaimedncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[1].value.split("~")[1];}
else if($scope.carclaim=="No~25"){$scope.forcarwidgetpercent=$scope.lastclaimlist[1].value;$scope.carclaimedncb=$scope.lastclaimlist[1].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[2].value.split("~")[1];}
else if($scope.carclaim=="No~35"){$scope.forcarwidgetpercent=$scope.lastclaimlist[2].value;$scope.carclaimedncb=$scope.lastclaimlist[2].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[3].value.split("~")[1];}
else if($scope.carclaim=="No~45"){$scope.forcarwidgetpercent=$scope.lastclaimlist[3].value;$scope.carclaimedncb=$scope.lastclaimlist[3].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[4].value.split("~")[1];}
if($scope.forcarwidgetpercent=="Yes~0"&&$scope.carclaim=="No~50"){$scope.forcarwidgetpercent="No~0"}}}
$scope.carkitchange=function(){$scope.popcarcnglpgerror=false;if($scope.carkitstatus==undefined){$scope.popcarcnglpgerror=true;flag=1;}
else{$scope.popcarcnglpgerror=false;$scope.formddlkit=$scope.carkitstatus;if($scope.carkitstatus=="Kit3"){$scope.$root.carfuelcontainervalue=true;$scope.cngkitdata="True";$scope.cngkitprice=20000;}
else{$scope.$root.carfuelcontainervalue=false;$scope.cngkitdata="False";$scope.cngkitprice=0;}}}
$scope.checkcngvalueerror=function(){if($scope.$root.entercngkitvalue<0){$scope.popcarcnglpgvalueerror=true;}
else{$scope.popcarcnglpgvalueerror=false;}}
$scope.carregyear=function(){if($scope.carreg!=undefined){$scope.popcarregerror=false;$scope.forcarreg=$scope.carreg;var flag=0;var lastclaimtemp=$scope.lastclaimtaken1;var temparray=[];var yeargap=$scope.year-$scope.carreg;for(var i=0;i<=yeargap;i++){if(lastclaimtemp.length>=i){temparray.push(lastclaimtemp[i]);}}
$scope.lastclaimtaken=temparray;if($scope.carbreakingexp==1&&$scope.carbreaking==0){$scope.showcarncb=false;}
else{$scope.showcarncb=true;}}
else{$scope.popcarregerror=true;}}
$scope.getcarquotes=function(){var productid=4;var flag=0;if($scope.carclaim==undefined&&($scope.carbreakingexp!=1||$scope.carbreaking==1)){$scope.popcarclaimerror=true;flag=1;}
else{$scope.popcarclaimerror=false;}
if($scope.carkitstatus==undefined&&$scope.carfuelcontainer==true){$scope.popcarcnglpgerror=true;flag=1;}
else{$scope.popcarcnglpgerror=false;}
if($scope.carreg==undefined){$scope.popcarregerror=true;flag=1;}
else{$scope.popcarregerror=false;}
if($scope.selectedItem==null){$scope.carerror=true;flag=1;}
else{$scope.carerror=false;}
if($scope.selectedItem1==null&&$scope.byreg==false){$scope.cityerror=true;flag=1;}
else{$scope.cityerror=false;}
if($scope.$root.entercngkitvalue>=5000&&$scope.$root.entercngkitvalue<=50000){$scope.popcarcnglpgvalueerror=false;}
else{$scope.popcarcnglpgvalueerror=true;}
if($scope.$root.carfuelcontainervalue==true&&($scope.$root.entercngkitvalue==undefined||$scope.$root.entercngkitvalue>50000||$scope.$root.entercngkitvalue<5000)){flag=1;$scope.popcarcnglpgvalueerror=true;}
if($scope.userMobile==undefined||$scope.userMobile==null||isNaN($scope.userMobile)==true||$scope.userMobile.toString().length<10||$scope.userMobile.toString().length>10){$scope.mobileerror=true;flag=1;}
if(flag==0){$scope.showbtncarloader=true;if($scope.byreg!=true){$scope.ncblogic();}
else if($scope.carbreakingexp!=1&&$scope.carbreaking!=0){$scope.forcarwidgetpercent=$scope.carclaim;$scope.carclaimedncb=$scope.carclaim.split("~")[1];if($scope.carclaimedncb==0){$scope.carrequiredncb=20;}
else if($scope.carclaimedncb==20){$scope.carrequiredncb=25;}
else if($scope.carclaimedncb==25){$scope.carrequiredncb=35;}
else if($scope.carclaimedncb==35){$scope.carrequiredncb=45;}
else if($scope.carclaimedncb==45){$scope.carrequiredncb=50;}
if($scope.fastlaneresult!=undefined){if($scope.fastlaneresult.ManufactureYear!=$scope.carreg){$scope.Registrationdate=undefined;}}}
if($scope.carbreaking==0&&$scope.carbreakingexp==1){var breaking=91;}
else if($scope.carbreaking==0&&$scope.carbreakingexp==0){var breaking=90;}
else{var breaking=0;}
$mixpanel.track('Form Submitted',{'Product':$scope.products[0].product,"UtmSource":$scope.UtmSource,"ClaimTaken":$scope.ClaimTaken,"ClaimedNCB":$scope.carclaimedncb,"RequiredNCB":$scope.carrequiredncb,"ModelId":$scope.selectedItem.ModelId,"RTOCode":$scope.selectedItem1.RTOCode,"KitValue":$scope.$root.entercngkitvalue,"BreakingDays":breaking,"RegistrationYear":$scope.carreg,"RegistrationDate":$scope.Registrationdate});var data={"userdetails":{"UtmSource":$scope.UtmSource,"UtmCompaign":$scope.utmCompaign,"UtmTerm":$scope.utmTerm,"UtmMedium":$scope.utmMedium,"RegistrationNo":$scope.carregnumber,"VechileDetails":$scope.selectedItem,"CngKitPrice":$scope.$root.entercngkitvalue,"ProductName":"Car","CityList":$scope.selectedItem1,"ClaimPercent":$scope.carclaim,"CngLpgKit":$scope.carkitstatus,"RegYear":$scope.carreg,"EngineNo":$scope.carengineno,"ChasisNo":$scope.carchasisno,"UserName":$scope.username,"UserMobile":$scope.usermobile,"UserEmail":$scope.useremail}};console.log(data);var resultdata=[];resultdata.push(data);var saveRequirementData=CommonService.saveCarRequirementData($scope,globals);saveRequirementData.then(function(pl){$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));if($scope.IGQuoteId>0){$scope.leadcreationfn1(1,productid);}});}}
$scope.ncblogic=function(){if($scope.carclaim=="No~50"){$scope.showcarncb=true;var ncbyear=$scope.year-$scope.carreg;if(ncbyear>=6){ncbyear=6;$scope.carrequiredncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];}
else{$scope.carrequiredncb=$scope.lastclaimlist[ncbyear].value.split("~")[1];}
$scope.carclaimtext=$scope.lastclaimlist[ncbyear-1].text;$scope.carclaimedncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];}
else if($scope.carclaim=="Yes~0"){$scope.carclaimtext=$scope.lastclaimlist[0].text;$scope.carclaimedncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.showcarncb=false;}
else if($scope.carclaim=="No~20"){$scope.showcarncb=true;$scope.carclaimtext=$scope.lastclaimlist[0].text;$scope.carclaimedncb=$scope.lastclaimlist[0].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[1].value.split("~")[1];}
else if($scope.carclaim=="No~25"){$scope.showcarncb=true;$scope.carclaimtext=$scope.lastclaimlist[1].text;$scope.carclaimedncb=$scope.lastclaimlist[1].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[2].value.split("~")[1];}
else if($scope.carclaim=="No~35"){$scope.showcarncb=true;$scope.carclaimtext=$scope.lastclaimlist[2].text;$scope.carclaimedncb=$scope.lastclaimlist[2].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[3].value.split("~")[1];}
else if($scope.carclaim=="No~45"){$scope.showcarncb=true;$scope.carclaimtext=$scope.lastclaimlist[3].text;$scope.carclaimedncb=$scope.lastclaimlist[3].value.split("~")[1];$scope.carrequiredncb=$scope.lastclaimlist[4].value.split("~")[1];}
$scope.forcarwidgetpercent=$scope.carclaim;if($scope.forcarwidgetpercent=="Yes~0"&&$scope.carclaim=="No~50"){$scope.forcarwidgetpercent="No~0"}
if($scope.bikeexpiredpol==91||$scope.carbreakingexp==1){$scope.RequiredNCB=0;$scope.ClaimedNCB=0;$scope.ClaimTaken=true;$scope.carclaimedncb=0;}
else{$scope.RequiredNCB=$scope.carrequiredncb;$scope.ClaimedNCB=$scope.carclaimedncb;$scope.ClaimTaken=angular.lowercase($scope.carclaim.split("~")[0].trim())=="no"?"false":"true";}}
$scope.PopulateClaimddl=function(){$scope.popcarregerror=false;$scope.carclaim=undefined;var d=new Date();var yyyy=d.getFullYear();var nextyy=d.getFullYear()+1;var prevyy=d.getFullYear()-1;var mm=d.getMonth()+1;var dd=d.getDate();var nextdd=d.getDate()+1;if(dd<10){dd='0'+dd}
if(mm<10){mm='0'+mm}
if($scope.byreg==true){if($scope.claimtaken=="No~50"){var ncbyear=$scope.year-$scope.carreg;if(ncbyear>6){ncbyear=6;}
$scope.carclaim=$scope.lastclaimlist[ncbyear-1].value;$scope.carclaimtext=$scope.lastclaimlist[ncbyear-1].text;$scope.forcarwidgetpercent=$scope.carclaim;}
else if($scope.claimtaken=="Yes~0"){$scope.carclaim=$scope.lastclaimlist[0].value;$scope.forcarwidgetpercent=$scope.carclaim;$scope.carclaimtext=$scope.lastclaimlist[0].text;}
else if($scope.claimtaken=="No~20"){$scope.carclaim=$scope.lastclaimlist[0].value;$scope.forcarwidgetpercent=$scope.carclaim;$scope.carclaimtext=$scope.lastclaimlist[0].text;}
else if($scope.claimtaken=="No~25"){$scope.carclaim=$scope.lastclaimlist[1].value;$scope.forcarwidgetpercent=$scope.carclaim;$scope.carclaimtext=$scope.lastclaimlist[1].text;}
else if($scope.claimtaken=="No~35"){$scope.carclaim=$scope.lastclaimlist[2].value;$scope.forcarwidgetpercent=$scope.carclaim;$scope.carclaimtext=$scope.lastclaimlist[2].text;}
else if($scope.claimtaken=="No~45"){$scope.carclaim=$scope.lastclaimlist[3].value;$scope.forcarwidgetpercent=$scope.carclaim;$scope.carclaimtext=$scope.lastclaimlist[3].text;}
if($scope.forcarwidgetpercent=="Yes~0"&&$scope.claimtaken=="No~50"){$scope.forcarwidgetpercent="No~0"}}}
$scope.PopulateNCB=function(){if($scope.claimtaken!=undefined){$scope.regerror=false;}}
$scope.checkageerror=function(flag){if($scope.dt==undefined){$scope.ageerror=true;flag=1;$scope.ageerrortext="Enter Age Between 18 - 100";}
else if($scope.dt<18||$scope.dt>100){$scope.ageerror=true;flag=1;$scope.ageerrortext="Age should be between 18 - 100";}
else{$scope.ageerror=false;$scope.ageerrortext=""}}
$scope.checkadulterror=function(flag){if($scope.selectedadult==undefined||$scope.selectedadult==''||parseInt($scope.selectedadult)>2||parseInt($scope.selectedadult)==0){$scope.adulterror=true;flag=1;$scope.adulterrortext="No of Adult 1 or 2";}
else{$scope.adulterror=false;$scope.adulterrortext=""}}
$scope.checkchilderror=function(flag){if($scope.selectedchild==undefined||$scope.selectedchild==''||parseInt($scope.selectedchild)>4){$scope.childerror=true;flag=1;$scope.childerrortext="No of Child(ren) 0 - 4";}
else{$scope.childerror=false;$scope.childerrortext=""}}
$scope.checkcityerrors=function(flag){$scope.cityerror=false;$scope.citylabel=true;if($scope.selectedItem2==null){flag=1;}
else{$scope.cityerror=false;$scope.formcity=$scope.selectedItem2.cityname;$scope.cityid=$scope.selectedItem2.cityid.split(',')[0].toString();}}
$scope.checkbikertoerror=function(flag){console.log($scope.selectedbikerto);$scope.bikertoerror=false;if($scope.selectedbikerto==null){}
else{$scope.bikertoerror=false;$scope.formbikerto=$scope.selectedbikerto.cityname;}}
$scope.checkbikelisterror=function(flag){console.log($scope.selectedbikemmv);if($scope.selectedbikemmv==null){}
else{$scope.biketexterror=false;$scope.formbikewidget=$scope.selectedbikemmv.bikename;}}
$scope.bikeregyear=function(flag){console.log($scope.bikereg);if($scope.bikereg==undefined){$scope.popbikeregerror=true;}
else{$scope.popbikeregerror=false;$scope.formbikereg=$scope.bikereg;var regyeartemp=$scope.regyear1;var temparray=[];var yeargap=$scope.year-$scope.bikereg;for(var i=0;i<=yeargap;i++){if(regyeartemp.length>=i){temparray.push(regyeartemp[i]);}}
$scope.regyear=temparray;$scope.showbikelastclaim=true;if(flag!=1){$scope.bikelastclaim=undefined;}}}
$scope.bikepolicyexp=function(){if($scope.bikeexpiredpol==undefined){$scope.popbikepolexperror=true;$scope.showbikelastclaim=false;}
else{$scope.popbikepolexperror=false;$scope.formbikelblpolexp=$scope.bikeexpiredpol;if($scope.bikeexpiredpol==0||$scope.bikeexpiredpol==90){$scope.showbikelastclaim=true;}
else{$scope.showbikelastclaim=false;}}}
$scope.bikelastclaimfn=function(){if($scope.bikelastclaim==undefined){$scope.popbikelastclaimerror=true;}
else{$scope.popbikelastclaimerror=false;$scope.formbikewidgetpercent=$scope.bikelastclaim;if($scope.bikelastclaim=="No~50"){var ncbyear=$scope.year-$scope.bikereg;if(ncbyear>6){ncbyear=6;}
$scope.formbikewidgetpercent=$scope.lastclaimlist[ncbyear-1].value;if(ncbyear==6){var nextncb=$scope.lastclaimlist[ncbyear-1].value.split("~")[1];}
else{var nextncb=$scope.lastclaimlist[ncbyear].value.split("~")[1];}
var ncbclaimtaken="false";}
else if($scope.bikelastclaim=="Yes~0"){$scope.formbikewidgetpercent=$scope.lastclaimlist[0].value;var nextncb=$scope.lastclaimlist[0].value.split("~")[1];var ncbclaimtaken="true";}
else if($scope.bikelastclaim=="No~20"){$scope.formbikewidgetpercent=$scope.lastclaimlist[0].value;var nextncb=$scope.lastclaimlist[1].value.split("~")[1];var ncbclaimtaken="true";}
else if($scope.bikelastclaim=="No~25"){$scope.formbikewidgetpercent=$scope.lastclaimlist[1].value;var nextncb=$scope.lastclaimlist[2].value.split("~")[1];var ncbclaimtaken="true";}
else if($scope.bikelastclaim=="No~35"){$scope.formbikewidgetpercent=$scope.lastclaimlist[2].value;var nextncb=$scope.lastclaimlist[3].value.split("~")[1];var ncbclaimtaken="true";}
else if($scope.bikelastclaim=="No~45"){$scope.formbikewidgetpercent=$scope.lastclaimlist[3].value;var nextncb=$scope.lastclaimlist[4].value.split("~")[1];var ncbclaimtaken="true";}
if($scope.formbikewidgetpercent=="Yes~0"&&$scope.bikelastclaim=="No~50"){$scope.formbikewidgetpercent="No~0"}}}
$scope.getlinkbikepop=function(){$scope.showbikepolicyexpired=true;$scope.$root.popupbikepage=true;$scope.$root.scrollhide="scrollhides";}
$scope.checkgender=function(gen){if(gen==0){$scope.maleclass="landing-malebutton active-gender";$scope.femaleclass="landing-femalebutton";$scope.gender="M";$scope.formgender="M";}
else if(gen==1){$scope.maleclass="landing-malebutton";$scope.femaleclass="landing-femalebutton  active-gender";$scope.gender="F";$scope.formgender="F";}}
$scope.checkmoberror=function(mobile){var moberror=ValidationFactory.mobilevalidate(mobile);if(moberror=="False"){$scope.mobileerror=true;}
else{$scope.mobileerror=false;}}
$scope.checksmoker=function(gen){if(gen==0){$scope.nosmokeclass="landing-nonsmokerbutton active-smoker";$scope.smokeclass="landing-smokerbutton";$scope.smoker="no";$scope.formtobacco="False";}
else if(gen==1){$scope.nosmokeclass="landing-nonsmokerbutton";$scope.smokeclass="landing-smokerbutton active-smoker";$scope.smoker="yes";$scope.formtobacco="True";}}
$scope.CheckGender=function(gen){if(gen==0){$scope.nosmokeclass="landing-nonsmokerbutton active-smoker";$scope.smokeclass="landing-smokerbutton";$scope.smoker="no";$scope.formtobacco="False";}
else if(gen==1){$scope.nosmokeclass="landing-nonsmokerbutton";$scope.smokeclass="landing-smokerbutton active-smoker";$scope.smoker="yes";$scope.formtobacco="True";}}
function getQueryStrings(){var assoc={};var decode=function(s){return decodeURIComponent(s.replace(/\+/g," "));};var queryString=location.search.substring(1);var keyValues=queryString.split('&');for(var i in keyValues){var key=keyValues[i].split('=');if(key.length>1){assoc[decode(key[0])]=decode(key[1]);}}
return assoc;}
$scope.AllDestinationlist=function(){var DestinationCountries=CommonService.getCountrylist();DestinationCountries.then(function(data){var TravelDestination=angular.fromJson(data.data);for(var i=0;i<TravelDestination.length;i++){var temp={destinationId:TravelDestination[i].CountryId,destinationName:TravelDestination[i].Country};$scope.travelDestinations.push(temp);}});}
$scope.removedestinationvalidationmessage=function(){if($scope.destinationList.length<10){$scope.MaxDestinationError=false;}}
$scope.removeenddatevalidationmessage=function(){if($scope.travelEndDate!=undefined){$scope.enddateError=false;}}
$scope.checkDestinationerror=function(){if($scope.selectedDestinationItem==null){}
else if($scope.destinationList.length>=10){$scope.MaxDestinationError=true;}
else{$scope.DestinationError=false;$scope.MaxDestinationError=false;for(var i=0;i<$scope.destinationList.length;i++){if($scope.destinationList[i].text==$scope.selectedDestinationItem.destinationName){$scope.bool=true;}}
if($scope.bool==false){$scope.chipvalue=true;$scope.destinationList.push({text:$scope.selectedDestinationItem.destinationName,value:$scope.selectedDestinationItem.destinationId,done:false});}
else{$scope.bool=false;}
if($scope.destinationList.length>0){$scope.showchips=true;}
else{$scope.showchips=false;}
$scope.selectedDestinationItem=null;$scope.searchDestination='';}}
$scope.checkNoOfTravellerError=function(flag){$scope.TotalMembers=[];if($scope.selectedTravellers==undefined){$scope.travellerError=true;flag=1;$scope.travellerErrortext="Enter No of Travellers 1 to 6";}
else{$scope.travellerError=false;$scope.travellerErrortext="";for(var i=1;i<=$scope.selectedTravellers;i++){$scope.TotalMembers.push({id:i});}}}
$scope.removeMember=function(memberid){if(parseInt($scope.selectedTravellers)==1){alert("Minimum one traveller is required");}
else{var val=$filter('filter')($scope.TotalMembers,function(d){return d.id==memberid});var idx=$scope.TotalMembers.indexOf(val[0]);if(idx>-1){$scope.selectedTravellers=parseInt($scope.selectedTravellers)-1;$scope.dataValue.splice(idx+1,1);$scope.TotalMembers.splice($scope.selectedTravellers,1);for(i=1;i<=$scope.selectedTravellers;i++){if($scope.dataValue[i]==undefined||$scope.dataValue[i]==""){$scope.ageError=true;}
else{$scope.ageError=false;}}}}}
$scope.showsecondpopup=function(){if(validatecontrolsoncontinue()){$scope.travelProceedBtnLoader=true;$scope.$root.travelfirstpop=false;$scope.$root.travelsecondpop=true;$scope.travelpopFirst="display-none";$scope.travelpopSecond="display-visible";}}
$scope.showfirstpopup=function(){$scope.$root.travelfirstpop=true;$scope.$root.travelsecondpop=false;$scope.ageError=false;}
$scope.addMember=function(){$scope.selectedTravellers=$scope.selectedTravellers+1;$scope.TotalMembers.push({id:$scope.selectedTravellers});$scope.dataValue[$scope.selectedTravellers]="";}
$scope.gettravelquotespop=function(){validatecontrols();}
$scope.checktravelageerror=function(){for(var i=1;i<=$scope.selectedTravellers;i++){if($scope.dataValue[i]==undefined||$scope.dataValue[i]==""){break;}}
if(i>$scope.selectedTravellers){$scope.ageError=false;}}
function validatecontrolsoncontinue(){$scope.formtraveldestinations=undefined;$scope.formtravelstartdate=undefined;$scope.formtravelenddate=undefined;if($scope.userMobile==undefined||$scope.userMobile==null||isNaN($scope.userMobile)==true||$scope.userMobile.toString().length<10||$scope.userMobile.toString().length>10){$scope.mobileerror=true;}
if($scope.destinationList.length==0){$scope.DestinationError=true;}
else{$scope.MaxDestinationError=false;for(i=0;i<$scope.destinationList.length;i++){if($scope.formtraveldestinations==undefined){$scope.formtraveldestinations=$scope.destinationList[i].value;$scope.formtraveldestinationsName=$scope.destinationList[i].text;}
else{$scope.formtraveldestinations=$scope.formtraveldestinations+','+$scope.destinationList[i].value;$scope.formtraveldestinationsName=$scope.formtraveldestinationsName+', '+$scope.destinationList[i].text;}}
document.querySelector("#txtTravelDestinations").value=$scope.formtraveldestinations;document.querySelector("#txtTravelDestinationsName").value=$scope.formtraveldestinationsName;}
if($scope.travelStartDate==undefined){$scope.startdateError=true;}
if($scope.travelEndDate==undefined){$scope.enddateError=true;}
else if($scope.travelStartDate>$scope.travelEndDate){alert('Travel Start Date should be before Travel End Date');}
else{$scope.formtravelstartdate=$scope.travelStartDate.toLocaleDateString('en-US');$scope.formtravelenddate=$scope.travelEndDate.toLocaleDateString('en-US');document.querySelector("#txtTravelStartDate").value=$scope.travelStartDate.toLocaleDateString('en-US');document.querySelector("#txtTravelendDate").value=$scope.travelEndDate.toLocaleDateString('en-US');}
if($scope.selectedTravellers==undefined){$scope.travellerError=true;$scope.travellerErrortext="Enter No of Travellers 1 to 6";}
if($scope.DestinationError==true||$scope.mobileerror==true||$scope.selectedTravellers==undefined||$scope.travelStartDate>$scope.travelEndDate||$scope.travelEndDate==undefined||$scope.travelStartDate==undefined){return false;}
else{return true;}}
function validatecontrols(){if(validatecontrolsoncontinue()){var productid=1;$scope.formtravellerages=undefined;for(i=1;i<=$scope.selectedTravellers;i++){if($scope.dataValue[i]==undefined||$scope.dataValue[i]==""){$scope.ageError=true;return false;}
else{$scope.ageError=false;if($scope.formtravellerages==undefined){$scope.formtravellerages=$scope.dataValue[i];}
else{$scope.formtravellerages=$scope.formtravellerages+','+$scope.dataValue[i];}}}
$scope.showbtntravelloader=true;document.querySelector("#txtTravellerAges").value=$scope.formtravellerages;var currentPage=$location.absUrl();$scope.utm_source="";$scope.utm_campaign="";$scope.utm_term="";$scope.utm_medium="";if(currentPage.indexOf("utm_source")!=-1){$scope.utm_source=currentPage.slice(currentPage.indexOf("utm_source=")+11).split("&")[0];}
if(currentPage.indexOf("utm_campaign")!=-1){$scope.utm_campaign=currentPage.slice(currentPage.indexOf("utm_campaign=")+13).split("&")[0];}
if(currentPage.indexOf("utm_term")!=-1){$scope.utm_term=currentPage.slice(currentPage.indexOf("utm_term=")+9).split("&")[0];}
if(currentPage.indexOf("utm_medium")!=-1){$scope.utm_medium=currentPage.slice(currentPage.indexOf("utm_medium=")+11).split("&")[0];}
$scope.selectedtravelerDOBArray=[];$mixpanel.track('Form Submitted',{'Product':$scope.products[7].product,"UtmSource":$scope.utm_source,"DOBs":$scope.DOBArray,"Destinations":$scope.formtraveldestinations.toString().split(","),"EndDate":$scope.formtravelenddate,"StartDate":$scope.formtravelstartdate});var data={"userdetails":{"Destination":$scope.formtraveldestinations,"DestinationName":$scope.formtraveldestinationsName,"StartDate":$scope.formtravelstartdate,"EndDate":$scope.formtravelenddate,"TravellerAges":$scope.formtravellerages,"Product":"Travel","Username":$scope.username,"Usermobile":$scope.usermobile,"Useremail":$scope.useremail,"UtmSource":$scope.utm_source,"UtmCampaign":$scope.utm_campaign,"UtmTerm":$scope.utm_term,"UtmMedium":$scope.utm_medium}};$scope.selectedtravelerAgeArray=$scope.formtravellerages.toString().split(',');for(i=0;i<$scope.selectedtravelerAgeArray.length;i++){var d=new Date();var dobs=d.setFullYear(d.getFullYear()-parseInt($scope.selectedtravelerAgeArray[i]));$scope.selectedtravelerDOBArray.push(dobs);}
$scope.DOBArray=DataFactory.stringifyallDobs($scope.selectedtravelerDOBArray);var saveRequirementData=CommonService.saveTravelRequirementData($scope,globals);saveRequirementData.then(function(pl){$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));if($scope.IGQuoteId>0){$scope.leadcreationfn1(1,productid);}});return true;}}
$scope.otpFn=function(flag,flag1){if(flag==2){$scope.resendFlag=true;$scope.wrongotpmsgshow=false;$scope.otpText="Successfully Re-sent the One Time Password to your mobile number";}
else{$scope.resendFlag=false;var tempmobile=$scope.userMobile;if(flag1==3)
$scope.userMobile=$scope.userMobile;}
$scope.mobileerror=false;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserName="IGTERM2016";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.UserPassword="IG@TERM@2016";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserName="IGTERM2016";$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.UserPassword="IG@TERM@2016";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Products.product[0].productid=3;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.User.Productid=3;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.leads.lead[0].leadId=$scope.IGQuoteId;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.Name="user";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.EmailId="2018@xyz.com";$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.MobileNo=$scope.userMobile;var resendFlag=CommonService.SendOTPReboot($scope,globals);resendFlag.then(function(result){console.log(result);var token=result.data.TokenId;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.OTPValidation.Tokenid=token;$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.OTPValidation.Mobile=$scope.userMobile;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.OriginPageid=0;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.IsCallBackRequire="false";if(result.data.IsVerified==true){$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.Tokenid=token;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.MobileNo=$scope.userMobile;$scope.leadcreationfn4(token);}
else if(result.data.Message=="success"){$scope.mobileMessage="Enter 4 - digit code sent to your mobile no. "+$scope.userMobile;$scope.mobileerror=true;}
else if(result.data.Message=="Proceed to the quotes page without OTP verification"){$window.location.href=globals.RedirectURL+"Term?CPID="+btoa($scope.IGQuoteId)}
else{$scope.showbtnleadloader=false;$scope.updateLoader=false;if(flag1==3){$scope.userMobile=tempmobile;$scope.errors.newMobile=true;$scope.errors.newMobileMessage=result.data.Message;}
else{$scope.mobileMessage=result.data.Message;$scope.mobileerror=true;}}},function(){$scope.showbtnleadloader=false;$scope.updateLoader=false;});}
$scope.leadcreationfn7=function(){$scope.otpcreaterequestdata.RequestString.OTPValidationRequest.OTPValidation.OTP=$scope.userOTP;var response=CommonService.GetMobileVerificationWithOTPRequest2($scope.otpcreaterequestdata);$scope.otpLoader=true;$scope.wrongotpmsgshow=false;response.then(function(result){console.log(result);result.data=[angular.fromJson(result.data)];$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.User.Tokenid=result.data[0].data.Token.Tokenid;$scope.leadcreaterequestdata.RequestString.LeadCreateRequest.Visitor.MobileNo=$scope.userMobile;if(result.data[0].data.Error.ErrorCode==1){$scope.wrongotpmsg="Enter Correct OTP";$scope.wrongotpmsgshow=true;$scope.otpLoader=false;}else{$scope.leadcreationfn4(result.data)}},function(){$scope.otpLoader=false;});}
$scope.leadcreationfn4=function(value,flag){var response=CommonService.GetMobileVerificationWithOTPRequest1($scope.leadcreaterequestdata);response.then(function(result){console.log(result);result.data=[angular.fromJson(result.data)];if(result.data[0].data.Error.ErrorCode=="0"){$window.location.href=globals.RedirectURL+"Term?CPID="+btoa($scope.IGQuoteId)}},function(){$scope.otpLoader=false;});}
$scope.gettermquotes=function(){var flag=1;var productid=3;var datemessage=ValidationFactory.onlynumber($scope.IGdate);var monthmessage=ValidationFactory.onlynumber($scope.IGmonth);var yearmessage=ValidationFactory.onlynumber($scope.IGyear);if($scope.form_age==undefined||$scope.IGdate==undefined||$scope.IGmonth==undefined||$scope.IGyear==undefined||datemessage=="False"||monthmessage=="False"||yearmessage=="False"||$scope.form_age<18||$scope.dateerror==true){flag=0;$scope.dateerror=true;}
if($scope.userMobile==undefined||$scope.userMobile==null||isNaN($scope.userMobile)==true||$scope.userMobile.toString().length<10||$scope.userMobile.toString().length>10){$scope.mobileerror=true;flag=0;}
if(flag==1){$scope.showbtntermloader=true;$scope.dateofbirth=$scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear;$scope.CityID=0;$mixpanel.track('Form Submitted',{'Product':$scope.products[3].product,"UtmSource":$scope.utm_source,"AnnualIncomeRange":$scope.anula_inc,"CityID":0,"DateOfBirth":$scope.formdob,"Gender":$scope.gender,"IsTobacco":$scope.formtobacco,"SumAssured":$scope.SumAssured});$scope.$root.scrollhide="whitebg";var userincomeinlacs=parseFloat(($scope.anula_inc/100000).toFixed(0)*100000);$scope.AgeInYears=$scope.age;if($scope.AgeInYears<=39){$scope.SumAssured=userincomeinlacs*20;}
else if($scope.AgeInYears>=40&&$scope.AgeInYears<=50){$scope.SumAssured=userincomeinlacs*15;}
else if($scope.AgeInYears>=51&&$scope.AgeInYears<=55){$scope.SumAssured=userincomeinlacs*10;}
else{$scope.SumAssured=userincomeinlacs*5;}
var data={"userdetails":{"gender":$scope.gender,"istobacco":$scope.formtobacco,"productname":"Term","city":0,"dateofbirth":$scope.dateofbirth,"actualincome":$scope.anula_inc,"incomerange":$scope.minincome+'-'+$scope.maxincome+' lacs',"PayingMode":'Yearly',"SelectedRiders":"","PolicyTerm":0,"userMaxAnnualIncomeRange":$scope.maxincome,"userMinAnnualIncomeRange":$scope.minincome,"Username":$scope.username,"Usermobile":$scope.usermobile,"Useremail":$scope.useremail}};var saveRequirementData=CommonService.saveTermRequirementDatanew($scope,globals);saveRequirementData.then(function(pl){$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));if($scope.IGQuoteId>0){$scope.otpFn();}});}}
$scope.gettermquotes_new=function(){var flag=1;var productid=3;var datemessage=ValidationFactory.onlynumber($scope.IGdate);var monthmessage=ValidationFactory.onlynumber($scope.IGmonth);var yearmessage=ValidationFactory.onlynumber($scope.IGyear);if($scope.form_age==undefined||$scope.IGdate==undefined||$scope.IGmonth==undefined||$scope.IGyear==undefined||datemessage=="False"||monthmessage=="False"||yearmessage=="False"||$scope.form_age<18||$scope.dateerror==true){flag=0;$scope.dateerror=true;}
if($scope.userMobile==undefined||$scope.userMobile==null||isNaN($scope.userMobile)==true||$scope.userMobile.toString().length<10||$scope.userMobile.toString().length>10){$scope.mobileerror=true;flag=0;}
if(flag==1){$scope.showbtntermloader=true;$scope.dateofbirth=$scope.IGdate+"-"+$scope.IGmonth+"-"+$scope.IGyear;$scope.CityID=0;$mixpanel.track('Form Submitted',{'Product':$scope.products[3].product,"UtmSource":$scope.utm_source,"AnnualIncomeRange":$scope.anula_inc,"CityID":'0',"DateOfBirth":$scope.formdob,"Gender":$scope.gender,"IsTobacco":$scope.formtobacco,"SumAssured":$scope.SumAssured});$scope.$root.scrollhide="whitebg";var userincomeinlacs=parseFloat(($scope.anula_inc/100000).toFixed(0)*100000);$scope.AgeInYears=$scope.age;if($scope.AgeInYears<=39){$scope.SumAssured=userincomeinlacs*20;}
else if($scope.AgeInYears>=40&&$scope.AgeInYears<=50){$scope.SumAssured=userincomeinlacs*15;}
else if($scope.AgeInYears>=51&&$scope.AgeInYears<=55){$scope.SumAssured=userincomeinlacs*10;}
else{$scope.SumAssured=userincomeinlacs*5;}
var data={"userdetails":{"gender":$scope.gender,"istobacco":$scope.formtobacco,"productname":"Term","city":'',"dateofbirth":$scope.dateofbirth,"actualincome":$scope.anula_inc,"incomerange":$scope.minincome+'-'+$scope.maxincome+' lacs',"PayingMode":'Yearly',"SelectedRiders":"","PolicyTerm":0,"userMaxAnnualIncomeRange":$scope.maxincome,"userMinAnnualIncomeRange":$scope.minincome,"Username":$scope.username,"Usermobile":$scope.usermobile,"Useremail":$scope.useremail}};var saveRequirementData=CommonService.saveTermRequirementDatanew($scope,globals);saveRequirementData.then(function(pl){$scope.IGQuoteId=JSON.parse(angular.toJson(pl.data.IGQuoteId));if($scope.IGQuoteId>0){$scope.leadcreationfn1(1,productid);}});}}
$scope.validatedot=function(value){$scope=TermFactory.calculateSumAssuredRange($scope,value);}
$scope.products=[{product:"Car"},{product:"Twowheeler"},{product:"Health"},{product:"Term"},{product:"Child"},{product:"Investment"},{product:"Pension"},{product:"Travel"}];$scope.closebeenHerePop=function(){$scope.$root.beenHerePopUpAnimation="out fadeOutDownBig";$scope.$root.scrollhide="";}
$scope.closemobilepopup1=function(item,product,type){$scope.popupformob=false;$scope.txtcarvariant=item.ModelName
$scope.selectedItem=item;}
$scope.updateincome=function(){TermFactory.userActualIncome($scope);}
$scope.closemobilepopup=function(item,product,type){if(product=='car'&&type=='city'){$scope.carcitydropdown=false;$scope.txtCarcity=item.RTOCode;$scope.selectedItem1=item;}
else if(product=='car'&&type=='variant'){$scope.popupformob=false;$scope.txtcarvariant=item.ModelName
$scope.selectedItem=item;}
else if(product=='term'&&type=='city'){$scope.txtCityStateForTerm=true;$scope.termcitystate=false;$scope.txtCityStateTerm=item.cityname;$scope.selectedItem2=item;}
else if(product=='health'&&type=='city'){$scope.healthcitystate=false;$scope.txtCityStateForHealth=true;$scope.txtCityStateHealth=item.cityname;$scope.selectedItem2=item;}
else if(product=='bike'&&type=='bikerto'){$scope.ngBikeRto=true;$scope.ngbikerto=false;$scope.txtbikerto=item.cityname;$scope.selectedbikerto=item;}
else if(product=='bike'&&type=='biketype'){$scope.ngbiketype=true;$scope.ngddlbiketype=false;$scope.txtbiketype=item.bikename;$scope.selectedbikemmv=item;}}
$scope.encryptedData=function(value){if(value){const encrypted=CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(value+globals.staticKey),CryptoJS.enc.Utf8.parse(globals.encryptionKey),{keySize:128/8,iv:CryptoJS.enc.Utf8.parse(globals.encryptionIv),mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});return encrypted.toString();}}
$scope.openLife=function(){$window.location.href="/life-insurance";};}]);